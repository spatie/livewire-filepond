{"version":3,"file":"filepond.js","sources":["../../node_modules/filepond/dist/filepond.esm.js","../../node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.esm.js","../../node_modules/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.esm.js","../../node_modules/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.esm.js","../../node_modules/filepond-plugin-image-crop/dist/filepond-plugin-image-crop.esm.js","../../node_modules/filepond-plugin-image-transform/dist/filepond-plugin-image-transform.esm.js","../../node_modules/filepond-plugin-image-resize/dist/filepond-plugin-image-resize.esm.js","../js/filepond.js"],"sourcesContent":["/*!\n * FilePond 4.31.1\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\nconst isNode = value => value instanceof HTMLElement;\n\nconst createStore = (initialState, queries = [], actions = []) => {\n    // internal state\n    const state = {\n        ...initialState,\n    };\n\n    // contains all actions for next frame, is clear when actions are requested\n    const actionQueue = [];\n    const dispatchQueue = [];\n\n    // returns a duplicate of the current state\n    const getState = () => ({ ...state });\n\n    // returns a duplicate of the actions array and clears the actions array\n    const processActionQueue = () => {\n        // create copy of actions queue\n        const queue = [...actionQueue];\n\n        // clear actions queue (we don't want no double actions)\n        actionQueue.length = 0;\n\n        return queue;\n    };\n\n    // processes actions that might block the main UI thread\n    const processDispatchQueue = () => {\n        // create copy of actions queue\n        const queue = [...dispatchQueue];\n\n        // clear actions queue (we don't want no double actions)\n        dispatchQueue.length = 0;\n\n        // now dispatch these actions\n        queue.forEach(({ type, data }) => {\n            dispatch(type, data);\n        });\n    };\n\n    // adds a new action, calls its handler and\n    const dispatch = (type, data, isBlocking) => {\n        // is blocking action (should never block if document is hidden)\n        if (isBlocking && !document.hidden) {\n            dispatchQueue.push({ type, data });\n            return;\n        }\n\n        // if this action has a handler, handle the action\n        if (actionHandlers[type]) {\n            actionHandlers[type](data);\n        }\n\n        // now add action\n        actionQueue.push({\n            type,\n            data,\n        });\n    };\n\n    const query = (str, ...args) => (queryHandles[str] ? queryHandles[str](...args) : null);\n\n    const api = {\n        getState,\n        processActionQueue,\n        processDispatchQueue,\n        dispatch,\n        query,\n    };\n\n    let queryHandles = {};\n    queries.forEach(query => {\n        queryHandles = {\n            ...query(state),\n            ...queryHandles,\n        };\n    });\n\n    let actionHandlers = {};\n    actions.forEach(action => {\n        actionHandlers = {\n            ...action(dispatch, query, state),\n            ...actionHandlers,\n        };\n    });\n\n    return api;\n};\n\nconst defineProperty = (obj, property, definition) => {\n    if (typeof definition === 'function') {\n        obj[property] = definition;\n        return;\n    }\n    Object.defineProperty(obj, property, { ...definition });\n};\n\nconst forin = (obj, cb) => {\n    for (const key in obj) {\n        if (!obj.hasOwnProperty(key)) {\n            continue;\n        }\n\n        cb(key, obj[key]);\n    }\n};\n\nconst createObject = definition => {\n    const obj = {};\n    forin(definition, property => {\n        defineProperty(obj, property, definition[property]);\n    });\n    return obj;\n};\n\nconst attr = (node, name, value = null) => {\n    if (value === null) {\n        return node.getAttribute(name) || node.hasAttribute(name);\n    }\n    node.setAttribute(name, value);\n};\n\nconst ns = 'http://www.w3.org/2000/svg';\nconst svgElements = ['svg', 'path']; // only svg elements used\n\nconst isSVGElement = tag => svgElements.includes(tag);\n\nconst createElement = (tag, className, attributes = {}) => {\n    if (typeof className === 'object') {\n        attributes = className;\n        className = null;\n    }\n    const element = isSVGElement(tag)\n        ? document.createElementNS(ns, tag)\n        : document.createElement(tag);\n    if (className) {\n        if (isSVGElement(tag)) {\n            attr(element, 'class', className);\n        } else {\n            element.className = className;\n        }\n    }\n    forin(attributes, (name, value) => {\n        attr(element, name, value);\n    });\n    return element;\n};\n\nconst appendChild = parent => (child, index) => {\n    if (typeof index !== 'undefined' && parent.children[index]) {\n        parent.insertBefore(child, parent.children[index]);\n    } else {\n        parent.appendChild(child);\n    }\n};\n\nconst appendChildView = (parent, childViews) => (view, index) => {\n    if (typeof index !== 'undefined') {\n        childViews.splice(index, 0, view);\n    } else {\n        childViews.push(view);\n    }\n\n    return view;\n};\n\nconst removeChildView = (parent, childViews) => view => {\n    // remove from child views\n    childViews.splice(childViews.indexOf(view), 1);\n\n    // remove the element\n    if (view.element.parentNode) {\n        parent.removeChild(view.element);\n    }\n\n    return view;\n};\n\nconst IS_BROWSER = (() =>\n    typeof window !== 'undefined' && typeof window.document !== 'undefined')();\nconst isBrowser = () => IS_BROWSER;\n\nconst testElement = isBrowser() ? createElement('svg') : {};\nconst getChildCount =\n    'children' in testElement ? el => el.children.length : el => el.childNodes.length;\n\nconst getViewRect = (elementRect, childViews, offset, scale) => {\n    const left = offset[0] || elementRect.left;\n    const top = offset[1] || elementRect.top;\n    const right = left + elementRect.width;\n    const bottom = top + elementRect.height * (scale[1] || 1);\n\n    const rect = {\n        // the rectangle of the element itself\n        element: {\n            ...elementRect,\n        },\n\n        // the rectangle of the element expanded to contain its children, does not include any margins\n        inner: {\n            left: elementRect.left,\n            top: elementRect.top,\n            right: elementRect.right,\n            bottom: elementRect.bottom,\n        },\n\n        // the rectangle of the element expanded to contain its children including own margin and child margins\n        // margins will be added after we've recalculated the size\n        outer: {\n            left,\n            top,\n            right,\n            bottom,\n        },\n    };\n\n    // expand rect to fit all child rectangles\n    childViews\n        .filter(childView => !childView.isRectIgnored())\n        .map(childView => childView.rect)\n        .forEach(childViewRect => {\n            expandRect(rect.inner, { ...childViewRect.inner });\n            expandRect(rect.outer, { ...childViewRect.outer });\n        });\n\n    // calculate inner width and height\n    calculateRectSize(rect.inner);\n\n    // append additional margin (top and left margins are included in top and left automatically)\n    rect.outer.bottom += rect.element.marginBottom;\n    rect.outer.right += rect.element.marginRight;\n\n    // calculate outer width and height\n    calculateRectSize(rect.outer);\n\n    return rect;\n};\n\nconst expandRect = (parent, child) => {\n    // adjust for parent offset\n    child.top += parent.top;\n    child.right += parent.left;\n    child.bottom += parent.top;\n    child.left += parent.left;\n\n    if (child.bottom > parent.bottom) {\n        parent.bottom = child.bottom;\n    }\n\n    if (child.right > parent.right) {\n        parent.right = child.right;\n    }\n};\n\nconst calculateRectSize = rect => {\n    rect.width = rect.right - rect.left;\n    rect.height = rect.bottom - rect.top;\n};\n\nconst isNumber = value => typeof value === 'number';\n\n/**\n * Determines if position is at destination\n * @param position\n * @param destination\n * @param velocity\n * @param errorMargin\n * @returns {boolean}\n */\nconst thereYet = (position, destination, velocity, errorMargin = 0.001) => {\n    return Math.abs(position - destination) < errorMargin && Math.abs(velocity) < errorMargin;\n};\n\n/**\n * Spring animation\n */\nconst spring =\n    // default options\n    ({ stiffness = 0.5, damping = 0.75, mass = 10 } = {}) =>\n        // method definition\n        {\n            let target = null;\n            let position = null;\n            let velocity = 0;\n            let resting = false;\n\n            // updates spring state\n            const interpolate = (ts, skipToEndState) => {\n                // in rest, don't animate\n                if (resting) return;\n\n                // need at least a target or position to do springy things\n                if (!(isNumber(target) && isNumber(position))) {\n                    resting = true;\n                    velocity = 0;\n                    return;\n                }\n\n                // calculate spring force\n                const f = -(position - target) * stiffness;\n\n                // update velocity by adding force based on mass\n                velocity += f / mass;\n\n                // update position by adding velocity\n                position += velocity;\n\n                // slow down based on amount of damping\n                velocity *= damping;\n\n                // we've arrived if we're near target and our velocity is near zero\n                if (thereYet(position, target, velocity) || skipToEndState) {\n                    position = target;\n                    velocity = 0;\n                    resting = true;\n\n                    // we done\n                    api.onupdate(position);\n                    api.oncomplete(position);\n                } else {\n                    // progress update\n                    api.onupdate(position);\n                }\n            };\n\n            /**\n             * Set new target value\n             * @param value\n             */\n            const setTarget = value => {\n                // if currently has no position, set target and position to this value\n                if (isNumber(value) && !isNumber(position)) {\n                    position = value;\n                }\n\n                // next target value will not be animated to\n                if (target === null) {\n                    target = value;\n                    position = value;\n                }\n\n                // let start moving to target\n                target = value;\n\n                // already at target\n                if (position === target || typeof target === 'undefined') {\n                    // now resting as target is current position, stop moving\n                    resting = true;\n                    velocity = 0;\n\n                    // done!\n                    api.onupdate(position);\n                    api.oncomplete(position);\n\n                    return;\n                }\n\n                resting = false;\n            };\n\n            // need 'api' to call onupdate callback\n            const api = createObject({\n                interpolate,\n                target: {\n                    set: setTarget,\n                    get: () => target,\n                },\n                resting: {\n                    get: () => resting,\n                },\n                onupdate: value => {},\n                oncomplete: value => {},\n            });\n\n            return api;\n        };\n\nconst easeLinear = t => t;\nconst easeInOutQuad = t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t);\n\nconst tween =\n    // default values\n    ({ duration = 500, easing = easeInOutQuad, delay = 0 } = {}) =>\n        // method definition\n        {\n            let start = null;\n            let t;\n            let p;\n            let resting = true;\n            let reverse = false;\n            let target = null;\n\n            const interpolate = (ts, skipToEndState) => {\n                if (resting || target === null) return;\n\n                if (start === null) {\n                    start = ts;\n                }\n\n                if (ts - start < delay) return;\n\n                t = ts - start - delay;\n\n                if (t >= duration || skipToEndState) {\n                    t = 1;\n                    p = reverse ? 0 : 1;\n                    api.onupdate(p * target);\n                    api.oncomplete(p * target);\n                    resting = true;\n                } else {\n                    p = t / duration;\n                    api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n                }\n            };\n\n            // need 'api' to call onupdate callback\n            const api = createObject({\n                interpolate,\n                target: {\n                    get: () => (reverse ? 0 : target),\n                    set: value => {\n                        // is initial value\n                        if (target === null) {\n                            target = value;\n                            api.onupdate(value);\n                            api.oncomplete(value);\n                            return;\n                        }\n\n                        // want to tween to a smaller value and have a current value\n                        if (value < target) {\n                            target = 1;\n                            reverse = true;\n                        } else {\n                            // not tweening to a smaller value\n                            reverse = false;\n                            target = value;\n                        }\n\n                        // let's go!\n                        resting = false;\n                        start = null;\n                    },\n                },\n                resting: {\n                    get: () => resting,\n                },\n                onupdate: value => {},\n                oncomplete: value => {},\n            });\n\n            return api;\n        };\n\nconst animator = {\n    spring,\n    tween,\n};\n\n/*\n { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n { translation: { type: 'spring', ... }, ... }\n { translation: { x: { type: 'spring', ... } } }\n*/\nconst createAnimator = (definition, category, property) => {\n    // default is single definition\n    // we check if transform is set, if so, we check if property is set\n    const def =\n        definition[category] && typeof definition[category][property] === 'object'\n            ? definition[category][property]\n            : definition[category] || definition;\n\n    const type = typeof def === 'string' ? def : def.type;\n    const props = typeof def === 'object' ? { ...def } : {};\n\n    return animator[type] ? animator[type](props) : null;\n};\n\nconst addGetSet = (keys, obj, props, overwrite = false) => {\n    obj = Array.isArray(obj) ? obj : [obj];\n    obj.forEach(o => {\n        keys.forEach(key => {\n            let name = key;\n            let getter = () => props[key];\n            let setter = value => (props[key] = value);\n\n            if (typeof key === 'object') {\n                name = key.key;\n                getter = key.getter || getter;\n                setter = key.setter || setter;\n            }\n\n            if (o[name] && !overwrite) {\n                return;\n            }\n\n            o[name] = {\n                get: getter,\n                set: setter,\n            };\n        });\n    });\n};\n\n// add to state,\n// add getters and setters to internal and external api (if not set)\n// setup animators\n\nconst animations = ({ mixinConfig, viewProps, viewInternalAPI, viewExternalAPI }) => {\n    // initial properties\n    const initialProps = { ...viewProps };\n\n    // list of all active animations\n    const animations = [];\n\n    // setup animators\n    forin(mixinConfig, (property, animation) => {\n        const animator = createAnimator(animation);\n        if (!animator) {\n            return;\n        }\n\n        // when the animator updates, update the view state value\n        animator.onupdate = value => {\n            viewProps[property] = value;\n        };\n\n        // set animator target\n        animator.target = initialProps[property];\n\n        // when value is set, set the animator target value\n        const prop = {\n            key: property,\n            setter: value => {\n                // if already at target, we done!\n                if (animator.target === value) {\n                    return;\n                }\n\n                animator.target = value;\n            },\n            getter: () => viewProps[property],\n        };\n\n        // add getters and setters\n        addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n        // add it to the list for easy updating from the _write method\n        animations.push(animator);\n    });\n\n    // expose internal write api\n    return {\n        write: ts => {\n            let skipToEndState = document.hidden;\n            let resting = true;\n            animations.forEach(animation => {\n                if (!animation.resting) resting = false;\n                animation.interpolate(ts, skipToEndState);\n            });\n            return resting;\n        },\n        destroy: () => {},\n    };\n};\n\nconst addEvent = element => (type, fn) => {\n    element.addEventListener(type, fn);\n};\n\nconst removeEvent = element => (type, fn) => {\n    element.removeEventListener(type, fn);\n};\n\n// mixin\nconst listeners = ({\n    mixinConfig,\n    viewProps,\n    viewInternalAPI,\n    viewExternalAPI,\n    viewState,\n    view,\n}) => {\n    const events = [];\n\n    const add = addEvent(view.element);\n    const remove = removeEvent(view.element);\n\n    viewExternalAPI.on = (type, fn) => {\n        events.push({\n            type,\n            fn,\n        });\n        add(type, fn);\n    };\n\n    viewExternalAPI.off = (type, fn) => {\n        events.splice(events.findIndex(event => event.type === type && event.fn === fn), 1);\n        remove(type, fn);\n    };\n\n    return {\n        write: () => {\n            // not busy\n            return true;\n        },\n        destroy: () => {\n            events.forEach(event => {\n                remove(event.type, event.fn);\n            });\n        },\n    };\n};\n\n// add to external api and link to props\n\nconst apis = ({ mixinConfig, viewProps, viewExternalAPI }) => {\n    addGetSet(mixinConfig, viewExternalAPI, viewProps);\n};\n\nconst isDefined = value => value != null;\n\n// add to state,\n// add getters and setters to internal and external api (if not set)\n// set initial state based on props in viewProps\n// apply as transforms each frame\n\nconst defaults = {\n    opacity: 1,\n    scaleX: 1,\n    scaleY: 1,\n    translateX: 0,\n    translateY: 0,\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    originX: 0,\n    originY: 0,\n};\n\nconst styles = ({ mixinConfig, viewProps, viewInternalAPI, viewExternalAPI, view }) => {\n    // initial props\n    const initialProps = { ...viewProps };\n\n    // current props\n    const currentProps = {};\n\n    // we will add those properties to the external API and link them to the viewState\n    addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n    // override rect on internal and external rect getter so it takes in account transforms\n    const getOffset = () => [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n    const getScale = () => [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n    const getRect = () =>\n        view.rect ? getViewRect(view.rect, view.childViews, getOffset(), getScale()) : null;\n    viewInternalAPI.rect = { get: getRect };\n    viewExternalAPI.rect = { get: getRect };\n\n    // apply view props\n    mixinConfig.forEach(key => {\n        viewProps[key] =\n            typeof initialProps[key] === 'undefined' ? defaults[key] : initialProps[key];\n    });\n\n    // expose api\n    return {\n        write: () => {\n            // see if props have changed\n            if (!propsHaveChanged(currentProps, viewProps)) {\n                return;\n            }\n\n            // moves element to correct position on screen\n            applyStyles(view.element, viewProps);\n\n            // store new transforms\n            Object.assign(currentProps, { ...viewProps });\n\n            // no longer busy\n            return true;\n        },\n        destroy: () => {},\n    };\n};\n\nconst propsHaveChanged = (currentProps, newProps) => {\n    // different amount of keys\n    if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n        return true;\n    }\n\n    // lets analyze the individual props\n    for (const prop in newProps) {\n        if (newProps[prop] !== currentProps[prop]) {\n            return true;\n        }\n    }\n\n    return false;\n};\n\nconst applyStyles = (\n    element,\n    {\n        opacity,\n        perspective,\n        translateX,\n        translateY,\n        scaleX,\n        scaleY,\n        rotateX,\n        rotateY,\n        rotateZ,\n        originX,\n        originY,\n        width,\n        height,\n    }\n) => {\n    let transforms = '';\n    let styles = '';\n\n    // handle transform origin\n    if (isDefined(originX) || isDefined(originY)) {\n        styles += `transform-origin: ${originX || 0}px ${originY || 0}px;`;\n    }\n\n    // transform order is relevant\n    // 0. perspective\n    if (isDefined(perspective)) {\n        transforms += `perspective(${perspective}px) `;\n    }\n\n    // 1. translate\n    if (isDefined(translateX) || isDefined(translateY)) {\n        transforms += `translate3d(${translateX || 0}px, ${translateY || 0}px, 0) `;\n    }\n\n    // 2. scale\n    if (isDefined(scaleX) || isDefined(scaleY)) {\n        transforms += `scale3d(${isDefined(scaleX) ? scaleX : 1}, ${\n            isDefined(scaleY) ? scaleY : 1\n        }, 1) `;\n    }\n\n    // 3. rotate\n    if (isDefined(rotateZ)) {\n        transforms += `rotateZ(${rotateZ}rad) `;\n    }\n\n    if (isDefined(rotateX)) {\n        transforms += `rotateX(${rotateX}rad) `;\n    }\n\n    if (isDefined(rotateY)) {\n        transforms += `rotateY(${rotateY}rad) `;\n    }\n\n    // add transforms\n    if (transforms.length) {\n        styles += `transform:${transforms};`;\n    }\n\n    // add opacity\n    if (isDefined(opacity)) {\n        styles += `opacity:${opacity};`;\n\n        // if we reach zero, we make the element inaccessible\n        if (opacity === 0) {\n            styles += `visibility:hidden;`;\n        }\n\n        // if we're below 100% opacity this element can't be clicked\n        if (opacity < 1) {\n            styles += `pointer-events:none;`;\n        }\n    }\n\n    // add height\n    if (isDefined(height)) {\n        styles += `height:${height}px;`;\n    }\n\n    // add width\n    if (isDefined(width)) {\n        styles += `width:${width}px;`;\n    }\n\n    // apply styles\n    const elementCurrentStyle = element.elementCurrentStyle || '';\n\n    // if new styles does not match current styles, lets update!\n    if (styles.length !== elementCurrentStyle.length || styles !== elementCurrentStyle) {\n        element.style.cssText = styles;\n        // store current styles so we can compare them to new styles later on\n        // _not_ getting the style value is faster\n        element.elementCurrentStyle = styles;\n    }\n};\n\nconst Mixins = {\n    styles,\n    listeners,\n    animations,\n    apis,\n};\n\nconst updateRect = (rect = {}, element = {}, style = {}) => {\n    if (!element.layoutCalculated) {\n        rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n        rect.marginTop = parseInt(style.marginTop, 10) || 0;\n        rect.marginRight = parseInt(style.marginRight, 10) || 0;\n        rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n        rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n        element.layoutCalculated = true;\n    }\n\n    rect.left = element.offsetLeft || 0;\n    rect.top = element.offsetTop || 0;\n    rect.width = element.offsetWidth || 0;\n    rect.height = element.offsetHeight || 0;\n\n    rect.right = rect.left + rect.width;\n    rect.bottom = rect.top + rect.height;\n\n    rect.scrollTop = element.scrollTop;\n\n    rect.hidden = element.offsetParent === null;\n\n    return rect;\n};\n\nconst createView =\n    // default view definition\n    ({\n        // element definition\n        tag = 'div',\n        name = null,\n        attributes = {},\n\n        // view interaction\n        read = () => {},\n        write = () => {},\n        create = () => {},\n        destroy = () => {},\n\n        // hooks\n        filterFrameActionsForChild = (child, actions) => actions,\n        didCreateView = () => {},\n        didWriteView = () => {},\n\n        // rect related\n        ignoreRect = false,\n        ignoreRectUpdate = false,\n\n        // mixins\n        mixins = [],\n    } = {}) => (\n        // each view requires reference to store\n        store,\n        // specific properties for this view\n        props = {}\n    ) => {\n        // root element should not be changed\n        const element = createElement(tag, `filepond--${name}`, attributes);\n\n        // style reference should also not be changed\n        const style = window.getComputedStyle(element, null);\n\n        // element rectangle\n        const rect = updateRect();\n        let frameRect = null;\n\n        // rest state\n        let isResting = false;\n\n        // pretty self explanatory\n        const childViews = [];\n\n        // loaded mixins\n        const activeMixins = [];\n\n        // references to created children\n        const ref = {};\n\n        // state used for each instance\n        const state = {};\n\n        // list of writers that will be called to update this view\n        const writers = [\n            write, // default writer\n        ];\n\n        const readers = [\n            read, // default reader\n        ];\n\n        const destroyers = [\n            destroy, // default destroy\n        ];\n\n        // core view methods\n        const getElement = () => element;\n        const getChildViews = () => childViews.concat();\n        const getReference = () => ref;\n        const createChildView = store => (view, props) => view(store, props);\n        const getRect = () => {\n            if (frameRect) {\n                return frameRect;\n            }\n            frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n            return frameRect;\n        };\n        const getStyle = () => style;\n\n        /**\n         * Read data from DOM\n         * @private\n         */\n        const _read = () => {\n            frameRect = null;\n\n            // read child views\n            childViews.forEach(child => child._read());\n\n            const shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n            if (shouldUpdate) {\n                updateRect(rect, element, style);\n            }\n\n            // readers\n            const api = { root: internalAPI, props, rect };\n            readers.forEach(reader => reader(api));\n        };\n\n        /**\n         * Write data to DOM\n         * @private\n         */\n        const _write = (ts, frameActions, shouldOptimize) => {\n            // if no actions, we assume that the view is resting\n            let resting = frameActions.length === 0;\n\n            // writers\n            writers.forEach(writer => {\n                const writerResting = writer({\n                    props,\n                    root: internalAPI,\n                    actions: frameActions,\n                    timestamp: ts,\n                    shouldOptimize,\n                });\n                if (writerResting === false) {\n                    resting = false;\n                }\n            });\n\n            // run mixins\n            activeMixins.forEach(mixin => {\n                // if one of the mixins is still busy after write operation, we are not resting\n                const mixinResting = mixin.write(ts);\n                if (mixinResting === false) {\n                    resting = false;\n                }\n            });\n\n            // updates child views that are currently attached to the DOM\n            childViews\n                .filter(child => !!child.element.parentNode)\n                .forEach(child => {\n                    // if a child view is not resting, we are not resting\n                    const childResting = child._write(\n                        ts,\n                        filterFrameActionsForChild(child, frameActions),\n                        shouldOptimize\n                    );\n                    if (!childResting) {\n                        resting = false;\n                    }\n                });\n\n            // append new elements to DOM and update those\n            childViews\n                //.filter(child => !child.element.parentNode)\n                .forEach((child, index) => {\n                    // skip\n                    if (child.element.parentNode) {\n                        return;\n                    }\n\n                    // append to DOM\n                    internalAPI.appendChild(child.element, index);\n\n                    // call read (need to know the size of these elements)\n                    child._read();\n\n                    // re-call write\n                    child._write(\n                        ts,\n                        filterFrameActionsForChild(child, frameActions),\n                        shouldOptimize\n                    );\n\n                    // we just added somthing to the dom, no rest\n                    resting = false;\n                });\n\n            // update resting state\n            isResting = resting;\n\n            didWriteView({\n                props,\n                root: internalAPI,\n                actions: frameActions,\n                timestamp: ts,\n            });\n\n            // let parent know if we are resting\n            return resting;\n        };\n\n        const _destroy = () => {\n            activeMixins.forEach(mixin => mixin.destroy());\n            destroyers.forEach(destroyer => {\n                destroyer({ root: internalAPI, props });\n            });\n            childViews.forEach(child => child._destroy());\n        };\n\n        // sharedAPI\n        const sharedAPIDefinition = {\n            element: {\n                get: getElement,\n            },\n            style: {\n                get: getStyle,\n            },\n            childViews: {\n                get: getChildViews,\n            },\n        };\n\n        // private API definition\n        const internalAPIDefinition = {\n            ...sharedAPIDefinition,\n            rect: {\n                get: getRect,\n            },\n\n            // access to custom children references\n            ref: {\n                get: getReference,\n            },\n\n            // dom modifiers\n            is: needle => name === needle,\n            appendChild: appendChild(element),\n            createChildView: createChildView(store),\n            linkView: view => {\n                childViews.push(view);\n                return view;\n            },\n            unlinkView: view => {\n                childViews.splice(childViews.indexOf(view), 1);\n            },\n            appendChildView: appendChildView(element, childViews),\n            removeChildView: removeChildView(element, childViews),\n            registerWriter: writer => writers.push(writer),\n            registerReader: reader => readers.push(reader),\n            registerDestroyer: destroyer => destroyers.push(destroyer),\n            invalidateLayout: () => (element.layoutCalculated = false),\n\n            // access to data store\n            dispatch: store.dispatch,\n            query: store.query,\n        };\n\n        // public view API methods\n        const externalAPIDefinition = {\n            element: {\n                get: getElement,\n            },\n            childViews: {\n                get: getChildViews,\n            },\n            rect: {\n                get: getRect,\n            },\n            resting: {\n                get: () => isResting,\n            },\n            isRectIgnored: () => ignoreRect,\n            _read,\n            _write,\n            _destroy,\n        };\n\n        // mixin API methods\n        const mixinAPIDefinition = {\n            ...sharedAPIDefinition,\n            rect: {\n                get: () => rect,\n            },\n        };\n\n        // add mixin functionality\n        Object.keys(mixins)\n            .sort((a, b) => {\n                // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n                if (a === 'styles') {\n                    return 1;\n                } else if (b === 'styles') {\n                    return -1;\n                }\n                return 0;\n            })\n            .forEach(key => {\n                const mixinAPI = Mixins[key]({\n                    mixinConfig: mixins[key],\n                    viewProps: props,\n                    viewState: state,\n                    viewInternalAPI: internalAPIDefinition,\n                    viewExternalAPI: externalAPIDefinition,\n                    view: createObject(mixinAPIDefinition),\n                });\n\n                if (mixinAPI) {\n                    activeMixins.push(mixinAPI);\n                }\n            });\n\n        // construct private api\n        const internalAPI = createObject(internalAPIDefinition);\n\n        // create the view\n        create({\n            root: internalAPI,\n            props,\n        });\n\n        // append created child views to root node\n        const childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n        childViews.forEach((child, index) => {\n            internalAPI.appendChild(child.element, childCount + index);\n        });\n\n        // call did create\n        didCreateView(internalAPI);\n\n        // expose public api\n        return createObject(externalAPIDefinition);\n    };\n\nconst createPainter = (read, write, fps = 60) => {\n    const name = '__framePainter';\n\n    // set global painter\n    if (window[name]) {\n        window[name].readers.push(read);\n        window[name].writers.push(write);\n        return;\n    }\n\n    window[name] = {\n        readers: [read],\n        writers: [write],\n    };\n\n    const painter = window[name];\n\n    const interval = 1000 / fps;\n    let last = null;\n    let id = null;\n    let requestTick = null;\n    let cancelTick = null;\n\n    const setTimerType = () => {\n        if (document.hidden) {\n            requestTick = () => window.setTimeout(() => tick(performance.now()), interval);\n            cancelTick = () => window.clearTimeout(id);\n        } else {\n            requestTick = () => window.requestAnimationFrame(tick);\n            cancelTick = () => window.cancelAnimationFrame(id);\n        }\n    };\n\n    document.addEventListener('visibilitychange', () => {\n        if (cancelTick) cancelTick();\n        setTimerType();\n        tick(performance.now());\n    });\n\n    const tick = ts => {\n        // queue next tick\n        id = requestTick(tick);\n\n        // limit fps\n        if (!last) {\n            last = ts;\n        }\n\n        const delta = ts - last;\n\n        if (delta <= interval) {\n            // skip frame\n            return;\n        }\n\n        // align next frame\n        last = ts - (delta % interval);\n\n        // update view\n        painter.readers.forEach(read => read());\n        painter.writers.forEach(write => write(ts));\n    };\n\n    setTimerType();\n    tick(performance.now());\n\n    return {\n        pause: () => {\n            cancelTick(id);\n        },\n    };\n};\n\nconst createRoute = (routes, fn) => ({ root, props, actions = [], timestamp, shouldOptimize }) => {\n    actions\n        .filter(action => routes[action.type])\n        .forEach(action =>\n            routes[action.type]({ root, props, action: action.data, timestamp, shouldOptimize })\n        );\n    if (fn) {\n        fn({ root, props, actions, timestamp, shouldOptimize });\n    }\n};\n\nconst insertBefore = (newNode, referenceNode) =>\n    referenceNode.parentNode.insertBefore(newNode, referenceNode);\n\nconst insertAfter = (newNode, referenceNode) => {\n    return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n};\n\nconst isArray = value => Array.isArray(value);\n\nconst isEmpty = value => value == null;\n\nconst trim = str => str.trim();\n\nconst toString = value => '' + value;\n\nconst toArray = (value, splitter = ',') => {\n    if (isEmpty(value)) {\n        return [];\n    }\n    if (isArray(value)) {\n        return value;\n    }\n    return toString(value)\n        .split(splitter)\n        .map(trim)\n        .filter(str => str.length);\n};\n\nconst isBoolean = value => typeof value === 'boolean';\n\nconst toBoolean = value => (isBoolean(value) ? value : value === 'true');\n\nconst isString = value => typeof value === 'string';\n\nconst toNumber = value =>\n    isNumber(value) ? value : isString(value) ? toString(value).replace(/[a-z]+/gi, '') : 0;\n\nconst toInt = value => parseInt(toNumber(value), 10);\n\nconst toFloat = value => parseFloat(toNumber(value));\n\nconst isInt = value => isNumber(value) && isFinite(value) && Math.floor(value) === value;\n\nconst toBytes = (value, base = 1000) => {\n    // is in bytes\n    if (isInt(value)) {\n        return value;\n    }\n\n    // is natural file size\n    let naturalFileSize = toString(value).trim();\n\n    // if is value in megabytes\n    if (/MB$/i.test(naturalFileSize)) {\n        naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n        return toInt(naturalFileSize) * base * base;\n    }\n\n    // if is value in kilobytes\n    if (/KB/i.test(naturalFileSize)) {\n        naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n        return toInt(naturalFileSize) * base;\n    }\n\n    return toInt(naturalFileSize);\n};\n\nconst isFunction = value => typeof value === 'function';\n\nconst toFunctionReference = string => {\n    let ref = self;\n    let levels = string.split('.');\n    let level = null;\n    while ((level = levels.shift())) {\n        ref = ref[level];\n        if (!ref) {\n            return null;\n        }\n    }\n    return ref;\n};\n\nconst methods = {\n    process: 'POST',\n    patch: 'PATCH',\n    revert: 'DELETE',\n    fetch: 'GET',\n    restore: 'GET',\n    load: 'GET',\n};\n\nconst createServerAPI = outline => {\n    const api = {};\n\n    api.url = isString(outline) ? outline : outline.url || '';\n    api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n    api.headers = outline.headers ? outline.headers : {};\n\n    forin(methods, key => {\n        api[key] = createAction(key, outline[key], methods[key], api.timeout, api.headers);\n    });\n\n    // remove process if no url or process on outline\n    api.process = outline.process || isString(outline) || outline.url ? api.process : null;\n\n    // special treatment for remove\n    api.remove = outline.remove || null;\n\n    // remove generic headers from api object\n    delete api.headers;\n\n    return api;\n};\n\nconst createAction = (name, outline, method, timeout, headers) => {\n    // is explicitely set to null so disable\n    if (outline === null) {\n        return null;\n    }\n\n    // if is custom function, done! Dev handles everything.\n    if (typeof outline === 'function') {\n        return outline;\n    }\n\n    // build action object\n    const action = {\n        url: method === 'GET' || method === 'PATCH' ? `?${name}=` : '',\n        method,\n        headers,\n        withCredentials: false,\n        timeout,\n        onload: null,\n        ondata: null,\n        onerror: null,\n    };\n\n    // is a single url\n    if (isString(outline)) {\n        action.url = outline;\n        return action;\n    }\n\n    // overwrite\n    Object.assign(action, outline);\n\n    // see if should reformat headers;\n    if (isString(action.headers)) {\n        const parts = action.headers.split(/:(.+)/);\n        action.headers = {\n            header: parts[0],\n            value: parts[1],\n        };\n    }\n\n    // if is bool withCredentials\n    action.withCredentials = toBoolean(action.withCredentials);\n\n    return action;\n};\n\nconst toServerAPI = value => createServerAPI(value);\n\nconst isNull = value => value === null;\n\nconst isObject = value => typeof value === 'object' && value !== null;\n\nconst isAPI = value => {\n    return (\n        isObject(value) &&\n        isString(value.url) &&\n        isObject(value.process) &&\n        isObject(value.revert) &&\n        isObject(value.restore) &&\n        isObject(value.fetch)\n    );\n};\n\nconst getType = value => {\n    if (isArray(value)) {\n        return 'array';\n    }\n\n    if (isNull(value)) {\n        return 'null';\n    }\n\n    if (isInt(value)) {\n        return 'int';\n    }\n\n    if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n        return 'bytes';\n    }\n\n    if (isAPI(value)) {\n        return 'api';\n    }\n\n    return typeof value;\n};\n\nconst replaceSingleQuotes = str =>\n    str\n        .replace(/{\\s*'/g, '{\"')\n        .replace(/'\\s*}/g, '\"}')\n        .replace(/'\\s*:/g, '\":')\n        .replace(/:\\s*'/g, ':\"')\n        .replace(/,\\s*'/g, ',\"')\n        .replace(/'\\s*,/g, '\",');\n\nconst conversionTable = {\n    array: toArray,\n    boolean: toBoolean,\n    int: value => (getType(value) === 'bytes' ? toBytes(value) : toInt(value)),\n    number: toFloat,\n    float: toFloat,\n    bytes: toBytes,\n    string: value => (isFunction(value) ? value : toString(value)),\n    function: value => toFunctionReference(value),\n    serverapi: toServerAPI,\n    object: value => {\n        try {\n            return JSON.parse(replaceSingleQuotes(value));\n        } catch (e) {\n            return null;\n        }\n    },\n};\n\nconst convertTo = (value, type) => conversionTable[type](value);\n\nconst getValueByType = (newValue, defaultValue, valueType) => {\n    // can always assign default value\n    if (newValue === defaultValue) {\n        return newValue;\n    }\n\n    // get the type of the new value\n    let newValueType = getType(newValue);\n\n    // is valid type?\n    if (newValueType !== valueType) {\n        // is string input, let's attempt to convert\n        const convertedValue = convertTo(newValue, valueType);\n\n        // what is the type now\n        newValueType = getType(convertedValue);\n\n        // no valid conversions found\n        if (convertedValue === null) {\n            throw `Trying to assign value with incorrect type to \"${option}\", allowed type: \"${valueType}\"`;\n        } else {\n            newValue = convertedValue;\n        }\n    }\n\n    // assign new value\n    return newValue;\n};\n\nconst createOption = (defaultValue, valueType) => {\n    let currentValue = defaultValue;\n    return {\n        enumerable: true,\n        get: () => currentValue,\n        set: newValue => {\n            currentValue = getValueByType(newValue, defaultValue, valueType);\n        },\n    };\n};\n\nconst createOptions = options => {\n    const obj = {};\n    forin(options, prop => {\n        const optionDefinition = options[prop];\n        obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n    });\n    return createObject(obj);\n};\n\nconst createInitialState = options => ({\n    // model\n    items: [],\n\n    // timeout used for calling update items\n    listUpdateTimeout: null,\n\n    // timeout used for stacking metadata updates\n    itemUpdateTimeout: null,\n\n    // queue of items waiting to be processed\n    processingQueue: [],\n\n    // options\n    options: createOptions(options),\n});\n\nconst fromCamels = (string, separator = '-') =>\n    string\n        .split(/(?=[A-Z])/)\n        .map(part => part.toLowerCase())\n        .join(separator);\n\nconst createOptionAPI = (store, options) => {\n    const obj = {};\n    forin(options, key => {\n        obj[key] = {\n            get: () => store.getState().options[key],\n            set: value => {\n                store.dispatch(`SET_${fromCamels(key, '_').toUpperCase()}`, {\n                    value,\n                });\n            },\n        };\n    });\n    return obj;\n};\n\nconst createOptionActions = options => (dispatch, query, state) => {\n    const obj = {};\n    forin(options, key => {\n        const name = fromCamels(key, '_').toUpperCase();\n\n        obj[`SET_${name}`] = action => {\n            try {\n                state.options[key] = action.value;\n            } catch (e) {\n                // nope, failed\n            }\n\n            // we successfully set the value of this option\n            dispatch(`DID_SET_${name}`, { value: state.options[key] });\n        };\n    });\n    return obj;\n};\n\nconst createOptionQueries = options => state => {\n    const obj = {};\n    forin(options, key => {\n        obj[`GET_${fromCamels(key, '_').toUpperCase()}`] = action => state.options[key];\n    });\n    return obj;\n};\n\nconst InteractionMethod = {\n    API: 1,\n    DROP: 2,\n    BROWSE: 3,\n    PASTE: 4,\n    NONE: 5,\n};\n\nconst getUniqueId = () =>\n    Math.random()\n        .toString(36)\n        .substring(2, 11);\n\nconst arrayRemove = (arr, index) => arr.splice(index, 1);\n\nconst run = (cb, sync) => {\n    if (sync) {\n        cb();\n    } else if (document.hidden) {\n        Promise.resolve(1).then(cb);\n    } else {\n        setTimeout(cb, 0);\n    }\n};\n\nconst on = () => {\n    const listeners = [];\n    const off = (event, cb) => {\n        arrayRemove(\n            listeners,\n            listeners.findIndex(listener => listener.event === event && (listener.cb === cb || !cb))\n        );\n    };\n    const fire = (event, args, sync) => {\n        listeners\n            .filter(listener => listener.event === event)\n            .map(listener => listener.cb)\n            .forEach(cb => run(() => cb(...args), sync));\n    };\n    return {\n        fireSync: (event, ...args) => {\n            fire(event, args, true);\n        },\n        fire: (event, ...args) => {\n            fire(event, args, false);\n        },\n        on: (event, cb) => {\n            listeners.push({ event, cb });\n        },\n        onOnce: (event, cb) => {\n            listeners.push({\n                event,\n                cb: (...args) => {\n                    off(event, cb);\n                    cb(...args);\n                },\n            });\n        },\n        off,\n    };\n};\n\nconst copyObjectPropertiesToObject = (src, target, excluded) => {\n    Object.getOwnPropertyNames(src)\n        .filter(property => !excluded.includes(property))\n        .forEach(key =>\n            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(src, key))\n        );\n};\n\nconst PRIVATE = [\n    'fire',\n    'process',\n    'revert',\n    'load',\n    'on',\n    'off',\n    'onOnce',\n    'retryLoad',\n    'extend',\n    'archive',\n    'archived',\n    'release',\n    'released',\n    'requestProcessing',\n    'freeze',\n];\n\nconst createItemAPI = item => {\n    const api = {};\n    copyObjectPropertiesToObject(item, api, PRIVATE);\n    return api;\n};\n\nconst removeReleasedItems = items => {\n    items.forEach((item, index) => {\n        if (item.released) {\n            arrayRemove(items, index);\n        }\n    });\n};\n\nconst ItemStatus = {\n    INIT: 1,\n    IDLE: 2,\n    PROCESSING_QUEUED: 9,\n    PROCESSING: 3,\n    PROCESSING_COMPLETE: 5,\n    PROCESSING_ERROR: 6,\n    PROCESSING_REVERT_ERROR: 10,\n    LOADING: 7,\n    LOAD_ERROR: 8,\n};\n\nconst FileOrigin = {\n    INPUT: 1,\n    LIMBO: 2,\n    LOCAL: 3,\n};\n\nconst getNonNumeric = str => /[^0-9]+/.exec(str);\n\nconst getDecimalSeparator = () => getNonNumeric((1.1).toLocaleString())[0];\n\nconst getThousandsSeparator = () => {\n    // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n    // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n    const decimalSeparator = getDecimalSeparator();\n    const thousandsStringWithSeparator = (1000.0).toLocaleString();\n    const thousandsStringWithoutSeparator = (1000.0).toString();\n    if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n        return getNonNumeric(thousandsStringWithSeparator)[0];\n    }\n    return decimalSeparator === '.' ? ',' : '.';\n};\n\nconst Type = {\n    BOOLEAN: 'boolean',\n    INT: 'int',\n    NUMBER: 'number',\n    STRING: 'string',\n    ARRAY: 'array',\n    OBJECT: 'object',\n    FUNCTION: 'function',\n    ACTION: 'action',\n    SERVER_API: 'serverapi',\n    REGEX: 'regex',\n};\n\n// all registered filters\nconst filters = [];\n\n// loops over matching filters and passes options to each filter, returning the mapped results\nconst applyFilterChain = (key, value, utils) =>\n    new Promise((resolve, reject) => {\n        // find matching filters for this key\n        const matchingFilters = filters.filter(f => f.key === key).map(f => f.cb);\n\n        // resolve now\n        if (matchingFilters.length === 0) {\n            resolve(value);\n            return;\n        }\n\n        // first filter to kick things of\n        const initialFilter = matchingFilters.shift();\n\n        // chain filters\n        matchingFilters\n            .reduce(\n                // loop over promises passing value to next promise\n                (current, next) => current.then(value => next(value, utils)),\n\n                // call initial filter, will return a promise\n                initialFilter(value, utils)\n\n                // all executed\n            )\n            .then(value => resolve(value))\n            .catch(error => reject(error));\n    });\n\nconst applyFilters = (key, value, utils) =>\n    filters.filter(f => f.key === key).map(f => f.cb(value, utils));\n\n// adds a new filter to the list\nconst addFilter = (key, cb) => filters.push({ key, cb });\n\nconst extendDefaultOptions = additionalOptions => Object.assign(defaultOptions, additionalOptions);\n\nconst getOptions = () => ({ ...defaultOptions });\n\nconst setOptions = opts => {\n    forin(opts, (key, value) => {\n        // key does not exist, so this option cannot be set\n        if (!defaultOptions[key]) {\n            return;\n        }\n        defaultOptions[key][0] = getValueByType(\n            value,\n            defaultOptions[key][0],\n            defaultOptions[key][1]\n        );\n    });\n};\n\n// default options on app\nconst defaultOptions = {\n    // the id to add to the root element\n    id: [null, Type.STRING],\n\n    // input field name to use\n    name: ['filepond', Type.STRING],\n\n    // disable the field\n    disabled: [false, Type.BOOLEAN],\n\n    // classname to put on wrapper\n    className: [null, Type.STRING],\n\n    // is the field required\n    required: [false, Type.BOOLEAN],\n\n    // Allow media capture when value is set\n    captureMethod: [null, Type.STRING],\n    // - \"camera\", \"microphone\" or \"camcorder\",\n    // - Does not work with multiple on apple devices\n    // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n    // sync `acceptedFileTypes` property with `accept` attribute\n    allowSyncAcceptAttribute: [true, Type.BOOLEAN],\n\n    // Feature toggles\n    allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n    allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n    allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n    allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n    allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n    allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n    allowRemove: [true, Type.BOOLEAN], // Allow user to remove a file\n    allowProcess: [true, Type.BOOLEAN], // Allows user to process a file, when set to false, this removes the file upload button\n    allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n    allowDirectoriesOnly: [false, Type.BOOLEAN], // Allow only selecting directories with browse (no support for filtering dnd at this point)\n\n    // Try store file if `server` not set\n    storeAsFile: [false, Type.BOOLEAN],\n\n    // Revert mode\n    forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n    // Input requirements\n    maxFiles: [null, Type.INT], // Max number of files\n    checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n    // Where to put file\n    itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n    itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n    itemInsertInterval: [75, Type.INT],\n\n    // Drag 'n Drop related\n    dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n    dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n    dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n    ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n    // Upload related\n    instantUpload: [true, Type.BOOLEAN], // Should upload files immediately on drop\n    maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n    allowMinimumUploadDuration: [true, Type.BOOLEAN], // if true uploads take at least 750 ms, this ensures the user sees the upload progress giving trust the upload actually happened\n\n    // Chunks\n    chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n    chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n    chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n    chunkRetryDelays: [[500, 1000, 3000], Type.ARRAY], // Amount of times to retry upload of a chunk when it fails\n\n    // The server api end points to use for uploading (see docs)\n    server: [null, Type.SERVER_API],\n\n    // File size calculations, can set to 1024, this is only used for display, properties use file size base 1000\n    fileSizeBase: [1000, Type.INT],\n\n    // Labels and status messages\n    labelFileSizeBytes: ['bytes', Type.STRING],\n    labelFileSizeKilobytes: ['KB', Type.STRING],\n    labelFileSizeMegabytes: ['MB', Type.STRING],\n    labelFileSizeGigabytes: ['GB', Type.STRING],\n\n    labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n    labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n    labelIdle: [\n        'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n        Type.STRING,\n    ],\n    labelInvalidField: ['Field contains invalid files', Type.STRING],\n    labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n    labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n    labelFileCountSingular: ['file in list', Type.STRING],\n    labelFileCountPlural: ['files in list', Type.STRING],\n    labelFileLoading: ['Loading', Type.STRING],\n    labelFileAdded: ['Added', Type.STRING], // assistive only\n    labelFileLoadError: ['Error during load', Type.STRING],\n    labelFileRemoved: ['Removed', Type.STRING], // assistive only\n    labelFileRemoveError: ['Error during remove', Type.STRING],\n    labelFileProcessing: ['Uploading', Type.STRING],\n    labelFileProcessingComplete: ['Upload complete', Type.STRING],\n    labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n    labelFileProcessingError: ['Error during upload', Type.STRING],\n    labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n    labelTapToCancel: ['tap to cancel', Type.STRING],\n    labelTapToRetry: ['tap to retry', Type.STRING],\n    labelTapToUndo: ['tap to undo', Type.STRING],\n\n    labelButtonRemoveItem: ['Remove', Type.STRING],\n    labelButtonAbortItemLoad: ['Abort', Type.STRING],\n    labelButtonRetryItemLoad: ['Retry', Type.STRING],\n    labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n    labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n    labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n    labelButtonProcessItem: ['Upload', Type.STRING],\n\n    // make sure width and height plus viewpox are even numbers so icons are nicely centered\n    iconRemove: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n        Type.STRING,\n    ],\n    iconProcess: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n        Type.STRING,\n    ],\n    iconRetry: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n        Type.STRING,\n    ],\n    iconUndo: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n        Type.STRING,\n    ],\n    iconDone: [\n        '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n        Type.STRING,\n    ],\n\n    // event handlers\n    oninit: [null, Type.FUNCTION],\n    onwarning: [null, Type.FUNCTION],\n    onerror: [null, Type.FUNCTION],\n    onactivatefile: [null, Type.FUNCTION],\n    oninitfile: [null, Type.FUNCTION],\n    onaddfilestart: [null, Type.FUNCTION],\n    onaddfileprogress: [null, Type.FUNCTION],\n    onaddfile: [null, Type.FUNCTION],\n    onprocessfilestart: [null, Type.FUNCTION],\n    onprocessfileprogress: [null, Type.FUNCTION],\n    onprocessfileabort: [null, Type.FUNCTION],\n    onprocessfilerevert: [null, Type.FUNCTION],\n    onprocessfile: [null, Type.FUNCTION],\n    onprocessfiles: [null, Type.FUNCTION],\n    onremovefile: [null, Type.FUNCTION],\n    onpreparefile: [null, Type.FUNCTION],\n    onupdatefiles: [null, Type.FUNCTION],\n    onreorderfiles: [null, Type.FUNCTION],\n\n    // hooks\n    beforeDropFile: [null, Type.FUNCTION],\n    beforeAddFile: [null, Type.FUNCTION],\n    beforeRemoveFile: [null, Type.FUNCTION],\n    beforePrepareFile: [null, Type.FUNCTION],\n\n    // styles\n    stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n    stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n    styleItemPanelAspectRatio: [null, Type.STRING],\n    styleButtonRemoveItemPosition: ['left', Type.STRING],\n    styleButtonProcessItemPosition: ['right', Type.STRING],\n    styleLoadIndicatorPosition: ['right', Type.STRING],\n    styleProgressIndicatorPosition: ['right', Type.STRING],\n    styleButtonRemoveItemAlign: [false, Type.BOOLEAN],\n\n    // custom initial files array\n    files: [[], Type.ARRAY],\n\n    // show support by displaying credits\n    credits: [['https://pqina.nl/', 'Powered by PQINA'], Type.ARRAY],\n};\n\nconst getItemByQuery = (items, query) => {\n    // just return first index\n    if (isEmpty(query)) {\n        return items[0] || null;\n    }\n\n    // query is index\n    if (isInt(query)) {\n        return items[query] || null;\n    }\n\n    // if query is item, get the id\n    if (typeof query === 'object') {\n        query = query.id;\n    }\n\n    // assume query is a string and return item by id\n    return items.find(item => item.id === query) || null;\n};\n\nconst getNumericAspectRatioFromString = aspectRatio => {\n    if (isEmpty(aspectRatio)) {\n        return aspectRatio;\n    }\n    if (/:/.test(aspectRatio)) {\n        const parts = aspectRatio.split(':');\n        return parts[1] / parts[0];\n    }\n    return parseFloat(aspectRatio);\n};\n\nconst getActiveItems = items => items.filter(item => !item.archived);\n\nconst Status = {\n    EMPTY: 0,\n    IDLE: 1, // waiting\n    ERROR: 2, // a file is in error state\n    BUSY: 3, // busy processing or loading\n    READY: 4, // all files uploaded\n};\n\nlet res = null;\nconst canUpdateFileInput = () => {\n    if (res === null) {\n        try {\n            const dataTransfer = new DataTransfer();\n            dataTransfer.items.add(new File(['hello world'], 'This_Works.txt'));\n            const el = document.createElement('input');\n            el.setAttribute('type', 'file');\n            el.files = dataTransfer.files;\n            res = el.files.length === 1;\n        } catch (err) {\n            res = false;\n        }\n    }\n    return res;\n};\n\nconst ITEM_ERROR = [\n    ItemStatus.LOAD_ERROR,\n    ItemStatus.PROCESSING_ERROR,\n    ItemStatus.PROCESSING_REVERT_ERROR,\n];\nconst ITEM_BUSY = [\n    ItemStatus.LOADING,\n    ItemStatus.PROCESSING,\n    ItemStatus.PROCESSING_QUEUED,\n    ItemStatus.INIT,\n];\nconst ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\nconst isItemInErrorState = item => ITEM_ERROR.includes(item.status);\nconst isItemInBusyState = item => ITEM_BUSY.includes(item.status);\nconst isItemInReadyState = item => ITEM_READY.includes(item.status);\n\nconst isAsync = state =>\n    isObject(state.options.server) &&\n    (isObject(state.options.server.process) || isFunction(state.options.server.process));\n\nconst queries = state => ({\n    GET_STATUS: () => {\n        const items = getActiveItems(state.items);\n\n        const { EMPTY, ERROR, BUSY, IDLE, READY } = Status;\n\n        if (items.length === 0) return EMPTY;\n\n        if (items.some(isItemInErrorState)) return ERROR;\n\n        if (items.some(isItemInBusyState)) return BUSY;\n\n        if (items.some(isItemInReadyState)) return READY;\n\n        return IDLE;\n    },\n\n    GET_ITEM: query => getItemByQuery(state.items, query),\n\n    GET_ACTIVE_ITEM: query => getItemByQuery(getActiveItems(state.items), query),\n\n    GET_ACTIVE_ITEMS: () => getActiveItems(state.items),\n\n    GET_ITEMS: () => state.items,\n\n    GET_ITEM_NAME: query => {\n        const item = getItemByQuery(state.items, query);\n        return item ? item.filename : null;\n    },\n\n    GET_ITEM_SIZE: query => {\n        const item = getItemByQuery(state.items, query);\n        return item ? item.fileSize : null;\n    },\n\n    GET_STYLES: () =>\n        Object.keys(state.options)\n            .filter(key => /^style/.test(key))\n            .map(option => ({\n                name: option,\n                value: state.options[option],\n            })),\n\n    GET_PANEL_ASPECT_RATIO: () => {\n        const isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n        const aspectRatio = isShapeCircle\n            ? 1\n            : getNumericAspectRatioFromString(state.options.stylePanelAspectRatio);\n        return aspectRatio;\n    },\n\n    GET_ITEM_PANEL_ASPECT_RATIO: () => state.options.styleItemPanelAspectRatio,\n\n    GET_ITEMS_BY_STATUS: status =>\n        getActiveItems(state.items).filter(item => item.status === status),\n\n    GET_TOTAL_ITEMS: () => getActiveItems(state.items).length,\n\n    SHOULD_UPDATE_FILE_INPUT: () =>\n        state.options.storeAsFile && canUpdateFileInput() && !isAsync(state),\n\n    IS_ASYNC: () => isAsync(state),\n\n    GET_FILE_SIZE_LABELS: query => ({\n        labelBytes: query('GET_LABEL_FILE_SIZE_BYTES') || undefined,\n        labelKilobytes: query('GET_LABEL_FILE_SIZE_KILOBYTES') || undefined,\n        labelMegabytes: query('GET_LABEL_FILE_SIZE_MEGABYTES') || undefined,\n        labelGigabytes: query('GET_LABEL_FILE_SIZE_GIGABYTES') || undefined,\n    }),\n});\n\nconst hasRoomForItem = state => {\n    const count = getActiveItems(state.items).length;\n\n    // if cannot have multiple items, to add one item it should currently not contain items\n    if (!state.options.allowMultiple) {\n        return count === 0;\n    }\n\n    // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n    const maxFileCount = state.options.maxFiles;\n    if (maxFileCount === null) {\n        return true;\n    }\n\n    // we check if the current count is smaller than the max count, if so, another file can still be added\n    if (count < maxFileCount) {\n        return true;\n    }\n\n    // no more room for another file\n    return false;\n};\n\nconst limit = (value, min, max) => Math.max(Math.min(max, value), min);\n\nconst arrayInsert = (arr, index, item) => arr.splice(index, 0, item);\n\nconst insertItem = (items, item, index) => {\n    if (isEmpty(item)) {\n        return null;\n    }\n\n    // if index is undefined, append\n    if (typeof index === 'undefined') {\n        items.push(item);\n        return item;\n    }\n\n    // limit the index to the size of the items array\n    index = limit(index, 0, items.length);\n\n    // add item to array\n    arrayInsert(items, index, item);\n\n    // expose\n    return item;\n};\n\nconst isBase64DataURI = str =>\n    /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n        str\n    );\n\nconst getFilenameFromURL = url =>\n    `${url}`\n        .split('/')\n        .pop()\n        .split('?')\n        .shift();\n\nconst getExtensionFromFilename = name => name.split('.').pop();\n\nconst guesstimateExtension = type => {\n    // if no extension supplied, exit here\n    if (typeof type !== 'string') {\n        return '';\n    }\n\n    // get subtype\n    const subtype = type.split('/').pop();\n\n    // is svg subtype\n    if (/svg/.test(subtype)) {\n        return 'svg';\n    }\n\n    if (/zip|compressed/.test(subtype)) {\n        return 'zip';\n    }\n\n    if (/plain/.test(subtype)) {\n        return 'txt';\n    }\n\n    if (/msword/.test(subtype)) {\n        return 'doc';\n    }\n\n    // if is valid subtype\n    if (/[a-z]+/.test(subtype)) {\n        // always use jpg extension\n        if (subtype === 'jpeg') {\n            return 'jpg';\n        }\n\n        // return subtype\n        return subtype;\n    }\n\n    return '';\n};\n\nconst leftPad = (value, padding = '') => (padding + value).slice(-padding.length);\n\nconst getDateString = (date = new Date()) =>\n    `${date.getFullYear()}-${leftPad(date.getMonth() + 1, '00')}-${leftPad(\n        date.getDate(),\n        '00'\n    )}_${leftPad(date.getHours(), '00')}-${leftPad(date.getMinutes(), '00')}-${leftPad(\n        date.getSeconds(),\n        '00'\n    )}`;\n\nconst getFileFromBlob = (blob, filename, type = null, extension = null) => {\n    const file =\n        typeof type === 'string'\n            ? blob.slice(0, blob.size, type)\n            : blob.slice(0, blob.size, blob.type);\n    file.lastModifiedDate = new Date();\n\n    // copy relative path\n    if (blob._relativePath) file._relativePath = blob._relativePath;\n\n    // if blob has name property, use as filename if no filename supplied\n    if (!isString(filename)) {\n        filename = getDateString();\n    }\n\n    // if filename supplied but no extension and filename has extension\n    if (filename && extension === null && getExtensionFromFilename(filename)) {\n        file.name = filename;\n    } else {\n        extension = extension || guesstimateExtension(file.type);\n        file.name = filename + (extension ? '.' + extension : '');\n    }\n\n    return file;\n};\n\nconst getBlobBuilder = () => {\n    return (window.BlobBuilder =\n        window.BlobBuilder ||\n        window.WebKitBlobBuilder ||\n        window.MozBlobBuilder ||\n        window.MSBlobBuilder);\n};\n\nconst createBlob = (arrayBuffer, mimeType) => {\n    const BB = getBlobBuilder();\n\n    if (BB) {\n        const bb = new BB();\n        bb.append(arrayBuffer);\n        return bb.getBlob(mimeType);\n    }\n\n    return new Blob([arrayBuffer], {\n        type: mimeType,\n    });\n};\n\nconst getBlobFromByteStringWithMimeType = (byteString, mimeType) => {\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n\n    return createBlob(ab, mimeType);\n};\n\nconst getMimeTypeFromBase64DataURI = dataURI => {\n    return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n};\n\nconst getBase64DataFromBase64DataURI = dataURI => {\n    // get data part of string (remove data:image/jpeg...,)\n    const data = dataURI.split(',')[1];\n\n    // remove any whitespace as that causes InvalidCharacterError in IE\n    return data.replace(/\\s/g, '');\n};\n\nconst getByteStringFromBase64DataURI = dataURI => {\n    return atob(getBase64DataFromBase64DataURI(dataURI));\n};\n\nconst getBlobFromBase64DataURI = dataURI => {\n    const mimeType = getMimeTypeFromBase64DataURI(dataURI);\n    const byteString = getByteStringFromBase64DataURI(dataURI);\n\n    return getBlobFromByteStringWithMimeType(byteString, mimeType);\n};\n\nconst getFileFromBase64DataURI = (dataURI, filename, extension) => {\n    return getFileFromBlob(getBlobFromBase64DataURI(dataURI), filename, null, extension);\n};\n\nconst getFileNameFromHeader = header => {\n    // test if is content disposition header, if not exit\n    if (!/^content-disposition:/i.test(header)) return null;\n\n    // get filename parts\n    const matches = header\n        .split(/filename=|filename\\*=.+''/)\n        .splice(1)\n        .map(name => name.trim().replace(/^[\"']|[;\"']{0,2}$/g, ''))\n        .filter(name => name.length);\n\n    return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n};\n\nconst getFileSizeFromHeader = header => {\n    if (/content-length:/i.test(header)) {\n        const size = header.match(/[0-9]+/)[0];\n        return size ? parseInt(size, 10) : null;\n    }\n    return null;\n};\n\nconst getTranfserIdFromHeader = header => {\n    if (/x-content-transfer-id:/i.test(header)) {\n        const id = (header.split(':')[1] || '').trim();\n        return id || null;\n    }\n    return null;\n};\n\nconst getFileInfoFromHeaders = headers => {\n    const info = {\n        source: null,\n        name: null,\n        size: null,\n    };\n\n    const rows = headers.split('\\n');\n    for (let header of rows) {\n        const name = getFileNameFromHeader(header);\n        if (name) {\n            info.name = name;\n            continue;\n        }\n\n        const size = getFileSizeFromHeader(header);\n        if (size) {\n            info.size = size;\n            continue;\n        }\n\n        const source = getTranfserIdFromHeader(header);\n        if (source) {\n            info.source = source;\n            continue;\n        }\n    }\n\n    return info;\n};\n\nconst createFileLoader = fetchFn => {\n    const state = {\n        source: null,\n        complete: false,\n        progress: 0,\n        size: null,\n        timestamp: null,\n        duration: 0,\n        request: null,\n    };\n\n    const getProgress = () => state.progress;\n    const abort = () => {\n        if (state.request && state.request.abort) {\n            state.request.abort();\n        }\n    };\n\n    // load source\n    const load = () => {\n        // get quick reference\n        const source = state.source;\n\n        api.fire('init', source);\n\n        // Load Files\n        if (source instanceof File) {\n            api.fire('load', source);\n        } else if (source instanceof Blob) {\n            // Load blobs, set default name to current date\n            api.fire('load', getFileFromBlob(source, source.name));\n        } else if (isBase64DataURI(source)) {\n            // Load base 64, set default name to current date\n            api.fire('load', getFileFromBase64DataURI(source));\n        } else {\n            // Deal as if is external URL, let's load it!\n            loadURL(source);\n        }\n    };\n\n    // loads a url\n    const loadURL = url => {\n        // is remote url and no fetch method supplied\n        if (!fetchFn) {\n            api.fire('error', {\n                type: 'error',\n                body: \"Can't load URL\",\n                code: 400,\n            });\n            return;\n        }\n\n        // set request start\n        state.timestamp = Date.now();\n\n        // load file\n        state.request = fetchFn(\n            url,\n            response => {\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n\n                // done!\n                state.complete = true;\n\n                // turn blob response into a file\n                if (response instanceof Blob) {\n                    response = getFileFromBlob(response, response.name || getFilenameFromURL(url));\n                }\n\n                api.fire(\n                    'load',\n                    // if has received blob, we go with blob, if no response, we return null\n                    response instanceof Blob ? response : response ? response.body : null\n                );\n            },\n            error => {\n                api.fire(\n                    'error',\n                    typeof error === 'string'\n                        ? {\n                              type: 'error',\n                              code: 0,\n                              body: error,\n                          }\n                        : error\n                );\n            },\n            (computable, current, total) => {\n                // collected some meta data already\n                if (total) {\n                    state.size = total;\n                }\n\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n\n                // if we can't compute progress, we're not going to fire progress events\n                if (!computable) {\n                    state.progress = null;\n                    return;\n                }\n\n                // update progress percentage\n                state.progress = current / total;\n\n                // expose\n                api.fire('progress', state.progress);\n            },\n            () => {\n                api.fire('abort');\n            },\n            response => {\n                const fileinfo = getFileInfoFromHeaders(\n                    typeof response === 'string' ? response : response.headers\n                );\n                api.fire('meta', {\n                    size: state.size || fileinfo.size,\n                    filename: fileinfo.name,\n                    source: fileinfo.source,\n                });\n            }\n        );\n    };\n\n    const api = {\n        ...on(),\n        setSource: source => (state.source = source),\n        getProgress, // file load progress\n        abort, // abort file load\n        load, // start load\n    };\n\n    return api;\n};\n\nconst isGet = method => /GET|HEAD/.test(method);\n\nconst sendRequest = (data, url, options) => {\n    const api = {\n        onheaders: () => {},\n        onprogress: () => {},\n        onload: () => {},\n        ontimeout: () => {},\n        onerror: () => {},\n        onabort: () => {},\n        abort: () => {\n            aborted = true;\n            xhr.abort();\n        },\n    };\n\n    // timeout identifier, only used when timeout is defined\n    let aborted = false;\n    let headersReceived = false;\n\n    // set default options\n    options = {\n        method: 'POST',\n        headers: {},\n        withCredentials: false,\n        ...options,\n    };\n\n    // encode url\n    url = encodeURI(url);\n\n    // if method is GET, add any received data to url\n\n    if (isGet(options.method) && data) {\n        url = `${url}${encodeURIComponent(typeof data === 'string' ? data : JSON.stringify(data))}`;\n    }\n\n    // create request\n    const xhr = new XMLHttpRequest();\n\n    // progress of load\n    const process = isGet(options.method) ? xhr : xhr.upload;\n    process.onprogress = e => {\n        // no progress event when aborted ( onprogress is called once after abort() )\n        if (aborted) {\n            return;\n        }\n\n        api.onprogress(e.lengthComputable, e.loaded, e.total);\n    };\n\n    // tries to get header info to the app as fast as possible\n    xhr.onreadystatechange = () => {\n        // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n        if (xhr.readyState < 2) {\n            return;\n        }\n\n        // no server response\n        if (xhr.readyState === 4 && xhr.status === 0) {\n            return;\n        }\n\n        if (headersReceived) {\n            return;\n        }\n\n        headersReceived = true;\n\n        // we've probably received some useful data in response headers\n        api.onheaders(xhr);\n    };\n\n    // load successful\n    xhr.onload = () => {\n        // is classified as valid response\n        if (xhr.status >= 200 && xhr.status < 300) {\n            api.onload(xhr);\n        } else {\n            api.onerror(xhr);\n        }\n    };\n\n    // error during load\n    xhr.onerror = () => api.onerror(xhr);\n\n    // request aborted\n    xhr.onabort = () => {\n        aborted = true;\n        api.onabort();\n    };\n\n    // request timeout\n    xhr.ontimeout = () => api.ontimeout(xhr);\n\n    // open up open up!\n    xhr.open(options.method, url, true);\n\n    // set timeout if defined (do it after open so IE11 plays ball)\n    if (isInt(options.timeout)) {\n        xhr.timeout = options.timeout;\n    }\n\n    // add headers\n    Object.keys(options.headers).forEach(key => {\n        const value = unescape(encodeURIComponent(options.headers[key]));\n        xhr.setRequestHeader(key, value);\n    });\n\n    // set type of response\n    if (options.responseType) {\n        xhr.responseType = options.responseType;\n    }\n\n    // set credentials\n    if (options.withCredentials) {\n        xhr.withCredentials = true;\n    }\n\n    // let's send our data\n    xhr.send(data);\n\n    return api;\n};\n\nconst createResponse = (type, code, body, headers) => ({\n    type,\n    code,\n    body,\n    headers,\n});\n\nconst createTimeoutResponse = cb => xhr => {\n    cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n};\n\nconst hasQS = str => /\\?/.test(str);\nconst buildURL = (...parts) => {\n    let url = '';\n    parts.forEach(part => {\n        url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, '&') : part;\n    });\n    return url;\n};\n\nconst createFetchFunction = (apiUrl = '', action) => {\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function') {\n        return action;\n    }\n\n    // no action supplied\n    if (!action || !isString(action.url)) {\n        return null;\n    }\n\n    // set onload hanlder\n    const onload = action.onload || (res => res);\n    const onerror = action.onerror || (res => null);\n\n    // internal handler\n    return (url, load, error, progress, abort, headers) => {\n        // do local or remote request based on if the url is external\n        const request = sendRequest(url, buildURL(apiUrl, action.url), {\n            ...action,\n            responseType: 'blob',\n        });\n\n        request.onload = xhr => {\n            // get headers\n            const headers = xhr.getAllResponseHeaders();\n\n            // get filename\n            const filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n            // create response\n            load(\n                createResponse(\n                    'load',\n                    xhr.status,\n                    action.method === 'HEAD'\n                        ? null\n                        : getFileFromBlob(onload(xhr.response), filename),\n                    headers\n                )\n            );\n        };\n\n        request.onerror = xhr => {\n            error(\n                createResponse(\n                    'error',\n                    xhr.status,\n                    onerror(xhr.response) || xhr.statusText,\n                    xhr.getAllResponseHeaders()\n                )\n            );\n        };\n\n        request.onheaders = xhr => {\n            headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n        };\n\n        request.ontimeout = createTimeoutResponse(error);\n        request.onprogress = progress;\n        request.onabort = abort;\n\n        // should return request\n        return request;\n    };\n};\n\nconst ChunkStatus = {\n    QUEUED: 0,\n    COMPLETE: 1,\n    PROCESSING: 2,\n    ERROR: 3,\n    WAITING: 4,\n};\n\n/*\nfunction signature:\n  (file, metadata, load, error, progress, abort, transfer, options) => {\n    return {\n    abort:() => {}\n  }\n}\n*/\n\n// apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\nconst processFileChunked = (\n    apiUrl,\n    action,\n    name,\n    file,\n    metadata,\n    load,\n    error,\n    progress,\n    abort,\n    transfer,\n    options\n) => {\n    // all chunks\n    const chunks = [];\n    const { chunkTransferId, chunkServer, chunkSize, chunkRetryDelays } = options;\n\n    // default state\n    const state = {\n        serverId: chunkTransferId,\n        aborted: false,\n    };\n\n    // set onload handlers\n    const ondata = action.ondata || (fd => fd);\n    const onload =\n        action.onload ||\n        ((xhr, method) =>\n            method === 'HEAD' ? xhr.getResponseHeader('Upload-Offset') : xhr.response);\n    const onerror = action.onerror || (res => null);\n\n    // create server hook\n    const requestTransferId = cb => {\n        const formData = new FormData();\n\n        // add metadata under same name\n        if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n        const headers =\n            typeof action.headers === 'function'\n                ? action.headers(file, metadata)\n                : {\n                      ...action.headers,\n                      'Upload-Length': file.size,\n                  };\n\n        const requestParams = {\n            ...action,\n            headers,\n        };\n\n        // send request object\n        const request = sendRequest(ondata(formData), buildURL(apiUrl, action.url), requestParams);\n\n        request.onload = xhr => cb(onload(xhr, requestParams.method));\n\n        request.onerror = xhr =>\n            error(\n                createResponse(\n                    'error',\n                    xhr.status,\n                    onerror(xhr.response) || xhr.statusText,\n                    xhr.getAllResponseHeaders()\n                )\n            );\n\n        request.ontimeout = createTimeoutResponse(error);\n    };\n\n    const requestTransferOffset = cb => {\n        const requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n        const headers =\n            typeof action.headers === 'function'\n                ? action.headers(state.serverId)\n                : {\n                      ...action.headers,\n                  };\n\n        const requestParams = {\n            headers,\n            method: 'HEAD',\n        };\n\n        const request = sendRequest(null, requestUrl, requestParams);\n\n        request.onload = xhr => cb(onload(xhr, requestParams.method));\n\n        request.onerror = xhr =>\n            error(\n                createResponse(\n                    'error',\n                    xhr.status,\n                    onerror(xhr.response) || xhr.statusText,\n                    xhr.getAllResponseHeaders()\n                )\n            );\n\n        request.ontimeout = createTimeoutResponse(error);\n    };\n\n    // create chunks\n    const lastChunkIndex = Math.floor(file.size / chunkSize);\n    for (let i = 0; i <= lastChunkIndex; i++) {\n        const offset = i * chunkSize;\n        const data = file.slice(offset, offset + chunkSize, 'application/offset+octet-stream');\n        chunks[i] = {\n            index: i,\n            size: data.size,\n            offset,\n            data,\n            file,\n            progress: 0,\n            retries: [...chunkRetryDelays],\n            status: ChunkStatus.QUEUED,\n            error: null,\n            request: null,\n            timeout: null,\n        };\n    }\n\n    const completeProcessingChunks = () => load(state.serverId);\n\n    const canProcessChunk = chunk =>\n        chunk.status === ChunkStatus.QUEUED || chunk.status === ChunkStatus.ERROR;\n\n    const processChunk = chunk => {\n        // processing is paused, wait here\n        if (state.aborted) return;\n\n        // get next chunk to process\n        chunk = chunk || chunks.find(canProcessChunk);\n\n        // no more chunks to process\n        if (!chunk) {\n            // all done?\n            if (chunks.every(chunk => chunk.status === ChunkStatus.COMPLETE)) {\n                completeProcessingChunks();\n            }\n\n            // no chunk to handle\n            return;\n        }\n\n        // now processing this chunk\n        chunk.status = ChunkStatus.PROCESSING;\n        chunk.progress = null;\n\n        // allow parsing of formdata\n        const ondata = chunkServer.ondata || (fd => fd);\n        const onerror = chunkServer.onerror || (res => null);\n\n        // send request object\n        const requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n        const headers =\n            typeof chunkServer.headers === 'function'\n                ? chunkServer.headers(chunk)\n                : {\n                      ...chunkServer.headers,\n                      'Content-Type': 'application/offset+octet-stream',\n                      'Upload-Offset': chunk.offset,\n                      'Upload-Length': file.size,\n                      'Upload-Name': file.name,\n                  };\n\n        const request = (chunk.request = sendRequest(ondata(chunk.data), requestUrl, {\n            ...chunkServer,\n            headers,\n        }));\n\n        request.onload = () => {\n            // done!\n            chunk.status = ChunkStatus.COMPLETE;\n\n            // remove request reference\n            chunk.request = null;\n\n            // start processing more chunks\n            processChunks();\n        };\n\n        request.onprogress = (lengthComputable, loaded, total) => {\n            chunk.progress = lengthComputable ? loaded : null;\n            updateTotalProgress();\n        };\n\n        request.onerror = xhr => {\n            chunk.status = ChunkStatus.ERROR;\n            chunk.request = null;\n            chunk.error = onerror(xhr.response) || xhr.statusText;\n            if (!retryProcessChunk(chunk)) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            }\n        };\n\n        request.ontimeout = xhr => {\n            chunk.status = ChunkStatus.ERROR;\n            chunk.request = null;\n            if (!retryProcessChunk(chunk)) {\n                createTimeoutResponse(error)(xhr);\n            }\n        };\n\n        request.onabort = () => {\n            chunk.status = ChunkStatus.QUEUED;\n            chunk.request = null;\n            abort();\n        };\n    };\n\n    const retryProcessChunk = chunk => {\n        // no more retries left\n        if (chunk.retries.length === 0) return false;\n\n        // new retry\n        chunk.status = ChunkStatus.WAITING;\n        clearTimeout(chunk.timeout);\n        chunk.timeout = setTimeout(() => {\n            processChunk(chunk);\n        }, chunk.retries.shift());\n\n        // we're going to retry\n        return true;\n    };\n\n    const updateTotalProgress = () => {\n        // calculate total progress fraction\n        const totalBytesTransfered = chunks.reduce((p, chunk) => {\n            if (p === null || chunk.progress === null) return null;\n            return p + chunk.progress;\n        }, 0);\n\n        // can't compute progress\n        if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n        // calculate progress values\n        const totalSize = chunks.reduce((total, chunk) => total + chunk.size, 0);\n\n        // can update progress indicator\n        progress(true, totalBytesTransfered, totalSize);\n    };\n\n    // process new chunks\n    const processChunks = () => {\n        const totalProcessing = chunks.filter(chunk => chunk.status === ChunkStatus.PROCESSING)\n            .length;\n        if (totalProcessing >= 1) return;\n        processChunk();\n    };\n\n    const abortChunks = () => {\n        chunks.forEach(chunk => {\n            clearTimeout(chunk.timeout);\n            if (chunk.request) {\n                chunk.request.abort();\n            }\n        });\n    };\n\n    // let's go!\n    if (!state.serverId) {\n        requestTransferId(serverId => {\n            // stop here if aborted, might have happened in between request and callback\n            if (state.aborted) return;\n\n            // pass back to item so we can use it if something goes wrong\n            transfer(serverId);\n\n            // store internally\n            state.serverId = serverId;\n            processChunks();\n        });\n    } else {\n        requestTransferOffset(offset => {\n            // stop here if aborted, might have happened in between request and callback\n            if (state.aborted) return;\n\n            // mark chunks with lower offset as complete\n            chunks\n                .filter(chunk => chunk.offset < offset)\n                .forEach(chunk => {\n                    chunk.status = ChunkStatus.COMPLETE;\n                    chunk.progress = chunk.size;\n                });\n\n            // continue processing\n            processChunks();\n        });\n    }\n\n    return {\n        abort: () => {\n            state.aborted = true;\n            abortChunks();\n        },\n    };\n};\n\n/*\nfunction signature:\n  (file, metadata, load, error, progress, abort) => {\n    return {\n    abort:() => {}\n  }\n}\n*/\nconst createFileProcessorFunction = (apiUrl, action, name, options) => (\n    file,\n    metadata,\n    load,\n    error,\n    progress,\n    abort,\n    transfer\n) => {\n    // no file received\n    if (!file) return;\n\n    // if was passed a file, and we can chunk it, exit here\n    const canChunkUpload = options.chunkUploads;\n    const shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n    const willChunkUpload = canChunkUpload && (shouldChunkUpload || options.chunkForce);\n    if (file instanceof Blob && willChunkUpload)\n        return processFileChunked(\n            apiUrl,\n            action,\n            name,\n            file,\n            metadata,\n            load,\n            error,\n            progress,\n            abort,\n            transfer,\n            options\n        );\n\n    // set handlers\n    const ondata = action.ondata || (fd => fd);\n    const onload = action.onload || (res => res);\n    const onerror = action.onerror || (res => null);\n\n    const headers =\n        typeof action.headers === 'function'\n            ? action.headers(file, metadata) || {}\n            : {\n                  ...action.headers,\n              };\n\n    const requestParams = {\n        ...action,\n        headers,\n    };\n\n    // create formdata object\n    var formData = new FormData();\n\n    // add metadata under same name\n    if (isObject(metadata)) {\n        formData.append(name, JSON.stringify(metadata));\n    }\n\n    // Turn into an array of objects so no matter what the input, we can handle it the same way\n    (file instanceof Blob ? [{ name: null, file }] : file).forEach(item => {\n        formData.append(\n            name,\n            item.file,\n            item.name === null ? item.file.name : `${item.name}${item.file.name}`\n        );\n    });\n\n    // send request object\n    const request = sendRequest(ondata(formData), buildURL(apiUrl, action.url), requestParams);\n    request.onload = xhr => {\n        load(createResponse('load', xhr.status, onload(xhr.response), xhr.getAllResponseHeaders()));\n    };\n\n    request.onerror = xhr => {\n        error(\n            createResponse(\n                'error',\n                xhr.status,\n                onerror(xhr.response) || xhr.statusText,\n                xhr.getAllResponseHeaders()\n            )\n        );\n    };\n\n    request.ontimeout = createTimeoutResponse(error);\n    request.onprogress = progress;\n    request.onabort = abort;\n\n    // should return request\n    return request;\n};\n\nconst createProcessorFunction = (apiUrl = '', action, name, options) => {\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function') return (...params) => action(name, ...params, options);\n\n    // no action supplied\n    if (!action || !isString(action.url)) return null;\n\n    // internal handler\n    return createFileProcessorFunction(apiUrl, action, name, options);\n};\n\n/*\n function signature:\n (uniqueFileId, load, error) => { }\n */\nconst createRevertFunction = (apiUrl = '', action) => {\n    // is custom implementation\n    if (typeof action === 'function') {\n        return action;\n    }\n\n    // no action supplied, return stub function, interface will work, but file won't be removed\n    if (!action || !isString(action.url)) {\n        return (uniqueFileId, load) => load();\n    }\n\n    // set onload hanlder\n    const onload = action.onload || (res => res);\n    const onerror = action.onerror || (res => null);\n\n    // internal implementation\n    return (uniqueFileId, load, error) => {\n        const request = sendRequest(\n            uniqueFileId,\n            apiUrl + action.url,\n            action // contains method, headers and withCredentials properties\n        );\n        request.onload = xhr => {\n            load(\n                createResponse(\n                    'load',\n                    xhr.status,\n                    onload(xhr.response),\n                    xhr.getAllResponseHeaders()\n                )\n            );\n        };\n\n        request.onerror = xhr => {\n            error(\n                createResponse(\n                    'error',\n                    xhr.status,\n                    onerror(xhr.response) || xhr.statusText,\n                    xhr.getAllResponseHeaders()\n                )\n            );\n        };\n\n        request.ontimeout = createTimeoutResponse(error);\n\n        return request;\n    };\n};\n\nconst getRandomNumber = (min = 0, max = 1) => min + Math.random() * (max - min);\n\nconst createPerceivedPerformanceUpdater = (\n    cb,\n    duration = 1000,\n    offset = 0,\n    tickMin = 25,\n    tickMax = 250\n) => {\n    let timeout = null;\n    const start = Date.now();\n\n    const tick = () => {\n        let runtime = Date.now() - start;\n        let delay = getRandomNumber(tickMin, tickMax);\n\n        if (runtime + delay > duration) {\n            delay = runtime + delay - duration;\n        }\n\n        let progress = runtime / duration;\n        if (progress >= 1 || document.hidden) {\n            cb(1);\n            return;\n        }\n\n        cb(progress);\n\n        timeout = setTimeout(tick, delay);\n    };\n\n    if (duration > 0) tick();\n\n    return {\n        clear: () => {\n            clearTimeout(timeout);\n        },\n    };\n};\n\nconst createFileProcessor = (processFn, options) => {\n    const state = {\n        complete: false,\n        perceivedProgress: 0,\n        perceivedPerformanceUpdater: null,\n        progress: null,\n        timestamp: null,\n        perceivedDuration: 0,\n        duration: 0,\n        request: null,\n        response: null,\n    };\n\n    const { allowMinimumUploadDuration } = options;\n\n    const process = (file, metadata) => {\n        const progressFn = () => {\n            // we've not yet started the real download, stop here\n            // the request might not go through, for instance, there might be some server trouble\n            // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n            if (state.duration === 0 || state.progress === null) return;\n\n            // as we're now processing, fire the progress event\n            api.fire('progress', api.getProgress());\n        };\n\n        const completeFn = () => {\n            state.complete = true;\n            api.fire('load-perceived', state.response.body);\n        };\n\n        // let's start processing\n        api.fire('start');\n\n        // set request start\n        state.timestamp = Date.now();\n\n        // create perceived performance progress indicator\n        state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n            progress => {\n                state.perceivedProgress = progress;\n                state.perceivedDuration = Date.now() - state.timestamp;\n\n                progressFn();\n\n                // if fake progress is done, and a response has been received,\n                // and we've not yet called the complete method\n                if (state.response && state.perceivedProgress === 1 && !state.complete) {\n                    // we done!\n                    completeFn();\n                }\n            },\n            // random delay as in a list of files you start noticing\n            // files uploading at the exact same speed\n            allowMinimumUploadDuration ? getRandomNumber(750, 1500) : 0\n        );\n\n        // remember request so we can abort it later\n        state.request = processFn(\n            // the file to process\n            file,\n\n            // the metadata to send along\n            metadata,\n\n            // callbacks (load, error, progress, abort, transfer)\n            // load expects the body to be a server id if\n            // you want to make use of revert\n            response => {\n                // we put the response in state so we can access\n                // it outside of this method\n                state.response = isObject(response)\n                    ? response\n                    : {\n                          type: 'load',\n                          code: 200,\n                          body: `${response}`,\n                          headers: {},\n                      };\n\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n\n                // force progress to 1 as we're now done\n                state.progress = 1;\n\n                // actual load is done let's share results\n                api.fire('load', state.response.body);\n\n                // we are really done\n                // if perceived progress is 1 ( wait for perceived progress to complete )\n                // or if server does not support progress ( null )\n                if (\n                    !allowMinimumUploadDuration ||\n                    (allowMinimumUploadDuration && state.perceivedProgress === 1)\n                ) {\n                    completeFn();\n                }\n            },\n\n            // error is expected to be an object with type, code, body\n            error => {\n                // cancel updater\n                state.perceivedPerformanceUpdater.clear();\n\n                // update others about this error\n                api.fire(\n                    'error',\n                    isObject(error)\n                        ? error\n                        : {\n                              type: 'error',\n                              code: 0,\n                              body: `${error}`,\n                          }\n                );\n            },\n\n            // actual processing progress\n            (computable, current, total) => {\n                // update actual duration\n                state.duration = Date.now() - state.timestamp;\n\n                // update actual progress\n                state.progress = computable ? current / total : null;\n\n                progressFn();\n            },\n\n            // abort does not expect a value\n            () => {\n                // stop updater\n                state.perceivedPerformanceUpdater.clear();\n\n                // fire the abort event so we can switch visuals\n                api.fire('abort', state.response ? state.response.body : null);\n            },\n\n            // register the id for this transfer\n            transferId => {\n                api.fire('transfer', transferId);\n            }\n        );\n    };\n\n    const abort = () => {\n        // no request running, can't abort\n        if (!state.request) return;\n\n        // stop updater\n        state.perceivedPerformanceUpdater.clear();\n\n        // abort actual request\n        if (state.request.abort) state.request.abort();\n\n        // if has response object, we've completed the request\n        state.complete = true;\n    };\n\n    const reset = () => {\n        abort();\n        state.complete = false;\n        state.perceivedProgress = 0;\n        state.progress = 0;\n        state.timestamp = null;\n        state.perceivedDuration = 0;\n        state.duration = 0;\n        state.request = null;\n        state.response = null;\n    };\n\n    const getProgress = allowMinimumUploadDuration\n        ? () => (state.progress ? Math.min(state.progress, state.perceivedProgress) : null)\n        : () => state.progress || null;\n\n    const getDuration = allowMinimumUploadDuration\n        ? () => Math.min(state.duration, state.perceivedDuration)\n        : () => state.duration;\n\n    const api = {\n        ...on(),\n        process, // start processing file\n        abort, // abort active process request\n        getProgress,\n        getDuration,\n        reset,\n    };\n\n    return api;\n};\n\nconst getFilenameWithoutExtension = name => name.substring(0, name.lastIndexOf('.')) || name;\n\nconst createFileStub = source => {\n    let data = [source.name, source.size, source.type];\n\n    // is blob or base64, then we need to set the name\n    if (source instanceof Blob || isBase64DataURI(source)) {\n        data[0] = source.name || getDateString();\n    } else if (isBase64DataURI(source)) {\n        // if is base64 data uri we need to determine the average size and type\n        data[1] = source.length;\n        data[2] = getMimeTypeFromBase64DataURI(source);\n    } else if (isString(source)) {\n        // url\n        data[0] = getFilenameFromURL(source);\n        data[1] = 0;\n        data[2] = 'application/octet-stream';\n    }\n\n    return {\n        name: data[0],\n        size: data[1],\n        type: data[2],\n    };\n};\n\nconst isFile = value => !!(value instanceof File || (value instanceof Blob && value.name));\n\nconst deepCloneObject = src => {\n    if (!isObject(src)) return src;\n    const target = isArray(src) ? [] : {};\n    for (const key in src) {\n        if (!src.hasOwnProperty(key)) continue;\n        const v = src[key];\n        target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n    }\n    return target;\n};\n\nconst createItem = (origin = null, serverFileReference = null, file = null) => {\n    // unique id for this item, is used to identify the item across views\n    const id = getUniqueId();\n\n    /**\n     * Internal item state\n     */\n    const state = {\n        // is archived\n        archived: false,\n\n        // if is frozen, no longer fires events\n        frozen: false,\n\n        // removed from view\n        released: false,\n\n        // original source\n        source: null,\n\n        // file model reference\n        file,\n\n        // id of file on server\n        serverFileReference,\n\n        // id of file transfer on server\n        transferId: null,\n\n        // is aborted\n        processingAborted: false,\n\n        // current item status\n        status: serverFileReference ? ItemStatus.PROCESSING_COMPLETE : ItemStatus.INIT,\n\n        // active processes\n        activeLoader: null,\n        activeProcessor: null,\n    };\n\n    // callback used when abort processing is called to link back to the resolve method\n    let abortProcessingRequestComplete = null;\n\n    /**\n     * Externally added item metadata\n     */\n    const metadata = {};\n\n    // item data\n    const setStatus = status => (state.status = status);\n\n    // fire event unless the item has been archived\n    const fire = (event, ...params) => {\n        if (state.released || state.frozen) return;\n        api.fire(event, ...params);\n    };\n\n    // file data\n    const getFileExtension = () => getExtensionFromFilename(state.file.name);\n    const getFileType = () => state.file.type;\n    const getFileSize = () => state.file.size;\n    const getFile = () => state.file;\n\n    //\n    // logic to load a file\n    //\n    const load = (source, loader, onload) => {\n        // remember the original item source\n        state.source = source;\n\n        // source is known\n        api.fireSync('init');\n\n        // file stub is already there\n        if (state.file) {\n            api.fireSync('load-skip');\n            return;\n        }\n\n        // set a stub file object while loading the actual data\n        state.file = createFileStub(source);\n\n        // starts loading\n        loader.on('init', () => {\n            fire('load-init');\n        });\n\n        // we'eve received a size indication, let's update the stub\n        loader.on('meta', meta => {\n            // set size of file stub\n            state.file.size = meta.size;\n\n            // set name of file stub\n            state.file.filename = meta.filename;\n\n            // if has received source, we done\n            if (meta.source) {\n                origin = FileOrigin.LIMBO;\n                state.serverFileReference = meta.source;\n                state.status = ItemStatus.PROCESSING_COMPLETE;\n            }\n\n            // size has been updated\n            fire('load-meta');\n        });\n\n        // the file is now loading we need to update the progress indicators\n        loader.on('progress', progress => {\n            setStatus(ItemStatus.LOADING);\n\n            fire('load-progress', progress);\n        });\n\n        // an error was thrown while loading the file, we need to switch to error state\n        loader.on('error', error => {\n            setStatus(ItemStatus.LOAD_ERROR);\n\n            fire('load-request-error', error);\n        });\n\n        // user or another process aborted the file load (cannot retry)\n        loader.on('abort', () => {\n            setStatus(ItemStatus.INIT);\n            fire('load-abort');\n        });\n\n        // done loading\n        loader.on('load', file => {\n            // as we've now loaded the file the loader is no longer required\n            state.activeLoader = null;\n\n            // called when file has loaded succesfully\n            const success = result => {\n                // set (possibly) transformed file\n                state.file = isFile(result) ? result : state.file;\n\n                // file received\n                if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n                    setStatus(ItemStatus.PROCESSING_COMPLETE);\n                } else {\n                    setStatus(ItemStatus.IDLE);\n                }\n\n                fire('load');\n            };\n\n            const error = result => {\n                // set original file\n                state.file = file;\n                fire('load-meta');\n\n                setStatus(ItemStatus.LOAD_ERROR);\n                fire('load-file-error', result);\n            };\n\n            // if we already have a server file reference, we don't need to call the onload method\n            if (state.serverFileReference) {\n                success(file);\n                return;\n            }\n\n            // no server id, let's give this file the full treatment\n            onload(file, success, error);\n        });\n\n        // set loader source data\n        loader.setSource(source);\n\n        // set as active loader\n        state.activeLoader = loader;\n\n        // load the source data\n        loader.load();\n    };\n\n    const retryLoad = () => {\n        if (!state.activeLoader) {\n            return;\n        }\n        state.activeLoader.load();\n    };\n\n    const abortLoad = () => {\n        if (state.activeLoader) {\n            state.activeLoader.abort();\n            return;\n        }\n        setStatus(ItemStatus.INIT);\n        fire('load-abort');\n    };\n\n    //\n    // logic to process a file\n    //\n    const process = (processor, onprocess) => {\n        // processing was aborted\n        if (state.processingAborted) {\n            state.processingAborted = false;\n            return;\n        }\n\n        // now processing\n        setStatus(ItemStatus.PROCESSING);\n\n        // reset abort callback\n        abortProcessingRequestComplete = null;\n\n        // if no file loaded we'll wait for the load event\n        if (!(state.file instanceof Blob)) {\n            api.on('load', () => {\n                process(processor, onprocess);\n            });\n            return;\n        }\n\n        // setup processor\n        processor.on('load', serverFileReference => {\n            // need this id to be able to revert the upload\n            state.transferId = null;\n            state.serverFileReference = serverFileReference;\n        });\n\n        // register transfer id\n        processor.on('transfer', transferId => {\n            // need this id to be able to revert the upload\n            state.transferId = transferId;\n        });\n\n        processor.on('load-perceived', serverFileReference => {\n            // no longer required\n            state.activeProcessor = null;\n\n            // need this id to be able to rever the upload\n            state.transferId = null;\n            state.serverFileReference = serverFileReference;\n\n            setStatus(ItemStatus.PROCESSING_COMPLETE);\n            fire('process-complete', serverFileReference);\n        });\n\n        processor.on('start', () => {\n            fire('process-start');\n        });\n\n        processor.on('error', error => {\n            state.activeProcessor = null;\n            setStatus(ItemStatus.PROCESSING_ERROR);\n            fire('process-error', error);\n        });\n\n        processor.on('abort', serverFileReference => {\n            state.activeProcessor = null;\n\n            // if file was uploaded but processing was cancelled during perceived processor time store file reference\n            state.serverFileReference = serverFileReference;\n\n            setStatus(ItemStatus.IDLE);\n            fire('process-abort');\n\n            // has timeout so doesn't interfere with remove action\n            if (abortProcessingRequestComplete) {\n                abortProcessingRequestComplete();\n            }\n        });\n\n        processor.on('progress', progress => {\n            fire('process-progress', progress);\n        });\n\n        // when successfully transformed\n        const success = file => {\n            // if was archived in the mean time, don't process\n            if (state.archived) return;\n\n            // process file!\n            processor.process(file, { ...metadata });\n        };\n\n        // something went wrong during transform phase\n        const error = console.error;\n\n        // start processing the file\n        onprocess(state.file, success, error);\n\n        // set as active processor\n        state.activeProcessor = processor;\n    };\n\n    const requestProcessing = () => {\n        state.processingAborted = false;\n        setStatus(ItemStatus.PROCESSING_QUEUED);\n    };\n\n    const abortProcessing = () =>\n        new Promise(resolve => {\n            if (!state.activeProcessor) {\n                state.processingAborted = true;\n\n                setStatus(ItemStatus.IDLE);\n                fire('process-abort');\n\n                resolve();\n                return;\n            }\n\n            abortProcessingRequestComplete = () => {\n                resolve();\n            };\n\n            state.activeProcessor.abort();\n        });\n\n    //\n    // logic to revert a processed file\n    //\n    const revert = (revertFileUpload, forceRevert) =>\n        new Promise((resolve, reject) => {\n            // a completed upload will have a serverFileReference, a failed chunked upload where\n            // getting a serverId succeeded but >=0 chunks have been uploaded will have transferId set\n            const serverTransferId =\n                state.serverFileReference !== null ? state.serverFileReference : state.transferId;\n\n            // cannot revert without a server id for this process\n            if (serverTransferId === null) {\n                resolve();\n                return;\n            }\n\n            // revert the upload (fire and forget)\n            revertFileUpload(\n                serverTransferId,\n                () => {\n                    // reset file server id and transfer id as now it's not available on the server\n                    state.serverFileReference = null;\n                    state.transferId = null;\n                    resolve();\n                },\n                error => {\n                    // don't set error state when reverting is optional, it will always resolve\n                    if (!forceRevert) {\n                        resolve();\n                        return;\n                    }\n\n                    // oh no errors\n                    setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n                    fire('process-revert-error');\n                    reject(error);\n                }\n            );\n\n            // fire event\n            setStatus(ItemStatus.IDLE);\n            fire('process-revert');\n        });\n\n    // exposed methods\n    const setMetadata = (key, value, silent) => {\n        const keys = key.split('.');\n        const root = keys[0];\n        const last = keys.pop();\n        let data = metadata;\n        keys.forEach(key => (data = data[key]));\n\n        // compare old value against new value, if they're the same, we're not updating\n        if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n        // update value\n        data[last] = value;\n\n        // fire update\n        fire('metadata-update', {\n            key: root,\n            value: metadata[root],\n            silent,\n        });\n    };\n\n    const getMetadata = key => deepCloneObject(key ? metadata[key] : metadata);\n\n    const api = {\n        id: { get: () => id },\n        origin: { get: () => origin, set: value => (origin = value) },\n        serverId: { get: () => state.serverFileReference },\n        transferId: { get: () => state.transferId },\n        status: { get: () => state.status },\n        filename: { get: () => state.file.name },\n        filenameWithoutExtension: { get: () => getFilenameWithoutExtension(state.file.name) },\n        fileExtension: { get: getFileExtension },\n        fileType: { get: getFileType },\n        fileSize: { get: getFileSize },\n        file: { get: getFile },\n        relativePath: { get: () => state.file._relativePath },\n\n        source: { get: () => state.source },\n\n        getMetadata,\n        setMetadata: (key, value, silent) => {\n            if (isObject(key)) {\n                const data = key;\n                Object.keys(data).forEach(key => {\n                    setMetadata(key, data[key], value);\n                });\n                return key;\n            }\n            setMetadata(key, value, silent);\n            return value;\n        },\n\n        extend: (name, handler) => (itemAPI[name] = handler),\n\n        abortLoad,\n        retryLoad,\n        requestProcessing,\n        abortProcessing,\n\n        load,\n        process,\n        revert,\n\n        ...on(),\n\n        freeze: () => (state.frozen = true),\n\n        release: () => (state.released = true),\n        released: { get: () => state.released },\n\n        archive: () => (state.archived = true),\n        archived: { get: () => state.archived },\n\n        // replace source and file object\n        setFile: file => (state.file = file),\n    };\n\n    // create it here instead of returning it instantly so we can extend it later\n    const itemAPI = createObject(api);\n\n    return itemAPI;\n};\n\nconst getItemIndexByQuery = (items, query) => {\n    // just return first index\n    if (isEmpty(query)) {\n        return 0;\n    }\n\n    // invalid queries\n    if (!isString(query)) {\n        return -1;\n    }\n\n    // return item by id (or -1 if not found)\n    return items.findIndex(item => item.id === query);\n};\n\nconst getItemById = (items, itemId) => {\n    const index = getItemIndexByQuery(items, itemId);\n    if (index < 0) {\n        return;\n    }\n    return items[index] || null;\n};\n\nconst fetchBlob = (url, load, error, progress, abort, headers) => {\n    const request = sendRequest(null, url, {\n        method: 'GET',\n        responseType: 'blob',\n    });\n\n    request.onload = xhr => {\n        // get headers\n        const headers = xhr.getAllResponseHeaders();\n\n        // get filename\n        const filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n        // create response\n        load(createResponse('load', xhr.status, getFileFromBlob(xhr.response, filename), headers));\n    };\n\n    request.onerror = xhr => {\n        error(createResponse('error', xhr.status, xhr.statusText, xhr.getAllResponseHeaders()));\n    };\n\n    request.onheaders = xhr => {\n        headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n    };\n\n    request.ontimeout = createTimeoutResponse(error);\n    request.onprogress = progress;\n    request.onabort = abort;\n\n    // should return request\n    return request;\n};\n\nconst getDomainFromURL = url => {\n    if (url.indexOf('//') === 0) {\n        url = location.protocol + url;\n    }\n    return url\n        .toLowerCase()\n        .replace('blob:', '')\n        .replace(/([a-z])?:\\/\\//, '$1')\n        .split('/')[0];\n};\n\nconst isExternalURL = url =>\n    (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n    getDomainFromURL(location.href) !== getDomainFromURL(url);\n\nconst dynamicLabel = label => (...params) => (isFunction(label) ? label(...params) : label);\n\nconst isMockItem = item => !isFile(item.file);\n\nconst listUpdated = (dispatch, state) => {\n    clearTimeout(state.listUpdateTimeout);\n    state.listUpdateTimeout = setTimeout(() => {\n        dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n    }, 0);\n};\n\nconst optionalPromise = (fn, ...params) =>\n    new Promise(resolve => {\n        if (!fn) {\n            return resolve(true);\n        }\n\n        const result = fn(...params);\n\n        if (result == null) {\n            return resolve(true);\n        }\n\n        if (typeof result === 'boolean') {\n            return resolve(result);\n        }\n\n        if (typeof result.then === 'function') {\n            result.then(resolve);\n        }\n    });\n\nconst sortItems = (state, compare) => {\n    state.items.sort((a, b) => compare(createItemAPI(a), createItemAPI(b)));\n};\n\n// returns item based on state\nconst getItemByQueryFromState = (state, itemHandler) => ({\n    query,\n    success = () => {},\n    failure = () => {},\n    ...options\n} = {}) => {\n    const item = getItemByQuery(state.items, query);\n    if (!item) {\n        failure({\n            error: createResponse('error', 0, 'Item not found'),\n            file: null,\n        });\n        return;\n    }\n    itemHandler(item, success, failure, options || {});\n};\n\nconst actions = (dispatch, query, state) => ({\n    /**\n     * Aborts all ongoing processes\n     */\n    ABORT_ALL: () => {\n        getActiveItems(state.items).forEach(item => {\n            item.freeze();\n            item.abortLoad();\n            item.abortProcessing();\n        });\n    },\n\n    /**\n     * Sets initial files\n     */\n    DID_SET_FILES: ({ value = [] }) => {\n        // map values to file objects\n        const files = value.map(file => ({\n            source: file.source ? file.source : file,\n            options: file.options,\n        }));\n\n        // loop over files, if file is in list, leave it be, if not, remove\n        // test if items should be moved\n        let activeItems = getActiveItems(state.items);\n\n        activeItems.forEach(item => {\n            // if item not is in new value, remove\n            if (!files.find(file => file.source === item.source || file.source === item.file)) {\n                dispatch('REMOVE_ITEM', { query: item, remove: false });\n            }\n        });\n\n        // add new files\n        activeItems = getActiveItems(state.items);\n        files.forEach((file, index) => {\n            // if file is already in list\n            if (activeItems.find(item => item.source === file.source || item.file === file.source))\n                return;\n\n            // not in list, add\n            dispatch('ADD_ITEM', {\n                ...file,\n                interactionMethod: InteractionMethod.NONE,\n                index,\n            });\n        });\n    },\n\n    DID_UPDATE_ITEM_METADATA: ({ id, action, change }) => {\n        // don't do anything\n        if (change.silent) return;\n\n        // if is called multiple times in close succession we combined all calls together to save resources\n        clearTimeout(state.itemUpdateTimeout);\n        state.itemUpdateTimeout = setTimeout(() => {\n            const item = getItemById(state.items, id);\n\n            // only revert and attempt to upload when we're uploading to a server\n            if (!query('IS_ASYNC')) {\n                // should we update the output data\n                applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                    item,\n                    query,\n                    action,\n                    change,\n                }).then(shouldPrepareOutput => {\n                    // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                    const beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                    if (beforePrepareFile)\n                        shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                    if (!shouldPrepareOutput) return;\n\n                    dispatch(\n                        'REQUEST_PREPARE_OUTPUT',\n                        {\n                            query: id,\n                            item,\n                            success: file => {\n                                dispatch('DID_PREPARE_OUTPUT', { id, file });\n                            },\n                        },\n                        true\n                    );\n                });\n\n                return;\n            }\n\n            // if is local item we need to enable upload button so change can be propagated to server\n            if (item.origin === FileOrigin.LOCAL) {\n                dispatch('DID_LOAD_ITEM', {\n                    id: item.id,\n                    error: null,\n                    serverFileReference: item.source,\n                });\n            }\n\n            // for async scenarios\n            const upload = () => {\n                // we push this forward a bit so the interface is updated correctly\n                setTimeout(() => {\n                    dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n                }, 32);\n            };\n\n            const revert = doUpload => {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                )\n                    .then(doUpload ? upload : () => {})\n                    .catch(() => {});\n            };\n\n            const abort = doUpload => {\n                item.abortProcessing().then(doUpload ? upload : () => {});\n            };\n\n            // if we should re-upload the file immediately\n            if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n                return revert(state.options.instantUpload);\n            }\n\n            // if currently uploading, cancel upload\n            if (item.status === ItemStatus.PROCESSING) {\n                return abort(state.options.instantUpload);\n            }\n\n            if (state.options.instantUpload) {\n                upload();\n            }\n        }, 0);\n    },\n\n    MOVE_ITEM: ({ query, index }) => {\n        const item = getItemByQuery(state.items, query);\n        if (!item) return;\n        const currentIndex = state.items.indexOf(item);\n        index = limit(index, 0, state.items.length - 1);\n        if (currentIndex === index) return;\n        state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n    },\n\n    SORT: ({ compare }) => {\n        sortItems(state, compare);\n        dispatch('DID_SORT_ITEMS', {\n            items: query('GET_ACTIVE_ITEMS'),\n        });\n    },\n\n    ADD_ITEMS: ({ items, index, interactionMethod, success = () => {}, failure = () => {} }) => {\n        let currentIndex = index;\n\n        if (index === -1 || typeof index === 'undefined') {\n            const insertLocation = query('GET_ITEM_INSERT_LOCATION');\n            const totalItems = query('GET_TOTAL_ITEMS');\n            currentIndex = insertLocation === 'before' ? 0 : totalItems;\n        }\n\n        const ignoredFiles = query('GET_IGNORED_FILES');\n        const isValidFile = source =>\n            isFile(source) ? !ignoredFiles.includes(source.name.toLowerCase()) : !isEmpty(source);\n        const validItems = items.filter(isValidFile);\n\n        const promises = validItems.map(\n            source =>\n                new Promise((resolve, reject) => {\n                    dispatch('ADD_ITEM', {\n                        interactionMethod,\n                        source: source.source || source,\n                        success: resolve,\n                        failure: reject,\n                        index: currentIndex++,\n                        options: source.options || {},\n                    });\n                })\n        );\n\n        Promise.all(promises)\n            .then(success)\n            .catch(failure);\n    },\n\n    /**\n     * @param source\n     * @param index\n     * @param interactionMethod\n     */\n    ADD_ITEM: ({\n        source,\n        index = -1,\n        interactionMethod,\n        success = () => {},\n        failure = () => {},\n        options = {},\n    }) => {\n        // if no source supplied\n        if (isEmpty(source)) {\n            failure({\n                error: createResponse('error', 0, 'No source'),\n                file: null,\n            });\n            return;\n        }\n\n        // filter out invalid file items, used to filter dropped directory contents\n        if (isFile(source) && state.options.ignoredFiles.includes(source.name.toLowerCase())) {\n            // fail silently\n            return;\n        }\n\n        // test if there's still room in the list of files\n        if (!hasRoomForItem(state)) {\n            // if multiple allowed, we can't replace\n            // or if only a single item is allowed but we're not allowed to replace it we exit\n            if (\n                state.options.allowMultiple ||\n                (!state.options.allowMultiple && !state.options.allowReplace)\n            ) {\n                const error = createResponse('warning', 0, 'Max files');\n\n                dispatch('DID_THROW_MAX_FILES', {\n                    source,\n                    error,\n                });\n\n                failure({ error, file: null });\n\n                return;\n            }\n\n            // let's replace the item\n            // id of first item we're about to remove\n            const item = getActiveItems(state.items)[0];\n\n            // if has been processed remove it from the server as well\n            if (\n                item.status === ItemStatus.PROCESSING_COMPLETE ||\n                item.status === ItemStatus.PROCESSING_REVERT_ERROR\n            ) {\n                const forceRevert = query('GET_FORCE_REVERT');\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    forceRevert\n                )\n                    .then(() => {\n                        if (!forceRevert) return;\n\n                        // try to add now\n                        dispatch('ADD_ITEM', {\n                            source,\n                            index,\n                            interactionMethod,\n                            success,\n                            failure,\n                            options,\n                        });\n                    })\n                    .catch(() => {}); // no need to handle this catch state for now\n\n                if (forceRevert) return;\n            }\n\n            // remove first item as it will be replaced by this item\n            dispatch('REMOVE_ITEM', { query: item.id });\n        }\n\n        // where did the file originate\n        const origin =\n            options.type === 'local'\n                ? FileOrigin.LOCAL\n                : options.type === 'limbo'\n                ? FileOrigin.LIMBO\n                : FileOrigin.INPUT;\n\n        // create a new blank item\n        const item = createItem(\n            // where did this file come from\n            origin,\n\n            // an input file never has a server file reference\n            origin === FileOrigin.INPUT ? null : source,\n\n            // file mock data, if defined\n            options.file\n        );\n\n        // set initial meta data\n        Object.keys(options.metadata || {}).forEach(key => {\n            item.setMetadata(key, options.metadata[key]);\n        });\n\n        // created the item, let plugins add methods\n        applyFilters('DID_CREATE_ITEM', item, { query, dispatch });\n\n        // where to insert new items\n        const itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n        // adjust index if is not allowed to pick location\n        if (!state.options.itemInsertLocationFreedom) {\n            index = itemInsertLocation === 'before' ? -1 : state.items.length;\n        }\n\n        // add item to list\n        insertItem(state.items, item, index);\n\n        // sort items in list\n        if (isFunction(itemInsertLocation) && source) {\n            sortItems(state, itemInsertLocation);\n        }\n\n        // get a quick reference to the item id\n        const id = item.id;\n\n        // observe item events\n        item.on('init', () => {\n            dispatch('DID_INIT_ITEM', { id });\n        });\n\n        item.on('load-init', () => {\n            dispatch('DID_START_ITEM_LOAD', { id });\n        });\n\n        item.on('load-meta', () => {\n            dispatch('DID_UPDATE_ITEM_META', { id });\n        });\n\n        item.on('load-progress', progress => {\n            dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', { id, progress });\n        });\n\n        item.on('load-request-error', error => {\n            const mainStatus = dynamicLabel(state.options.labelFileLoadError)(error);\n\n            // is client error, no way to recover\n            if (error.code >= 400 && error.code < 500) {\n                dispatch('DID_THROW_ITEM_INVALID', {\n                    id,\n                    error,\n                    status: {\n                        main: mainStatus,\n                        sub: `${error.code} (${error.body})`,\n                    },\n                });\n\n                // reject the file so can be dealt with through API\n                failure({ error, file: createItemAPI(item) });\n                return;\n            }\n\n            // is possible server error, so might be possible to retry\n            dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n                id,\n                error,\n                status: {\n                    main: mainStatus,\n                    sub: state.options.labelTapToRetry,\n                },\n            });\n        });\n\n        item.on('load-file-error', error => {\n            dispatch('DID_THROW_ITEM_INVALID', {\n                id,\n                error: error.status,\n                status: error.status,\n            });\n            failure({ error: error.status, file: createItemAPI(item) });\n        });\n\n        item.on('load-abort', () => {\n            dispatch('REMOVE_ITEM', { query: id });\n        });\n\n        item.on('load-skip', () => {\n            item.on('metadata-update', change => {\n                if (!isFile(item.file)) return;\n                dispatch('DID_UPDATE_ITEM_METADATA', { id, change });\n            });\n\n            dispatch('COMPLETE_LOAD_ITEM', {\n                query: id,\n                item,\n                data: {\n                    source,\n                    success,\n                },\n            });\n        });\n\n        item.on('load', () => {\n            const handleAdd = shouldAdd => {\n                // no should not add this file\n                if (!shouldAdd) {\n                    dispatch('REMOVE_ITEM', {\n                        query: id,\n                    });\n                    return;\n                }\n\n                // now interested in metadata updates\n                item.on('metadata-update', change => {\n                    dispatch('DID_UPDATE_ITEM_METADATA', { id, change });\n                });\n\n                // let plugins decide if the output data should be prepared at this point\n                // means we'll do this and wait for idle state\n                applyFilterChain('SHOULD_PREPARE_OUTPUT', false, { item, query }).then(\n                    shouldPrepareOutput => {\n                        // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                        const beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                        if (beforePrepareFile)\n                            shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                        const loadComplete = () => {\n                            dispatch('COMPLETE_LOAD_ITEM', {\n                                query: id,\n                                item,\n                                data: {\n                                    source,\n                                    success,\n                                },\n                            });\n\n                            listUpdated(dispatch, state);\n                        };\n\n                        // exit\n                        if (shouldPrepareOutput) {\n                            // wait for idle state and then run PREPARE_OUTPUT\n                            dispatch(\n                                'REQUEST_PREPARE_OUTPUT',\n                                {\n                                    query: id,\n                                    item,\n                                    success: file => {\n                                        dispatch('DID_PREPARE_OUTPUT', { id, file });\n                                        loadComplete();\n                                    },\n                                },\n                                true\n                            );\n\n                            return;\n                        }\n\n                        loadComplete();\n                    }\n                );\n            };\n\n            // item loaded, allow plugins to\n            // - read data (quickly)\n            // - add metadata\n            applyFilterChain('DID_LOAD_ITEM', item, { query, dispatch })\n                .then(() => {\n                    optionalPromise(query('GET_BEFORE_ADD_FILE'), createItemAPI(item)).then(\n                        handleAdd\n                    );\n                })\n                .catch(e => {\n                    if (!e || !e.error || !e.status) return handleAdd(false);\n                    dispatch('DID_THROW_ITEM_INVALID', {\n                        id,\n                        error: e.error,\n                        status: e.status,\n                    });\n                });\n        });\n\n        item.on('process-start', () => {\n            dispatch('DID_START_ITEM_PROCESSING', { id });\n        });\n\n        item.on('process-progress', progress => {\n            dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', { id, progress });\n        });\n\n        item.on('process-error', error => {\n            dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n                id,\n                error,\n                status: {\n                    main: dynamicLabel(state.options.labelFileProcessingError)(error),\n                    sub: state.options.labelTapToRetry,\n                },\n            });\n        });\n\n        item.on('process-revert-error', error => {\n            dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n                id,\n                error,\n                status: {\n                    main: dynamicLabel(state.options.labelFileProcessingRevertError)(error),\n                    sub: state.options.labelTapToRetry,\n                },\n            });\n        });\n\n        item.on('process-complete', serverFileReference => {\n            dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                id,\n                error: null,\n                serverFileReference,\n            });\n            dispatch('DID_DEFINE_VALUE', { id, value: serverFileReference });\n        });\n\n        item.on('process-abort', () => {\n            dispatch('DID_ABORT_ITEM_PROCESSING', { id });\n        });\n\n        item.on('process-revert', () => {\n            dispatch('DID_REVERT_ITEM_PROCESSING', { id });\n            dispatch('DID_DEFINE_VALUE', { id, value: null });\n        });\n\n        // let view know the item has been inserted\n        dispatch('DID_ADD_ITEM', { id, index, interactionMethod });\n\n        listUpdated(dispatch, state);\n\n        // start loading the source\n        const { url, load, restore, fetch } = state.options.server || {};\n\n        item.load(\n            source,\n\n            // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n            createFileLoader(\n                origin === FileOrigin.INPUT\n                    ? // input, if is remote, see if should use custom fetch, else use default fetchBlob\n                      isString(source) && isExternalURL(source)\n                        ? fetch\n                            ? createFetchFunction(url, fetch)\n                            : fetchBlob // remote url\n                        : fetchBlob // try to fetch url\n                    : // limbo or local\n                    origin === FileOrigin.LIMBO\n                    ? createFetchFunction(url, restore) // limbo\n                    : createFetchFunction(url, load) // local\n            ),\n\n            // called when the file is loaded so it can be piped through the filters\n            (file, success, error) => {\n                // let's process the file\n                applyFilterChain('LOAD_FILE', file, { query })\n                    .then(success)\n                    .catch(error);\n            }\n        );\n    },\n\n    REQUEST_PREPARE_OUTPUT: ({ item, success, failure = () => {} }) => {\n        // error response if item archived\n        const err = {\n            error: createResponse('error', 0, 'Item not found'),\n            file: null,\n        };\n\n        // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n        if (item.archived) return failure(err);\n\n        // allow plugins to alter the file data\n        applyFilterChain('PREPARE_OUTPUT', item.file, { query, item }).then(result => {\n            applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, { query, item }).then(result => {\n                // don't handle archived items, an item could have been archived (load aborted) while being prepared\n                if (item.archived) return failure(err);\n\n                // we done!\n                success(result);\n            });\n        });\n    },\n\n    COMPLETE_LOAD_ITEM: ({ item, data }) => {\n        const { success, source } = data;\n\n        // sort items in list\n        const itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n        if (isFunction(itemInsertLocation) && source) {\n            sortItems(state, itemInsertLocation);\n        }\n\n        // let interface know the item has loaded\n        dispatch('DID_LOAD_ITEM', {\n            id: item.id,\n            error: null,\n            serverFileReference: item.origin === FileOrigin.INPUT ? null : source,\n        });\n\n        // item has been successfully loaded and added to the\n        // list of items so can now be safely returned for use\n        success(createItemAPI(item));\n\n        // if this is a local server file we need to show a different state\n        if (item.origin === FileOrigin.LOCAL) {\n            dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n            return;\n        }\n\n        // if is a temp server file we prevent async upload call here (as the file is already on the server)\n        if (item.origin === FileOrigin.LIMBO) {\n            dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                id: item.id,\n                error: null,\n                serverFileReference: source,\n            });\n\n            dispatch('DID_DEFINE_VALUE', {\n                id: item.id,\n                value: item.serverId || source,\n            });\n            return;\n        }\n\n        // id we are allowed to upload the file immediately, lets do it\n        if (query('IS_ASYNC') && state.options.instantUpload) {\n            dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n        }\n    },\n\n    RETRY_ITEM_LOAD: getItemByQueryFromState(state, item => {\n        // try loading the source one more time\n        item.retryLoad();\n    }),\n\n    REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, (item, success, failure) => {\n        dispatch(\n            'REQUEST_PREPARE_OUTPUT',\n            {\n                query: item.id,\n                item,\n                success: file => {\n                    dispatch('DID_PREPARE_OUTPUT', { id: item.id, file });\n                    success({\n                        file: item,\n                        output: file,\n                    });\n                },\n                failure,\n            },\n            true\n        );\n    }),\n\n    REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, (item, success, failure) => {\n        // cannot be queued (or is already queued)\n        const itemCanBeQueuedForProcessing =\n            // waiting for something\n            item.status === ItemStatus.IDLE ||\n            // processing went wrong earlier\n            item.status === ItemStatus.PROCESSING_ERROR;\n\n        // not ready to be processed\n        if (!itemCanBeQueuedForProcessing) {\n            const processNow = () =>\n                dispatch('REQUEST_ITEM_PROCESSING', { query: item, success, failure });\n\n            const process = () => (document.hidden ? processNow() : setTimeout(processNow, 32));\n\n            // if already done processing or tried to revert but didn't work, try again\n            if (\n                item.status === ItemStatus.PROCESSING_COMPLETE ||\n                item.status === ItemStatus.PROCESSING_REVERT_ERROR\n            ) {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                )\n                    .then(process)\n                    .catch(() => {}); // don't continue with processing if something went wrong\n            } else if (item.status === ItemStatus.PROCESSING) {\n                item.abortProcessing().then(process);\n            }\n\n            return;\n        }\n\n        // already queued for processing\n        if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n        item.requestProcessing();\n\n        dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n        dispatch('PROCESS_ITEM', { query: item, success, failure }, true);\n    }),\n\n    PROCESS_ITEM: getItemByQueryFromState(state, (item, success, failure) => {\n        const maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n        const totalCurrentUploads = query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING).length;\n\n        // queue and wait till queue is freed up\n        if (totalCurrentUploads === maxParallelUploads) {\n            // queue for later processing\n            state.processingQueue.push({\n                id: item.id,\n                success,\n                failure,\n            });\n\n            // stop it!\n            return;\n        }\n\n        // if was not queued or is already processing exit here\n        if (item.status === ItemStatus.PROCESSING) return;\n\n        const processNext = () => {\n            // process queueud items\n            const queueEntry = state.processingQueue.shift();\n\n            // no items left\n            if (!queueEntry) return;\n\n            // get item reference\n            const { id, success, failure } = queueEntry;\n            const itemReference = getItemByQuery(state.items, id);\n\n            // if item was archived while in queue, jump to next\n            if (!itemReference || itemReference.archived) {\n                processNext();\n                return;\n            }\n\n            // process queued item\n            dispatch('PROCESS_ITEM', { query: id, success, failure }, true);\n        };\n\n        // we done function\n        item.onOnce('process-complete', () => {\n            success(createItemAPI(item));\n            processNext();\n\n            // if origin is local, and we're instant uploading, trigger remove of original\n            // as revert will remove file from list\n            const server = state.options.server;\n            const instantUpload = state.options.instantUpload;\n            if (instantUpload && item.origin === FileOrigin.LOCAL && isFunction(server.remove)) {\n                const noop = () => {};\n                item.origin = FileOrigin.LIMBO;\n                state.options.server.remove(item.source, noop, noop);\n            }\n\n            // All items processed? No errors?\n            const allItemsProcessed =\n                query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE).length ===\n                state.items.length;\n            if (allItemsProcessed) {\n                dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n            }\n        });\n\n        // we error function\n        item.onOnce('process-error', error => {\n            failure({ error, file: createItemAPI(item) });\n            processNext();\n        });\n\n        // start file processing\n        const options = state.options;\n        item.process(\n            createFileProcessor(\n                createProcessorFunction(options.server.url, options.server.process, options.name, {\n                    chunkTransferId: item.transferId,\n                    chunkServer: options.server.patch,\n                    chunkUploads: options.chunkUploads,\n                    chunkForce: options.chunkForce,\n                    chunkSize: options.chunkSize,\n                    chunkRetryDelays: options.chunkRetryDelays,\n                }),\n                {\n                    allowMinimumUploadDuration: query('GET_ALLOW_MINIMUM_UPLOAD_DURATION'),\n                }\n            ),\n            // called when the file is about to be processed so it can be piped through the transform filters\n            (file, success, error) => {\n                // allow plugins to alter the file data\n                applyFilterChain('PREPARE_OUTPUT', file, { query, item })\n                    .then(file => {\n                        dispatch('DID_PREPARE_OUTPUT', { id: item.id, file });\n\n                        success(file);\n                    })\n                    .catch(error);\n            }\n        );\n    }),\n\n    RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, item => {\n        dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n    }),\n\n    REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, item => {\n        optionalPromise(query('GET_BEFORE_REMOVE_FILE'), createItemAPI(item)).then(shouldRemove => {\n            if (!shouldRemove) {\n                return;\n            }\n            dispatch('REMOVE_ITEM', { query: item });\n        });\n    }),\n\n    RELEASE_ITEM: getItemByQueryFromState(state, item => {\n        item.release();\n    }),\n\n    REMOVE_ITEM: getItemByQueryFromState(state, (item, success, failure, options) => {\n        const removeFromView = () => {\n            // get id reference\n            const id = item.id;\n\n            // archive the item, this does not remove it from the list\n            getItemById(state.items, id).archive();\n\n            // tell the view the item has been removed\n            dispatch('DID_REMOVE_ITEM', { error: null, id, item });\n\n            // now the list has been modified\n            listUpdated(dispatch, state);\n\n            // correctly removed\n            success(createItemAPI(item));\n        };\n\n        // if this is a local file and the `server.remove` function has been configured,\n        // send source there so dev can remove file from server\n        const server = state.options.server;\n        if (\n            item.origin === FileOrigin.LOCAL &&\n            server &&\n            isFunction(server.remove) &&\n            options.remove !== false\n        ) {\n            dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n            server.remove(\n                item.source,\n                () => removeFromView(),\n                status => {\n                    dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                        id: item.id,\n                        error: createResponse('error', 0, status, null),\n                        status: {\n                            main: dynamicLabel(state.options.labelFileRemoveError)(status),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                }\n            );\n        } else {\n            // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n            if (\n                (options.revert && item.origin !== FileOrigin.LOCAL && item.serverId !== null) ||\n                // if chunked uploads are enabled and we're uploading in chunks for this specific file\n                // or if the file isn't big enough for chunked uploads but chunkForce is set then call\n                // revert before removing from the view...\n                (state.options.chunkUploads && item.file.size > state.options.chunkSize) ||\n                (state.options.chunkUploads && state.options.chunkForce)\n            ) {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                );\n            }\n\n            // can now safely remove from view\n            removeFromView();\n        }\n    }),\n\n    ABORT_ITEM_LOAD: getItemByQueryFromState(state, item => {\n        item.abortLoad();\n    }),\n\n    ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, item => {\n        // test if is already processed\n        if (item.serverId) {\n            dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n            return;\n        }\n\n        // abort\n        item.abortProcessing().then(() => {\n            const shouldRemove = state.options.instantUpload;\n            if (shouldRemove) {\n                dispatch('REMOVE_ITEM', { query: item.id });\n            }\n        });\n    }),\n\n    REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, item => {\n        // not instant uploading, revert immediately\n        if (!state.options.instantUpload) {\n            dispatch('REVERT_ITEM_PROCESSING', { query: item });\n            return;\n        }\n\n        // if we're instant uploading the file will also be removed if we revert,\n        // so if a before remove file hook is defined we need to run it now\n        const handleRevert = shouldRevert => {\n            if (!shouldRevert) return;\n            dispatch('REVERT_ITEM_PROCESSING', { query: item });\n        };\n\n        const fn = query('GET_BEFORE_REMOVE_FILE');\n        if (!fn) {\n            return handleRevert(true);\n        }\n\n        const requestRemoveResult = fn(createItemAPI(item));\n        if (requestRemoveResult == null) {\n            // undefined or null\n            return handleRevert(true);\n        }\n\n        if (typeof requestRemoveResult === 'boolean') {\n            return handleRevert(requestRemoveResult);\n        }\n\n        if (typeof requestRemoveResult.then === 'function') {\n            requestRemoveResult.then(handleRevert);\n        }\n    }),\n\n    REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, item => {\n        item.revert(\n            createRevertFunction(state.options.server.url, state.options.server.revert),\n            query('GET_FORCE_REVERT')\n        )\n            .then(() => {\n                const shouldRemove = state.options.instantUpload || isMockItem(item);\n                if (shouldRemove) {\n                    dispatch('REMOVE_ITEM', { query: item.id });\n                }\n            })\n            .catch(() => {});\n    }),\n\n    SET_OPTIONS: ({ options }) => {\n        // get all keys passed\n        const optionKeys = Object.keys(options);\n\n        // get prioritized keyed to include (remove once not in options object)\n        const prioritizedOptionKeys = PrioritizedOptions.filter(key => optionKeys.includes(key));\n\n        // order the keys, prioritized first, then rest\n        const orderedOptionKeys = [\n            // add prioritized first if passed to options, else remove\n            ...prioritizedOptionKeys,\n\n            // prevent duplicate keys\n            ...Object.keys(options).filter(key => !prioritizedOptionKeys.includes(key)),\n        ];\n\n        // dispatch set event for each option\n        orderedOptionKeys.forEach(key => {\n            dispatch(`SET_${fromCamels(key, '_').toUpperCase()}`, {\n                value: options[key],\n            });\n        });\n    },\n});\n\nconst PrioritizedOptions = [\n    'server', // must be processed before \"files\"\n];\n\nconst formatFilename = name => name;\n\nconst createElement$1 = tagName => {\n    return document.createElement(tagName);\n};\n\nconst text = (node, value) => {\n    let textNode = node.childNodes[0];\n    if (!textNode) {\n        textNode = document.createTextNode(value);\n        node.appendChild(textNode);\n    } else if (value !== textNode.nodeValue) {\n        textNode.nodeValue = value;\n    }\n};\n\nconst polarToCartesian = (centerX, centerY, radius, angleInDegrees) => {\n    const angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n    return {\n        x: centerX + radius * Math.cos(angleInRadians),\n        y: centerY + radius * Math.sin(angleInRadians),\n    };\n};\n\nconst describeArc = (x, y, radius, startAngle, endAngle, arcSweep) => {\n    const start = polarToCartesian(x, y, radius, endAngle);\n    const end = polarToCartesian(x, y, radius, startAngle);\n    return ['M', start.x, start.y, 'A', radius, radius, 0, arcSweep, 0, end.x, end.y].join(' ');\n};\n\nconst percentageArc = (x, y, radius, from, to) => {\n    let arcSweep = 1;\n    if (to > from && to - from <= 0.5) {\n        arcSweep = 0;\n    }\n    if (from > to && from - to >= 0.5) {\n        arcSweep = 0;\n    }\n    return describeArc(\n        x,\n        y,\n        radius,\n        Math.min(0.9999, from) * 360,\n        Math.min(0.9999, to) * 360,\n        arcSweep\n    );\n};\n\nconst create = ({ root, props }) => {\n    // start at 0\n    props.spin = false;\n    props.progress = 0;\n    props.opacity = 0;\n\n    // svg\n    const svg = createElement('svg');\n    root.ref.path = createElement('path', {\n        'stroke-width': 2,\n        'stroke-linecap': 'round',\n    });\n    svg.appendChild(root.ref.path);\n\n    root.ref.svg = svg;\n\n    root.appendChild(svg);\n};\n\nconst write = ({ root, props }) => {\n    if (props.opacity === 0) {\n        return;\n    }\n\n    if (props.align) {\n        root.element.dataset.align = props.align;\n    }\n\n    // get width of stroke\n    const ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n    // calculate size of ring\n    const size = root.rect.element.width * 0.5;\n\n    // ring state\n    let ringFrom = 0;\n    let ringTo = 0;\n\n    // now in busy mode\n    if (props.spin) {\n        ringFrom = 0;\n        ringTo = 0.5;\n    } else {\n        ringFrom = 0;\n        ringTo = props.progress;\n    }\n\n    // get arc path\n    const coordinates = percentageArc(size, size, size - ringStrokeWidth, ringFrom, ringTo);\n\n    // update progress bar\n    attr(root.ref.path, 'd', coordinates);\n\n    // hide while contains 0 value\n    attr(root.ref.path, 'stroke-opacity', props.spin || props.progress > 0 ? 1 : 0);\n};\n\nconst progressIndicator = createView({\n    tag: 'div',\n    name: 'progress-indicator',\n    ignoreRectUpdate: true,\n    ignoreRect: true,\n    create,\n    write,\n    mixins: {\n        apis: ['progress', 'spin', 'align'],\n        styles: ['opacity'],\n        animations: {\n            opacity: { type: 'tween', duration: 500 },\n            progress: {\n                type: 'spring',\n                stiffness: 0.95,\n                damping: 0.65,\n                mass: 10,\n            },\n        },\n    },\n});\n\nconst create$1 = ({ root, props }) => {\n    root.element.innerHTML = (props.icon || '') + `<span>${props.label}</span>`;\n\n    props.isDisabled = false;\n};\n\nconst write$1 = ({ root, props }) => {\n    const { isDisabled } = props;\n    const shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n    if (shouldDisable && !isDisabled) {\n        props.isDisabled = true;\n        attr(root.element, 'disabled', 'disabled');\n    } else if (!shouldDisable && isDisabled) {\n        props.isDisabled = false;\n        root.element.removeAttribute('disabled');\n    }\n};\n\nconst fileActionButton = createView({\n    tag: 'button',\n    attributes: {\n        type: 'button',\n    },\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'file-action-button',\n    mixins: {\n        apis: ['label'],\n        styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n        animations: {\n            scaleX: 'spring',\n            scaleY: 'spring',\n            translateX: 'spring',\n            translateY: 'spring',\n            opacity: { type: 'tween', duration: 250 },\n        },\n        listeners: true,\n    },\n    create: create$1,\n    write: write$1,\n});\n\nconst toNaturalFileSize = (bytes, decimalSeparator = '.', base = 1000, options = {}) => {\n    const {\n        labelBytes = 'bytes',\n        labelKilobytes = 'KB',\n        labelMegabytes = 'MB',\n        labelGigabytes = 'GB',\n    } = options;\n\n    // no negative byte sizes\n    bytes = Math.round(Math.abs(bytes));\n\n    const KB = base;\n    const MB = base * base;\n    const GB = base * base * base;\n\n    // just bytes\n    if (bytes < KB) {\n        return `${bytes} ${labelBytes}`;\n    }\n\n    // kilobytes\n    if (bytes < MB) {\n        return `${Math.floor(bytes / KB)} ${labelKilobytes}`;\n    }\n\n    // megabytes\n    if (bytes < GB) {\n        return `${removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator)} ${labelMegabytes}`;\n    }\n\n    // gigabytes\n    return `${removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator)} ${labelGigabytes}`;\n};\n\nconst removeDecimalsWhenZero = (value, decimalCount, separator) => {\n    return value\n        .toFixed(decimalCount)\n        .split('.')\n        .filter(part => part !== '0')\n        .join(separator);\n};\n\nconst create$2 = ({ root, props }) => {\n    // filename\n    const fileName = createElement$1('span');\n    fileName.className = 'filepond--file-info-main';\n    // hide for screenreaders\n    // the file is contained in a fieldset with legend that contains the filename\n    // no need to read it twice\n    attr(fileName, 'aria-hidden', 'true');\n    root.appendChild(fileName);\n    root.ref.fileName = fileName;\n\n    // filesize\n    const fileSize = createElement$1('span');\n    fileSize.className = 'filepond--file-info-sub';\n    root.appendChild(fileSize);\n    root.ref.fileSize = fileSize;\n\n    // set initial values\n    text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n    text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n};\n\nconst updateFile = ({ root, props }) => {\n    text(\n        root.ref.fileSize,\n        toNaturalFileSize(\n            root.query('GET_ITEM_SIZE', props.id),\n            '.',\n            root.query('GET_FILE_SIZE_BASE'),\n            root.query('GET_FILE_SIZE_LABELS', root.query)\n        )\n    );\n    text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n};\n\nconst updateFileSizeOnError = ({ root, props }) => {\n    // if size is available don't fallback to unknown size message\n    if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n        updateFile({ root, props });\n        return;\n    }\n\n    text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n};\n\nconst fileInfo = createView({\n    name: 'file-info',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n        DID_LOAD_ITEM: updateFile,\n        DID_UPDATE_ITEM_META: updateFile,\n        DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n        DID_THROW_ITEM_INVALID: updateFileSizeOnError,\n    }),\n    didCreateView: root => {\n        applyFilters('CREATE_VIEW', { ...root, view: root });\n    },\n    create: create$2,\n    mixins: {\n        styles: ['translateX', 'translateY'],\n        animations: {\n            translateX: 'spring',\n            translateY: 'spring',\n        },\n    },\n});\n\nconst toPercentage = value => Math.round(value * 100);\n\nconst create$3 = ({ root }) => {\n    // main status\n    const main = createElement$1('span');\n    main.className = 'filepond--file-status-main';\n    root.appendChild(main);\n    root.ref.main = main;\n\n    // sub status\n    const sub = createElement$1('span');\n    sub.className = 'filepond--file-status-sub';\n    root.appendChild(sub);\n    root.ref.sub = sub;\n\n    didSetItemLoadProgress({ root, action: { progress: null } });\n};\n\nconst didSetItemLoadProgress = ({ root, action }) => {\n    const title =\n        action.progress === null\n            ? root.query('GET_LABEL_FILE_LOADING')\n            : `${root.query('GET_LABEL_FILE_LOADING')} ${toPercentage(action.progress)}%`;\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n};\n\nconst didSetItemProcessProgress = ({ root, action }) => {\n    const title =\n        action.progress === null\n            ? root.query('GET_LABEL_FILE_PROCESSING')\n            : `${root.query('GET_LABEL_FILE_PROCESSING')} ${toPercentage(action.progress)}%`;\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n};\n\nconst didRequestItemProcessing = ({ root }) => {\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n};\n\nconst didAbortItemProcessing = ({ root }) => {\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n};\n\nconst didCompleteItemProcessing = ({ root }) => {\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n};\n\nconst clear = ({ root }) => {\n    text(root.ref.main, '');\n    text(root.ref.sub, '');\n};\n\nconst error = ({ root, action }) => {\n    text(root.ref.main, action.status.main);\n    text(root.ref.sub, action.status.sub);\n};\n\nconst fileStatus = createView({\n    name: 'file-status',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n        DID_LOAD_ITEM: clear,\n        DID_REVERT_ITEM_PROCESSING: clear,\n        DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n        DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n        DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n        DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n        DID_THROW_ITEM_LOAD_ERROR: error,\n        DID_THROW_ITEM_INVALID: error,\n        DID_THROW_ITEM_PROCESSING_ERROR: error,\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n        DID_THROW_ITEM_REMOVE_ERROR: error,\n    }),\n    didCreateView: root => {\n        applyFilters('CREATE_VIEW', { ...root, view: root });\n    },\n    create: create$3,\n    mixins: {\n        styles: ['translateX', 'translateY', 'opacity'],\n        animations: {\n            opacity: { type: 'tween', duration: 250 },\n            translateX: 'spring',\n            translateY: 'spring',\n        },\n    },\n});\n\n/**\n * Button definitions for the file view\n */\n\nconst Buttons = {\n    AbortItemLoad: {\n        label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n        action: 'ABORT_ITEM_LOAD',\n        className: 'filepond--action-abort-item-load',\n        align: 'LOAD_INDICATOR_POSITION', // right\n    },\n    RetryItemLoad: {\n        label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n        action: 'RETRY_ITEM_LOAD',\n        icon: 'GET_ICON_RETRY',\n        className: 'filepond--action-retry-item-load',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n    RemoveItem: {\n        label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n        action: 'REQUEST_REMOVE_ITEM',\n        icon: 'GET_ICON_REMOVE',\n        className: 'filepond--action-remove-item',\n        align: 'BUTTON_REMOVE_ITEM_POSITION', // left\n    },\n    ProcessItem: {\n        label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n        action: 'REQUEST_ITEM_PROCESSING',\n        icon: 'GET_ICON_PROCESS',\n        className: 'filepond--action-process-item',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n    AbortItemProcessing: {\n        label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n        action: 'ABORT_ITEM_PROCESSING',\n        className: 'filepond--action-abort-item-processing',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n    RetryItemProcessing: {\n        label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n        action: 'RETRY_ITEM_PROCESSING',\n        icon: 'GET_ICON_RETRY',\n        className: 'filepond--action-retry-item-processing',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n    RevertItemProcessing: {\n        label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n        action: 'REQUEST_REVERT_ITEM_PROCESSING',\n        icon: 'GET_ICON_UNDO',\n        className: 'filepond--action-revert-item-processing',\n        align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n    },\n};\n\n// make a list of buttons, we can then remove buttons from this list if they're disabled\nconst ButtonKeys = [];\nforin(Buttons, key => {\n    ButtonKeys.push(key);\n});\n\nconst calculateFileInfoOffset = root => {\n    if (getRemoveIndicatorAligment(root) === 'right') return 0;\n    const buttonRect = root.ref.buttonRemoveItem.rect.element;\n    return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n};\n\nconst calculateButtonWidth = root => {\n    const buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n    return buttonRect.width;\n};\n\n// Force on full pixels so text stays crips\nconst calculateFileVerticalCenterOffset = root =>\n    Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\nconst calculateFileHorizontalCenterOffset = root =>\n    Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n\nconst getLoadIndicatorAlignment = root => root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\nconst getProcessIndicatorAlignment = root => root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\nconst getRemoveIndicatorAligment = root => root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n\nconst DefaultStyle = {\n    buttonAbortItemLoad: { opacity: 0 },\n    buttonRetryItemLoad: { opacity: 0 },\n    buttonRemoveItem: { opacity: 0 },\n    buttonProcessItem: { opacity: 0 },\n    buttonAbortItemProcessing: { opacity: 0 },\n    buttonRetryItemProcessing: { opacity: 0 },\n    buttonRevertItemProcessing: { opacity: 0 },\n    loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n    processProgressIndicator: { opacity: 0, align: getProcessIndicatorAlignment },\n    processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n    info: { translateX: 0, translateY: 0, opacity: 0 },\n    status: { translateX: 0, translateY: 0, opacity: 0 },\n};\n\nconst IdleStyle = {\n    buttonRemoveItem: { opacity: 1 },\n    buttonProcessItem: { opacity: 1 },\n    info: { translateX: calculateFileInfoOffset },\n    status: { translateX: calculateFileInfoOffset },\n};\n\nconst ProcessingStyle = {\n    buttonAbortItemProcessing: { opacity: 1 },\n    processProgressIndicator: { opacity: 1 },\n    status: { opacity: 1 },\n};\n\nconst StyleMap = {\n    DID_THROW_ITEM_INVALID: {\n        buttonRemoveItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { translateX: calculateFileInfoOffset, opacity: 1 },\n    },\n    DID_START_ITEM_LOAD: {\n        buttonAbortItemLoad: { opacity: 1 },\n        loadProgressIndicator: { opacity: 1 },\n        status: { opacity: 1 },\n    },\n    DID_THROW_ITEM_LOAD_ERROR: {\n        buttonRetryItemLoad: { opacity: 1 },\n        buttonRemoveItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { opacity: 1 },\n    },\n    DID_START_ITEM_REMOVE: {\n        processProgressIndicator: { opacity: 1, align: getRemoveIndicatorAligment },\n        info: { translateX: calculateFileInfoOffset },\n        status: { opacity: 0 },\n    },\n    DID_THROW_ITEM_REMOVE_ERROR: {\n        processProgressIndicator: { opacity: 0, align: getRemoveIndicatorAligment },\n        buttonRemoveItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { opacity: 1, translateX: calculateFileInfoOffset },\n    },\n    DID_LOAD_ITEM: IdleStyle,\n    DID_LOAD_LOCAL_ITEM: {\n        buttonRemoveItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { translateX: calculateFileInfoOffset },\n    },\n    DID_START_ITEM_PROCESSING: ProcessingStyle,\n    DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n    DID_COMPLETE_ITEM_PROCESSING: {\n        buttonRevertItemProcessing: { opacity: 1 },\n        info: { opacity: 1 },\n        status: { opacity: 1 },\n    },\n    DID_THROW_ITEM_PROCESSING_ERROR: {\n        buttonRemoveItem: { opacity: 1 },\n        buttonRetryItemProcessing: { opacity: 1 },\n        status: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n    },\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n        buttonRevertItemProcessing: { opacity: 1 },\n        status: { opacity: 1 },\n        info: { opacity: 1 },\n    },\n    DID_ABORT_ITEM_PROCESSING: {\n        buttonRemoveItem: { opacity: 1 },\n        buttonProcessItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { opacity: 1 },\n    },\n    DID_REVERT_ITEM_PROCESSING: IdleStyle,\n};\n\n// complete indicator view\nconst processingCompleteIndicatorView = createView({\n    create: ({ root }) => {\n        root.element.innerHTML = root.query('GET_ICON_DONE');\n    },\n    name: 'processing-complete-indicator',\n    ignoreRect: true,\n    mixins: {\n        styles: ['scaleX', 'scaleY', 'opacity'],\n        animations: {\n            scaleX: 'spring',\n            scaleY: 'spring',\n            opacity: { type: 'tween', duration: 250 },\n        },\n    },\n});\n\n/**\n * Creates the file view\n */\nconst create$4 = ({ root, props }) => {\n    // copy Buttons object\n    const LocalButtons = Object.keys(Buttons).reduce((prev, curr) => {\n        prev[curr] = { ...Buttons[curr] };\n        return prev;\n    }, {});\n\n    const { id } = props;\n\n    // allow reverting upload\n    const allowRevert = root.query('GET_ALLOW_REVERT');\n\n    // allow remove file\n    const allowRemove = root.query('GET_ALLOW_REMOVE');\n\n    // allow processing upload\n    const allowProcess = root.query('GET_ALLOW_PROCESS');\n\n    // is instant uploading, need this to determine the icon of the undo button\n    const instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n    // is async set up\n    const isAsync = root.query('IS_ASYNC');\n\n    // should align remove item buttons\n    const alignRemoveItemButton = root.query('GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN');\n\n    // enabled buttons array\n    let buttonFilter;\n    if (isAsync) {\n        if (allowProcess && !allowRevert) {\n            // only remove revert button\n            buttonFilter = key => !/RevertItemProcessing/.test(key);\n        } else if (!allowProcess && allowRevert) {\n            // only remove process button\n            buttonFilter = key => !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(key);\n        } else if (!allowProcess && !allowRevert) {\n            // remove all process buttons\n            buttonFilter = key => !/Process/.test(key);\n        }\n    } else {\n        // no process controls available\n        buttonFilter = key => !/Process/.test(key);\n    }\n\n    const enabledButtons = buttonFilter ? ButtonKeys.filter(buttonFilter) : ButtonKeys.concat();\n\n    // update icon and label for revert button when instant uploading\n    if (instantUpload && allowRevert) {\n        LocalButtons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n        LocalButtons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n    }\n\n    // remove last button (revert) if not allowed\n    if (isAsync && !allowRevert) {\n        const map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n        map.info.translateX = calculateFileHorizontalCenterOffset;\n        map.info.translateY = calculateFileVerticalCenterOffset;\n        map.status.translateY = calculateFileVerticalCenterOffset;\n        map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    // should align center\n    if (isAsync && !allowProcess) {\n        [\n            'DID_START_ITEM_PROCESSING',\n            'DID_REQUEST_ITEM_PROCESSING',\n            'DID_UPDATE_ITEM_PROCESS_PROGRESS',\n            'DID_THROW_ITEM_PROCESSING_ERROR',\n        ].forEach(key => {\n            StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n        });\n        StyleMap['DID_THROW_ITEM_PROCESSING_ERROR'].status.translateX = calculateButtonWidth;\n    }\n\n    // move remove button to right\n    if (alignRemoveItemButton && allowRevert) {\n        LocalButtons['RevertItemProcessing'].align = 'BUTTON_REMOVE_ITEM_POSITION';\n        const map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n        map.info.translateX = calculateFileInfoOffset;\n        map.status.translateY = calculateFileVerticalCenterOffset;\n        map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    // show/hide RemoveItem button\n    if (!allowRemove) {\n        LocalButtons['RemoveItem'].disabled = true;\n    }\n\n    // create the button views\n    forin(LocalButtons, (key, definition) => {\n        // create button\n        const buttonView = root.createChildView(fileActionButton, {\n            label: root.query(definition.label),\n            icon: root.query(definition.icon),\n            opacity: 0,\n        });\n\n        // should be appended?\n        if (enabledButtons.includes(key)) {\n            root.appendChildView(buttonView);\n        }\n\n        // toggle\n        if (definition.disabled) {\n            buttonView.element.setAttribute('disabled', 'disabled');\n            buttonView.element.setAttribute('hidden', 'hidden');\n        }\n\n        // add position attribute\n        buttonView.element.dataset.align = root.query(`GET_STYLE_${definition.align}`);\n\n        // add class\n        buttonView.element.classList.add(definition.className);\n\n        // handle interactions\n        buttonView.on('click', e => {\n            e.stopPropagation();\n            if (definition.disabled) return;\n            root.dispatch(definition.action, { query: id });\n        });\n\n        // set reference\n        root.ref[`button${key}`] = buttonView;\n    });\n\n    // checkmark\n    root.ref.processingCompleteIndicator = root.appendChildView(\n        root.createChildView(processingCompleteIndicatorView)\n    );\n    root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n        `GET_STYLE_BUTTON_PROCESS_ITEM_POSITION`\n    );\n\n    // create file info view\n    root.ref.info = root.appendChildView(root.createChildView(fileInfo, { id }));\n\n    // create file status view\n    root.ref.status = root.appendChildView(root.createChildView(fileStatus, { id }));\n\n    // add progress indicators\n    const loadIndicatorView = root.appendChildView(\n        root.createChildView(progressIndicator, {\n            opacity: 0,\n            align: root.query(`GET_STYLE_LOAD_INDICATOR_POSITION`),\n        })\n    );\n    loadIndicatorView.element.classList.add('filepond--load-indicator');\n    root.ref.loadProgressIndicator = loadIndicatorView;\n\n    const progressIndicatorView = root.appendChildView(\n        root.createChildView(progressIndicator, {\n            opacity: 0,\n            align: root.query(`GET_STYLE_PROGRESS_INDICATOR_POSITION`),\n        })\n    );\n    progressIndicatorView.element.classList.add('filepond--process-indicator');\n    root.ref.processProgressIndicator = progressIndicatorView;\n\n    // current active styles\n    root.ref.activeStyles = [];\n};\n\nconst write$2 = ({ root, actions, props }) => {\n    // route actions\n    route({ root, actions, props });\n\n    // select last state change action\n    let action = actions\n        .concat()\n        .filter(action => /^DID_/.test(action.type))\n        .reverse()\n        .find(action => StyleMap[action.type]);\n\n    // a new action happened, let's get the matching styles\n    if (action) {\n        // define new active styles\n        root.ref.activeStyles = [];\n\n        const stylesToApply = StyleMap[action.type];\n        forin(DefaultStyle, (name, defaultStyles) => {\n            // get reference to control\n            const control = root.ref[name];\n\n            // loop over all styles for this control\n            forin(defaultStyles, (key, defaultValue) => {\n                const value =\n                    stylesToApply[name] && typeof stylesToApply[name][key] !== 'undefined'\n                        ? stylesToApply[name][key]\n                        : defaultValue;\n                root.ref.activeStyles.push({ control, key, value });\n            });\n        });\n    }\n\n    // apply active styles to element\n    root.ref.activeStyles.forEach(({ control, key, value }) => {\n        control[key] = typeof value === 'function' ? value(root) : value;\n    });\n};\n\nconst route = createRoute({\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: ({ root, action }) => {\n        root.ref.buttonAbortItemProcessing.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: ({ root, action }) => {\n        root.ref.buttonAbortItemLoad.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: ({ root, action }) => {\n        root.ref.buttonAbortItemRemoval.label = action.value;\n    },\n    DID_REQUEST_ITEM_PROCESSING: ({ root }) => {\n        root.ref.processProgressIndicator.spin = true;\n        root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_LOAD: ({ root }) => {\n        root.ref.loadProgressIndicator.spin = true;\n        root.ref.loadProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_REMOVE: ({ root }) => {\n        root.ref.processProgressIndicator.spin = true;\n        root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_UPDATE_ITEM_LOAD_PROGRESS: ({ root, action }) => {\n        root.ref.loadProgressIndicator.spin = false;\n        root.ref.loadProgressIndicator.progress = action.progress;\n    },\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: ({ root, action }) => {\n        root.ref.processProgressIndicator.spin = false;\n        root.ref.processProgressIndicator.progress = action.progress;\n    },\n});\n\nconst file = createView({\n    create: create$4,\n    write: write$2,\n    didCreateView: root => {\n        applyFilters('CREATE_VIEW', { ...root, view: root });\n    },\n    name: 'file',\n});\n\n/**\n * Creates the file view\n */\nconst create$5 = ({ root, props }) => {\n    // filename\n    root.ref.fileName = createElement$1('legend');\n    root.appendChild(root.ref.fileName);\n\n    // file appended\n    root.ref.file = root.appendChildView(root.createChildView(file, { id: props.id }));\n\n    // data has moved to data.js\n    root.ref.data = false;\n};\n\n/**\n * Data storage\n */\nconst didLoadItem = ({ root, props }) => {\n    // updates the legend of the fieldset so screenreaders can better group buttons\n    text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n};\n\nconst fileWrapper = createView({\n    create: create$5,\n    ignoreRect: true,\n    write: createRoute({\n        DID_LOAD_ITEM: didLoadItem,\n    }),\n    didCreateView: root => {\n        applyFilters('CREATE_VIEW', { ...root, view: root });\n    },\n    tag: 'fieldset',\n    name: 'file-wrapper',\n});\n\nconst PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\nconst create$6 = ({ root, props }) => {\n    [\n        {\n            name: 'top',\n        },\n        {\n            name: 'center',\n            props: {\n                translateY: null,\n                scaleY: null,\n            },\n            mixins: {\n                animations: {\n                    scaleY: PANEL_SPRING_PROPS,\n                },\n                styles: ['translateY', 'scaleY'],\n            },\n        },\n        {\n            name: 'bottom',\n            props: {\n                translateY: null,\n            },\n            mixins: {\n                animations: {\n                    translateY: PANEL_SPRING_PROPS,\n                },\n                styles: ['translateY'],\n            },\n        },\n    ].forEach(section => {\n        createSection(root, section, props.name);\n    });\n\n    root.element.classList.add(`filepond--${props.name}`);\n\n    root.ref.scalable = null;\n};\n\nconst createSection = (root, section, className) => {\n    const viewConstructor = createView({\n        name: `panel-${section.name} filepond--${className}`,\n        mixins: section.mixins,\n        ignoreRectUpdate: true,\n    });\n\n    const view = root.createChildView(viewConstructor, section.props);\n\n    root.ref[section.name] = root.appendChildView(view);\n};\n\nconst write$3 = ({ root, props }) => {\n    // update scalable state\n    if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n        root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n        root.element.dataset.scalable = root.ref.scalable;\n    }\n\n    // no height, can't set\n    if (!props.height) return;\n\n    // get child rects\n    const topRect = root.ref.top.rect.element;\n    const bottomRect = root.ref.bottom.rect.element;\n\n    // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n    const height = Math.max(topRect.height + bottomRect.height, props.height);\n\n    // offset center part\n    root.ref.center.translateY = topRect.height;\n\n    // scale center part\n    // use math ceil to prevent transparent lines because of rounding errors\n    root.ref.center.scaleY = (height - topRect.height - bottomRect.height) / 100;\n\n    // offset bottom part\n    root.ref.bottom.translateY = height - bottomRect.height;\n};\n\nconst panel = createView({\n    name: 'panel',\n    read: ({ root, props }) => (props.heightCurrent = root.ref.bottom.translateY),\n    write: write$3,\n    create: create$6,\n    ignoreRect: true,\n    mixins: {\n        apis: ['height', 'heightCurrent', 'scalable'],\n    },\n});\n\nconst createDragHelper = items => {\n    const itemIds = items.map(item => item.id);\n    let prevIndex = undefined;\n    return {\n        setIndex: index => {\n            prevIndex = index;\n        },\n        getIndex: () => prevIndex,\n        getItemIndex: item => itemIds.indexOf(item.id),\n    };\n};\n\nconst ITEM_TRANSLATE_SPRING = {\n    type: 'spring',\n    stiffness: 0.75,\n    damping: 0.45,\n    mass: 10,\n};\n\nconst ITEM_SCALE_SPRING = 'spring';\n\nconst StateMap = {\n    DID_START_ITEM_LOAD: 'busy',\n    DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n    DID_THROW_ITEM_INVALID: 'load-invalid',\n    DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n    DID_LOAD_ITEM: 'idle',\n    DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n    DID_START_ITEM_REMOVE: 'busy',\n    DID_START_ITEM_PROCESSING: 'busy processing',\n    DID_REQUEST_ITEM_PROCESSING: 'busy processing',\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n    DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n    DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n    DID_ABORT_ITEM_PROCESSING: 'cancelled',\n    DID_REVERT_ITEM_PROCESSING: 'idle',\n};\n\n/**\n * Creates the file view\n */\nconst create$7 = ({ root, props }) => {\n    // select\n    root.ref.handleClick = e => root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n\n    // set id\n    root.element.id = `filepond--item-${props.id}`;\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // file view\n    root.ref.container = root.appendChildView(root.createChildView(fileWrapper, { id: props.id }));\n\n    // file panel\n    root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'item-panel' }));\n\n    // default start height\n    root.ref.panel.height = null;\n\n    // by default not marked for removal\n    props.markedForRemoval = false;\n\n    // if not allowed to reorder file items, exit here\n    if (!root.query('GET_ALLOW_REORDER')) return;\n\n    // set to idle so shows grab cursor\n    root.element.dataset.dragState = 'idle';\n\n    const grab = e => {\n        if (!e.isPrimary) return;\n\n        let removedActivateListener = false;\n\n        const origin = {\n            x: e.pageX,\n            y: e.pageY,\n        };\n\n        props.dragOrigin = {\n            x: root.translateX,\n            y: root.translateY,\n        };\n\n        props.dragCenter = {\n            x: e.offsetX,\n            y: e.offsetY,\n        };\n\n        const dragState = createDragHelper(root.query('GET_ACTIVE_ITEMS'));\n\n        root.dispatch('DID_GRAB_ITEM', { id: props.id, dragState });\n\n        const drag = e => {\n            if (!e.isPrimary) return;\n\n            e.stopPropagation();\n            e.preventDefault();\n\n            props.dragOffset = {\n                x: e.pageX - origin.x,\n                y: e.pageY - origin.y,\n            };\n\n            // if dragged stop listening to clicks, will re-add when done dragging\n            const dist =\n                props.dragOffset.x * props.dragOffset.x + props.dragOffset.y * props.dragOffset.y;\n            if (dist > 16 && !removedActivateListener) {\n                removedActivateListener = true;\n                root.element.removeEventListener('click', root.ref.handleClick);\n            }\n\n            root.dispatch('DID_DRAG_ITEM', { id: props.id, dragState });\n        };\n\n        const drop = e => {\n            if (!e.isPrimary) return;\n\n            props.dragOffset = {\n                x: e.pageX - origin.x,\n                y: e.pageY - origin.y,\n            };\n\n            reset();\n        };\n\n        const cancel = () => {\n            reset();\n        };\n\n        const reset = () => {\n            document.removeEventListener('pointercancel', cancel);\n            document.removeEventListener('pointermove', drag);\n            document.removeEventListener('pointerup', drop);\n\n            root.dispatch('DID_DROP_ITEM', { id: props.id, dragState });\n\n            // start listening to clicks again\n            if (removedActivateListener) {\n                setTimeout(() => root.element.addEventListener('click', root.ref.handleClick), 0);\n            }\n        };\n\n        document.addEventListener('pointercancel', cancel);\n        document.addEventListener('pointermove', drag);\n        document.addEventListener('pointerup', drop);\n    };\n\n    root.element.addEventListener('pointerdown', grab);\n};\n\nconst route$1 = createRoute({\n    DID_UPDATE_PANEL_HEIGHT: ({ root, action }) => {\n        root.height = action.height;\n    },\n});\n\nconst write$4 = createRoute(\n    {\n        DID_GRAB_ITEM: ({ root, props }) => {\n            props.dragOrigin = {\n                x: root.translateX,\n                y: root.translateY,\n            };\n        },\n        DID_DRAG_ITEM: ({ root }) => {\n            root.element.dataset.dragState = 'drag';\n        },\n        DID_DROP_ITEM: ({ root, props }) => {\n            props.dragOffset = null;\n            props.dragOrigin = null;\n            root.element.dataset.dragState = 'drop';\n        },\n    },\n    ({ root, actions, props, shouldOptimize }) => {\n        if (root.element.dataset.dragState === 'drop') {\n            if (root.scaleX <= 1) {\n                root.element.dataset.dragState = 'idle';\n            }\n        }\n\n        // select last state change action\n        let action = actions\n            .concat()\n            .filter(action => /^DID_/.test(action.type))\n            .reverse()\n            .find(action => StateMap[action.type]);\n\n        // no need to set same state twice\n        if (action && action.type !== props.currentState) {\n            // set current state\n            props.currentState = action.type;\n\n            // set state\n            root.element.dataset.filepondItemState = StateMap[props.currentState] || '';\n        }\n\n        // route actions\n        const aspectRatio =\n            root.query('GET_ITEM_PANEL_ASPECT_RATIO') || root.query('GET_PANEL_ASPECT_RATIO');\n        if (!aspectRatio) {\n            route$1({ root, actions, props });\n            if (!root.height && root.ref.container.rect.element.height > 0) {\n                root.height = root.ref.container.rect.element.height;\n            }\n        } else if (!shouldOptimize) {\n            root.height = root.rect.element.width * aspectRatio;\n        }\n\n        // sync panel height with item height\n        if (shouldOptimize) {\n            root.ref.panel.height = null;\n        }\n\n        root.ref.panel.height = root.height;\n    }\n);\n\nconst item = createView({\n    create: create$7,\n    write: write$4,\n    destroy: ({ root, props }) => {\n        root.element.removeEventListener('click', root.ref.handleClick);\n        root.dispatch('RELEASE_ITEM', { query: props.id });\n    },\n    tag: 'li',\n    name: 'item',\n    mixins: {\n        apis: [\n            'id',\n            'interactionMethod',\n            'markedForRemoval',\n            'spawnDate',\n            'dragCenter',\n            'dragOrigin',\n            'dragOffset',\n        ],\n        styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity', 'height'],\n        animations: {\n            scaleX: ITEM_SCALE_SPRING,\n            scaleY: ITEM_SCALE_SPRING,\n            translateX: ITEM_TRANSLATE_SPRING,\n            translateY: ITEM_TRANSLATE_SPRING,\n            opacity: { type: 'tween', duration: 150 },\n        },\n    },\n});\n\nvar getItemsPerRow = (horizontalSpace, itemWidth) => {\n    // add one pixel leeway, when using percentages for item width total items can be 1.99 per row\n\n    return Math.max(1, Math.floor((horizontalSpace + 1) / itemWidth));\n};\n\nconst getItemIndexByPosition = (view, children, positionInView) => {\n    if (!positionInView) return;\n\n    const horizontalSpace = view.rect.element.width;\n    // const children = view.childViews;\n    const l = children.length;\n    let last = null;\n\n    // -1, don't move items to accomodate (either add to top or bottom)\n    if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n    // let's get the item width\n    const item = children[0];\n    const itemRect = item.rect.element;\n    const itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n    const itemWidth = itemRect.width + itemHorizontalMargin;\n    const itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n        for (let index = 0; index < l; index++) {\n            const child = children[index];\n            const childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n            if (positionInView.top < childMid) {\n                return index;\n            }\n        }\n        return l;\n    }\n\n    // grid\n    const itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n    const itemHeight = itemRect.height + itemVerticalMargin;\n    for (let index = 0; index < l; index++) {\n        const indexX = index % itemsPerRow;\n        const indexY = Math.floor(index / itemsPerRow);\n\n        const offsetX = indexX * itemWidth;\n        const offsetY = indexY * itemHeight;\n\n        const itemTop = offsetY - itemRect.marginTop;\n        const itemRight = offsetX + itemWidth;\n        const itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n        if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n            if (positionInView.left < itemRight) {\n                return index;\n            } else if (index !== l - 1) {\n                last = index;\n            } else {\n                last = null;\n            }\n        }\n    }\n\n    if (last !== null) {\n        return last;\n    }\n\n    return l;\n};\n\nconst dropAreaDimensions = {\n    height: 0,\n    width: 0,\n    get getHeight() {\n        return this.height;\n    },\n    set setHeight(val) {\n        if (this.height === 0 || val === 0) this.height = val;\n    },\n    get getWidth() {\n        return this.width;\n    },\n    set setWidth(val) {\n        if (this.width === 0 || val === 0) this.width = val;\n    },\n    setDimensions: function(height, width) {\n        if (this.height === 0 || height === 0) this.height = height;\n        if (this.width === 0 || width === 0) this.width = width;\n    },\n};\n\nconst create$8 = ({ root }) => {\n    // need to set role to list as otherwise it won't be read as a list by VoiceOver\n    attr(root.element, 'role', 'list');\n\n    root.ref.lastItemSpanwDate = Date.now();\n};\n\n/**\n * Inserts a new item\n * @param root\n * @param action\n */\nconst addItemView = ({ root, action }) => {\n    const { id, index, interactionMethod } = action;\n\n    root.ref.addIndex = index;\n\n    const now = Date.now();\n    let spawnDate = now;\n    let opacity = 1;\n\n    if (interactionMethod !== InteractionMethod.NONE) {\n        opacity = 0;\n        const cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n        const dist = now - root.ref.lastItemSpanwDate;\n        spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n    }\n\n    root.ref.lastItemSpanwDate = spawnDate;\n\n    root.appendChildView(\n        root.createChildView(\n            // view type\n            item,\n\n            // props\n            {\n                spawnDate,\n                id,\n                opacity,\n                interactionMethod,\n            }\n        ),\n        index\n    );\n};\n\nconst moveItem = (item, x, y, vx = 0, vy = 1) => {\n    // set to null to remove animation while dragging\n    if (item.dragOffset) {\n        item.translateX = null;\n        item.translateY = null;\n        item.translateX = item.dragOrigin.x + item.dragOffset.x;\n        item.translateY = item.dragOrigin.y + item.dragOffset.y;\n        item.scaleX = 1.025;\n        item.scaleY = 1.025;\n    } else {\n        item.translateX = x;\n        item.translateY = y;\n\n        if (Date.now() > item.spawnDate) {\n            // reveal element\n            if (item.opacity === 0) {\n                introItemView(item, x, y, vx, vy);\n            }\n\n            // make sure is default scale every frame\n            item.scaleX = 1;\n            item.scaleY = 1;\n            item.opacity = 1;\n        }\n    }\n};\n\nconst introItemView = (item, x, y, vx, vy) => {\n    if (item.interactionMethod === InteractionMethod.NONE) {\n        item.translateX = null;\n        item.translateX = x;\n        item.translateY = null;\n        item.translateY = y;\n    } else if (item.interactionMethod === InteractionMethod.DROP) {\n        item.translateX = null;\n        item.translateX = x - vx * 20;\n\n        item.translateY = null;\n        item.translateY = y - vy * 10;\n\n        item.scaleX = 0.8;\n        item.scaleY = 0.8;\n    } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n        item.translateY = null;\n        item.translateY = y - 30;\n    } else if (item.interactionMethod === InteractionMethod.API) {\n        item.translateX = null;\n        item.translateX = x - 30;\n        item.translateY = null;\n    }\n};\n\n/**\n * Removes an existing item\n * @param root\n * @param action\n */\nconst removeItemView = ({ root, action }) => {\n    const { id } = action;\n\n    // get the view matching the given id\n    const view = root.childViews.find(child => child.id === id);\n\n    // if no view found, exit\n    if (!view) {\n        return;\n    }\n\n    // animate view out of view\n    view.scaleX = 0.9;\n    view.scaleY = 0.9;\n    view.opacity = 0;\n\n    // mark for removal\n    view.markedForRemoval = true;\n};\n\nconst getItemHeight = child =>\n    child.rect.element.height +\n    child.rect.element.marginBottom * 0.5 +\n    child.rect.element.marginTop * 0.5;\nconst getItemWidth = child =>\n    child.rect.element.width +\n    child.rect.element.marginLeft * 0.5 +\n    child.rect.element.marginRight * 0.5;\n\nconst dragItem = ({ root, action }) => {\n    const { id, dragState } = action;\n\n    // reference to item\n    const item = root.query('GET_ITEM', { id });\n\n    // get the view matching the given id\n    const view = root.childViews.find(child => child.id === id);\n\n    const numItems = root.childViews.length;\n    const oldIndex = dragState.getItemIndex(item);\n\n    // if no view found, exit\n    if (!view) return;\n\n    const dragPosition = {\n        x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n        y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y,\n    };\n\n    // get drag area dimensions\n    const dragHeight = getItemHeight(view);\n    const dragWidth = getItemWidth(view);\n\n    // get rows and columns (There will always be at least one row and one column if a file is present)\n    let cols = Math.floor(root.rect.outer.width / dragWidth);\n    if (cols > numItems) cols = numItems;\n\n    // rows are used to find when we have left the preview area bounding box\n    const rows = Math.floor(numItems / cols + 1);\n\n    dropAreaDimensions.setHeight = dragHeight * rows;\n    dropAreaDimensions.setWidth = dragWidth * cols;\n\n    // get new index of dragged item\n    var location = {\n        y: Math.floor(dragPosition.y / dragHeight),\n        x: Math.floor(dragPosition.x / dragWidth),\n        getGridIndex: function getGridIndex() {\n            if (\n                dragPosition.y > dropAreaDimensions.getHeight ||\n                dragPosition.y < 0 ||\n                dragPosition.x > dropAreaDimensions.getWidth ||\n                dragPosition.x < 0\n            )\n                return oldIndex;\n            return this.y * cols + this.x;\n        },\n        getColIndex: function getColIndex() {\n            const items = root.query('GET_ACTIVE_ITEMS');\n            const visibleChildren = root.childViews.filter(child => child.rect.element.height);\n            const children = items.map(item =>\n                visibleChildren.find(childView => childView.id === item.id)\n            );\n            const currentIndex = children.findIndex(child => child === view);\n            const dragHeight = getItemHeight(view);\n            const l = children.length;\n            let idx = l;\n            let childHeight = 0;\n            let childBottom = 0;\n            let childTop = 0;\n            for (let i = 0; i < l; i++) {\n                childHeight = getItemHeight(children[i]);\n                childTop = childBottom;\n                childBottom = childTop + childHeight;\n                if (dragPosition.y < childBottom) {\n                    if (currentIndex > i) {\n                        if (dragPosition.y < childTop + dragHeight) {\n                            idx = i;\n                            break;\n                        }\n                        continue;\n                    }\n                    idx = i;\n                    break;\n                }\n            }\n            return idx;\n        },\n    };\n\n    // get new index\n    const index = cols > 1 ? location.getGridIndex() : location.getColIndex();\n    root.dispatch('MOVE_ITEM', { query: view, index });\n\n    // if the index of the item changed, dispatch reorder action\n    const currentIndex = dragState.getIndex();\n\n    if (currentIndex === undefined || currentIndex !== index) {\n        dragState.setIndex(index);\n\n        if (currentIndex === undefined) return;\n\n        root.dispatch('DID_REORDER_ITEMS', {\n            items: root.query('GET_ACTIVE_ITEMS'),\n            origin: oldIndex,\n            target: index,\n        });\n    }\n};\n\n/**\n * Setup action routes\n */\nconst route$2 = createRoute({\n    DID_ADD_ITEM: addItemView,\n    DID_REMOVE_ITEM: removeItemView,\n    DID_DRAG_ITEM: dragItem,\n});\n\n/**\n * Write to view\n * @param root\n * @param actions\n * @param props\n */\nconst write$5 = ({ root, props, actions, shouldOptimize }) => {\n    // route actions\n    route$2({ root, props, actions });\n\n    const { dragCoordinates } = props;\n\n    // available space on horizontal axis\n    const horizontalSpace = root.rect.element.width;\n\n    // only draw children that have dimensions\n    const visibleChildren = root.childViews.filter(child => child.rect.element.height);\n\n    // sort based on current active items\n    const children = root\n        .query('GET_ACTIVE_ITEMS')\n        .map(item => visibleChildren.find(child => child.id === item.id))\n        .filter(item => item);\n\n    // get index\n    const dragIndex = dragCoordinates\n        ? getItemIndexByPosition(root, children, dragCoordinates)\n        : null;\n\n    // add index is used to reserve the dropped/added item index till the actual item is rendered\n    const addIndex = root.ref.addIndex || null;\n\n    // add index no longer needed till possibly next draw\n    root.ref.addIndex = null;\n\n    let dragIndexOffset = 0;\n    let removeIndexOffset = 0;\n    let addIndexOffset = 0;\n\n    if (children.length === 0) return;\n\n    const childRect = children[0].rect.element;\n    const itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    const itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n    const itemWidth = childRect.width + itemHorizontalMargin;\n    const itemHeight = childRect.height + itemVerticalMargin;\n    const itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n        let offsetY = 0;\n        let dragOffset = 0;\n\n        children.forEach((child, index) => {\n            if (dragIndex) {\n                let dist = index - dragIndex;\n                if (dist === -2) {\n                    dragOffset = -itemVerticalMargin * 0.25;\n                } else if (dist === -1) {\n                    dragOffset = -itemVerticalMargin * 0.75;\n                } else if (dist === 0) {\n                    dragOffset = itemVerticalMargin * 0.75;\n                } else if (dist === 1) {\n                    dragOffset = itemVerticalMargin * 0.25;\n                } else {\n                    dragOffset = 0;\n                }\n            }\n\n            if (shouldOptimize) {\n                child.translateX = null;\n                child.translateY = null;\n            }\n\n            if (!child.markedForRemoval) {\n                moveItem(child, 0, offsetY + dragOffset);\n            }\n\n            let itemHeight = child.rect.element.height + itemVerticalMargin;\n\n            let visualHeight = itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n            offsetY += visualHeight;\n        });\n    }\n    // grid\n    else {\n        let prevX = 0;\n        let prevY = 0;\n\n        children.forEach((child, index) => {\n            if (index === dragIndex) {\n                dragIndexOffset = 1;\n            }\n\n            if (index === addIndex) {\n                addIndexOffset += 1;\n            }\n\n            if (child.markedForRemoval && child.opacity < 0.5) {\n                removeIndexOffset -= 1;\n            }\n\n            const visualIndex = index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n            const indexX = visualIndex % itemsPerRow;\n            const indexY = Math.floor(visualIndex / itemsPerRow);\n\n            const offsetX = indexX * itemWidth;\n            const offsetY = indexY * itemHeight;\n\n            const vectorX = Math.sign(offsetX - prevX);\n            const vectorY = Math.sign(offsetY - prevY);\n\n            prevX = offsetX;\n            prevY = offsetY;\n\n            if (child.markedForRemoval) return;\n\n            if (shouldOptimize) {\n                child.translateX = null;\n                child.translateY = null;\n            }\n\n            moveItem(child, offsetX, offsetY, vectorX, vectorY);\n        });\n    }\n};\n\n/**\n * Filters actions that are meant specifically for a certain child of the list\n * @param child\n * @param actions\n */\nconst filterSetItemActions = (child, actions) =>\n    actions.filter(action => {\n        // if action has an id, filter out actions that don't have this child id\n        if (action.data && action.data.id) {\n            return child.id === action.data.id;\n        }\n\n        // allow all other actions\n        return true;\n    });\n\nconst list = createView({\n    create: create$8,\n    write: write$5,\n    tag: 'ul',\n    name: 'list',\n    didWriteView: ({ root }) => {\n        root.childViews\n            .filter(view => view.markedForRemoval && view.opacity === 0 && view.resting)\n            .forEach(view => {\n                view._destroy();\n                root.removeChildView(view);\n            });\n    },\n    filterFrameActionsForChild: filterSetItemActions,\n    mixins: {\n        apis: ['dragCoordinates'],\n    },\n});\n\nconst create$9 = ({ root, props }) => {\n    root.ref.list = root.appendChildView(root.createChildView(list));\n    props.dragCoordinates = null;\n    props.overflowing = false;\n};\n\nconst storeDragCoordinates = ({ root, props, action }) => {\n    if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n    props.dragCoordinates = {\n        left: action.position.scopeLeft - root.ref.list.rect.element.left,\n        top:\n            action.position.scopeTop -\n            (root.rect.outer.top + root.rect.element.marginTop + root.rect.element.scrollTop),\n    };\n};\n\nconst clearDragCoordinates = ({ props }) => {\n    props.dragCoordinates = null;\n};\n\nconst route$3 = createRoute({\n    DID_DRAG: storeDragCoordinates,\n    DID_END_DRAG: clearDragCoordinates,\n});\n\nconst write$6 = ({ root, props, actions }) => {\n    // route actions\n    route$3({ root, props, actions });\n\n    // current drag position\n    root.ref.list.dragCoordinates = props.dragCoordinates;\n\n    // if currently overflowing but no longer received overflow\n    if (props.overflowing && !props.overflow) {\n        props.overflowing = false;\n\n        // reset overflow state\n        root.element.dataset.state = '';\n        root.height = null;\n    }\n\n    // if is not overflowing currently but does receive overflow value\n    if (props.overflow) {\n        const newHeight = Math.round(props.overflow);\n        if (newHeight !== root.height) {\n            props.overflowing = true;\n            root.element.dataset.state = 'overflow';\n            root.height = newHeight;\n        }\n    }\n};\n\nconst listScroller = createView({\n    create: create$9,\n    write: write$6,\n    name: 'list-scroller',\n    mixins: {\n        apis: ['overflow', 'dragCoordinates'],\n        styles: ['height', 'translateY'],\n        animations: {\n            translateY: 'spring',\n        },\n    },\n});\n\nconst attrToggle = (element, name, state, enabledValue = '') => {\n    if (state) {\n        attr(element, name, enabledValue);\n    } else {\n        element.removeAttribute(name);\n    }\n};\n\nconst resetFileInput = input => {\n    // no value, no need to reset\n    if (!input || input.value === '') {\n        return;\n    }\n\n    try {\n        // for modern browsers\n        input.value = '';\n    } catch (err) {}\n\n    // for IE10\n    if (input.value) {\n        // quickly append input to temp form and reset form\n        const form = createElement$1('form');\n        const parentNode = input.parentNode;\n        const ref = input.nextSibling;\n        form.appendChild(input);\n        form.reset();\n\n        // re-inject input where it originally was\n        if (ref) {\n            parentNode.insertBefore(input, ref);\n        } else {\n            parentNode.appendChild(input);\n        }\n    }\n};\n\nconst create$a = ({ root, props }) => {\n    // set id so can be referenced from outside labels\n    root.element.id = `filepond--browser-${props.id}`;\n\n    // set name of element (is removed when a value is set)\n    attr(root.element, 'name', root.query('GET_NAME'));\n\n    // we have to link this element to the status element\n    attr(root.element, 'aria-controls', `filepond--assistant-${props.id}`);\n\n    // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n    attr(root.element, 'aria-labelledby', `filepond--drop-label-${props.id}`);\n\n    // set configurable props\n    setAcceptedFileTypes({ root, action: { value: root.query('GET_ACCEPTED_FILE_TYPES') } });\n    toggleAllowMultiple({ root, action: { value: root.query('GET_ALLOW_MULTIPLE') } });\n    toggleDirectoryFilter({ root, action: { value: root.query('GET_ALLOW_DIRECTORIES_ONLY') } });\n    toggleDisabled({ root });\n    toggleRequired({ root, action: { value: root.query('GET_REQUIRED') } });\n    setCaptureMethod({ root, action: { value: root.query('GET_CAPTURE_METHOD') } });\n\n    // handle changes to the input field\n    root.ref.handleChange = e => {\n        if (!root.element.value) {\n            return;\n        }\n\n        // extract files and move value of webkitRelativePath path to _relativePath\n        const files = Array.from(root.element.files).map(file => {\n            file._relativePath = file.webkitRelativePath;\n            return file;\n        });\n\n        // we add a little delay so the OS file select window can move out of the way before we add our file\n        setTimeout(() => {\n            // load files\n            props.onload(files);\n\n            // reset input, it's just for exposing a method to drop files, should not retain any state\n            resetFileInput(root.element);\n        }, 250);\n    };\n\n    root.element.addEventListener('change', root.ref.handleChange);\n};\n\nconst setAcceptedFileTypes = ({ root, action }) => {\n    if (!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE')) return;\n    attrToggle(root.element, 'accept', !!action.value, action.value ? action.value.join(',') : '');\n};\n\nconst toggleAllowMultiple = ({ root, action }) => {\n    attrToggle(root.element, 'multiple', action.value);\n};\n\nconst toggleDirectoryFilter = ({ root, action }) => {\n    attrToggle(root.element, 'webkitdirectory', action.value);\n};\n\nconst toggleDisabled = ({ root }) => {\n    const isDisabled = root.query('GET_DISABLED');\n    const doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n    const disableField = isDisabled || !doesAllowBrowse;\n    attrToggle(root.element, 'disabled', disableField);\n};\n\nconst toggleRequired = ({ root, action }) => {\n    // want to remove required, always possible\n    if (!action.value) {\n        attrToggle(root.element, 'required', false);\n    }\n    // if want to make required, only possible when zero items\n    else if (root.query('GET_TOTAL_ITEMS') === 0) {\n        attrToggle(root.element, 'required', true);\n    }\n};\n\nconst setCaptureMethod = ({ root, action }) => {\n    attrToggle(root.element, 'capture', !!action.value, action.value === true ? '' : action.value);\n};\n\nconst updateRequiredStatus = ({ root }) => {\n    const { element } = root;\n    // always remove the required attribute when more than zero items\n    if (root.query('GET_TOTAL_ITEMS') > 0) {\n        attrToggle(element, 'required', false);\n        attrToggle(element, 'name', false);\n    } else {\n        // add name attribute\n        attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n        // remove any validation messages\n        const shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n        if (shouldCheckValidity) {\n            element.setCustomValidity('');\n        }\n\n        // we only add required if the field has been deemed required\n        if (root.query('GET_REQUIRED')) {\n            attrToggle(element, 'required', true);\n        }\n    }\n};\n\nconst updateFieldValidityStatus = ({ root }) => {\n    const shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n    if (!shouldCheckValidity) return;\n    root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n};\n\nconst browser = createView({\n    tag: 'input',\n    name: 'browser',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    attributes: {\n        type: 'file',\n    },\n    create: create$a,\n    destroy: ({ root }) => {\n        root.element.removeEventListener('change', root.ref.handleChange);\n    },\n    write: createRoute({\n        DID_LOAD_ITEM: updateRequiredStatus,\n        DID_REMOVE_ITEM: updateRequiredStatus,\n        DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n        DID_SET_DISABLED: toggleDisabled,\n        DID_SET_ALLOW_BROWSE: toggleDisabled,\n        DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n        DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n        DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n        DID_SET_CAPTURE_METHOD: setCaptureMethod,\n        DID_SET_REQUIRED: toggleRequired,\n    }),\n});\n\nconst Key = {\n    ENTER: 13,\n    SPACE: 32,\n};\n\nconst create$b = ({ root, props }) => {\n    // create the label and link it to the file browser\n    const label = createElement$1('label');\n    attr(label, 'for', `filepond--browser-${props.id}`);\n\n    // use for labeling file input (aria-labelledby on file input)\n    attr(label, 'id', `filepond--drop-label-${props.id}`);\n\n    // hide the label for screenreaders, the input element will read the contents of the label when it's focussed. If we don't set aria-hidden the screenreader will also navigate the contents of the label separately from the input.\n    attr(label, 'aria-hidden', 'true');\n\n    // handle keys\n    root.ref.handleKeyDown = e => {\n        const isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n        if (!isActivationKey) return;\n        // stops from triggering the element a second time\n        e.preventDefault();\n\n        // click link (will then in turn activate file input)\n        root.ref.label.click();\n    };\n\n    root.ref.handleClick = e => {\n        const isLabelClick = e.target === label || label.contains(e.target);\n\n        // don't want to click twice\n        if (isLabelClick) return;\n\n        // click link (will then in turn activate file input)\n        root.ref.label.click();\n    };\n\n    // attach events\n    label.addEventListener('keydown', root.ref.handleKeyDown);\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // update\n    updateLabelValue(label, props.caption);\n\n    // add!\n    root.appendChild(label);\n    root.ref.label = label;\n};\n\nconst updateLabelValue = (label, value) => {\n    label.innerHTML = value;\n    const clickable = label.querySelector('.filepond--label-action');\n    if (clickable) {\n        attr(clickable, 'tabindex', '0');\n    }\n    return value;\n};\n\nconst dropLabel = createView({\n    name: 'drop-label',\n    ignoreRect: true,\n    create: create$b,\n    destroy: ({ root }) => {\n        root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n        root.element.removeEventListener('click', root.ref.handleClick);\n    },\n    write: createRoute({\n        DID_SET_LABEL_IDLE: ({ root, action }) => {\n            updateLabelValue(root.ref.label, action.value);\n        },\n    }),\n    mixins: {\n        styles: ['opacity', 'translateX', 'translateY'],\n        animations: {\n            opacity: { type: 'tween', duration: 150 },\n            translateX: 'spring',\n            translateY: 'spring',\n        },\n    },\n});\n\nconst blob = createView({\n    name: 'drip-blob',\n    ignoreRect: true,\n    mixins: {\n        styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n        animations: {\n            scaleX: 'spring',\n            scaleY: 'spring',\n            translateX: 'spring',\n            translateY: 'spring',\n            opacity: { type: 'tween', duration: 250 },\n        },\n    },\n});\n\nconst addBlob = ({ root }) => {\n    const centerX = root.rect.element.width * 0.5;\n    const centerY = root.rect.element.height * 0.5;\n\n    root.ref.blob = root.appendChildView(\n        root.createChildView(blob, {\n            opacity: 0,\n            scaleX: 2.5,\n            scaleY: 2.5,\n            translateX: centerX,\n            translateY: centerY,\n        })\n    );\n};\n\nconst moveBlob = ({ root, action }) => {\n    if (!root.ref.blob) {\n        addBlob({ root });\n        return;\n    }\n\n    root.ref.blob.translateX = action.position.scopeLeft;\n    root.ref.blob.translateY = action.position.scopeTop;\n    root.ref.blob.scaleX = 1;\n    root.ref.blob.scaleY = 1;\n    root.ref.blob.opacity = 1;\n};\n\nconst hideBlob = ({ root }) => {\n    if (!root.ref.blob) {\n        return;\n    }\n    root.ref.blob.opacity = 0;\n};\n\nconst explodeBlob = ({ root }) => {\n    if (!root.ref.blob) {\n        return;\n    }\n    root.ref.blob.scaleX = 2.5;\n    root.ref.blob.scaleY = 2.5;\n    root.ref.blob.opacity = 0;\n};\n\nconst write$7 = ({ root, props, actions }) => {\n    route$4({ root, props, actions });\n\n    const { blob } = root.ref;\n\n    if (actions.length === 0 && blob && blob.opacity === 0) {\n        root.removeChildView(blob);\n        root.ref.blob = null;\n    }\n};\n\nconst route$4 = createRoute({\n    DID_DRAG: moveBlob,\n    DID_DROP: explodeBlob,\n    DID_END_DRAG: hideBlob,\n});\n\nconst drip = createView({\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'drip',\n    write: write$7,\n});\n\nconst setInputFiles = (element, files) => {\n    try {\n        // Create a DataTransfer instance and add a newly created file\n        const dataTransfer = new DataTransfer();\n        files.forEach(file => {\n            if (file instanceof File) {\n                dataTransfer.items.add(file);\n            } else {\n                dataTransfer.items.add(\n                    new File([file], file.name, {\n                        type: file.type,\n                    })\n                );\n            }\n        });\n\n        // Assign the DataTransfer files list to the file input\n        element.files = dataTransfer.files;\n    } catch (err) {\n        return false;\n    }\n    return true;\n};\n\nconst create$c = ({ root }) => (root.ref.fields = {});\n\nconst getField = (root, id) => root.ref.fields[id];\n\nconst syncFieldPositionsWithItems = root => {\n    root.query('GET_ACTIVE_ITEMS').forEach(item => {\n        if (!root.ref.fields[item.id]) return;\n        root.element.appendChild(root.ref.fields[item.id]);\n    });\n};\n\nconst didReorderItems = ({ root }) => syncFieldPositionsWithItems(root);\n\nconst didAddItem = ({ root, action }) => {\n    const fileItem = root.query('GET_ITEM', action.id);\n    const isLocalFile = fileItem.origin === FileOrigin.LOCAL;\n    const shouldUseFileInput = !isLocalFile && root.query('SHOULD_UPDATE_FILE_INPUT');\n    const dataContainer = createElement$1('input');\n    dataContainer.type = shouldUseFileInput ? 'file' : 'hidden';\n    dataContainer.name = root.query('GET_NAME');\n    dataContainer.disabled = root.query('GET_DISABLED');\n    root.ref.fields[action.id] = dataContainer;\n    syncFieldPositionsWithItems(root);\n};\n\nconst didLoadItem$1 = ({ root, action }) => {\n    const field = getField(root, action.id);\n    if (!field) return;\n\n    // store server ref in hidden input\n    if (action.serverFileReference !== null) field.value = action.serverFileReference;\n\n    // store file item in file input\n    if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n\n    const fileItem = root.query('GET_ITEM', action.id);\n    setInputFiles(field, [fileItem.file]);\n};\n\nconst didPrepareOutput = ({ root, action }) => {\n    // this timeout pushes the handler after 'load'\n    if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n    setTimeout(() => {\n        const field = getField(root, action.id);\n        if (!field) return;\n        setInputFiles(field, [action.file]);\n    }, 0);\n};\n\nconst didSetDisabled = ({ root }) => {\n    root.element.disabled = root.query('GET_DISABLED');\n};\n\nconst didRemoveItem = ({ root, action }) => {\n    const field = getField(root, action.id);\n    if (!field) return;\n    if (field.parentNode) field.parentNode.removeChild(field);\n    delete root.ref.fields[action.id];\n};\n\n// only runs for server files. will refuse to update the value if the field\n// is a file field\nconst didDefineValue = ({ root, action }) => {\n    const field = getField(root, action.id);\n    if (!field) return;\n    if (action.value === null) {\n        // clear field value\n        field.removeAttribute('value');\n    } else {\n        // set field value\n        if (field.type != 'file') {\n            field.value = action.value;\n        }\n    }\n    syncFieldPositionsWithItems(root);\n};\n\nconst write$8 = createRoute({\n    DID_SET_DISABLED: didSetDisabled,\n    DID_ADD_ITEM: didAddItem,\n    DID_LOAD_ITEM: didLoadItem$1,\n    DID_REMOVE_ITEM: didRemoveItem,\n    DID_DEFINE_VALUE: didDefineValue,\n    DID_PREPARE_OUTPUT: didPrepareOutput,\n    DID_REORDER_ITEMS: didReorderItems,\n    DID_SORT_ITEMS: didReorderItems,\n});\n\nconst data = createView({\n    tag: 'fieldset',\n    name: 'data',\n    create: create$c,\n    write: write$8,\n    ignoreRect: true,\n});\n\nconst getRootNode = element => ('getRootNode' in element ? element.getRootNode() : document);\n\nconst images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\nconst text$1 = ['css', 'csv', 'html', 'txt'];\nconst map = {\n    zip: 'zip|compressed',\n    epub: 'application/epub+zip',\n};\n\nconst guesstimateMimeType = (extension = '') => {\n    extension = extension.toLowerCase();\n    if (images.includes(extension)) {\n        return (\n            'image/' + (extension === 'jpg' ? 'jpeg' : extension === 'svg' ? 'svg+xml' : extension)\n        );\n    }\n    if (text$1.includes(extension)) {\n        return 'text/' + extension;\n    }\n\n    return map[extension] || '';\n};\n\nconst requestDataTransferItems = dataTransfer =>\n    new Promise((resolve, reject) => {\n        // try to get links from transfer, if found we'll exit immediately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n        const links = getLinks(dataTransfer);\n        if (links.length && !hasFiles(dataTransfer)) {\n            return resolve(links);\n        }\n        // try to get files from the transfer\n        getFiles(dataTransfer).then(resolve);\n    });\n\n/**\n * Test if datatransfer has files\n */\nconst hasFiles = dataTransfer => {\n    if (dataTransfer.files) return dataTransfer.files.length > 0;\n    return false;\n};\n\n/**\n * Extracts files from a DataTransfer object\n */\nconst getFiles = dataTransfer =>\n    new Promise((resolve, reject) => {\n        // get the transfer items as promises\n        const promisedFiles = (dataTransfer.items ? Array.from(dataTransfer.items) : [])\n\n            // only keep file system items (files and directories)\n            .filter(item => isFileSystemItem(item))\n\n            // map each item to promise\n            .map(item => getFilesFromItem(item));\n\n        // if is empty, see if we can extract some info from the files property as a fallback\n        if (!promisedFiles.length) {\n            // TODO: test for directories (should not be allowed)\n            // Use FileReader, problem is that the files property gets lost in the process\n            resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n            return;\n        }\n\n        // done!\n        Promise.all(promisedFiles)\n            .then(returnedFileGroups => {\n                // flatten groups\n                const files = [];\n                returnedFileGroups.forEach(group => {\n                    files.push.apply(files, group);\n                });\n\n                // done (filter out empty files)!\n                resolve(\n                    files\n                        .filter(file => file)\n                        .map(file => {\n                            if (!file._relativePath) file._relativePath = file.webkitRelativePath;\n                            return file;\n                        })\n                );\n            })\n            .catch(console.error);\n    });\n\nconst isFileSystemItem = item => {\n    if (isEntry(item)) {\n        const entry = getAsEntry(item);\n        if (entry) {\n            return entry.isFile || entry.isDirectory;\n        }\n    }\n    return item.kind === 'file';\n};\n\nconst getFilesFromItem = item =>\n    new Promise((resolve, reject) => {\n        if (isDirectoryEntry(item)) {\n            getFilesInDirectory(getAsEntry(item))\n                .then(resolve)\n                .catch(reject);\n            return;\n        }\n\n        resolve([item.getAsFile()]);\n    });\n\nconst getFilesInDirectory = entry =>\n    new Promise((resolve, reject) => {\n        const files = [];\n\n        // the total entries to read\n        let dirCounter = 0;\n        let fileCounter = 0;\n\n        const resolveIfDone = () => {\n            if (fileCounter === 0 && dirCounter === 0) {\n                resolve(files);\n            }\n        };\n\n        // the recursive function\n        const readEntries = dirEntry => {\n            dirCounter++;\n\n            const directoryReader = dirEntry.createReader();\n\n            // directories are returned in batches, we need to process all batches before we're done\n            const readBatch = () => {\n                directoryReader.readEntries(entries => {\n                    if (entries.length === 0) {\n                        dirCounter--;\n                        resolveIfDone();\n                        return;\n                    }\n\n                    entries.forEach(entry => {\n                        // recursively read more directories\n                        if (entry.isDirectory) {\n                            readEntries(entry);\n                        } else {\n                            // read as file\n                            fileCounter++;\n\n                            entry.file(file => {\n                                const correctedFile = correctMissingFileType(file);\n                                if (entry.fullPath) correctedFile._relativePath = entry.fullPath;\n                                files.push(correctedFile);\n                                fileCounter--;\n                                resolveIfDone();\n                            });\n                        }\n                    });\n\n                    // try to get next batch of files\n                    readBatch();\n                }, reject);\n            };\n\n            // read first batch of files\n            readBatch();\n        };\n\n        // go!\n        readEntries(entry);\n    });\n\nconst correctMissingFileType = file => {\n    if (file.type.length) return file;\n    const date = file.lastModifiedDate;\n    const name = file.name;\n    const type = guesstimateMimeType(getExtensionFromFilename(file.name));\n    if (!type.length) return file;\n    file = file.slice(0, file.size, type);\n    file.name = name;\n    file.lastModifiedDate = date;\n    return file;\n};\n\nconst isDirectoryEntry = item => isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n\nconst isEntry = item => 'webkitGetAsEntry' in item;\n\nconst getAsEntry = item => item.webkitGetAsEntry();\n\n/**\n * Extracts links from a DataTransfer object\n */\nconst getLinks = dataTransfer => {\n    let links = [];\n    try {\n        // look in meta data property\n        links = getLinksFromTransferMetaData(dataTransfer);\n        if (links.length) {\n            return links;\n        }\n        links = getLinksFromTransferURLData(dataTransfer);\n    } catch (e) {\n        // nope nope nope (probably IE trouble)\n    }\n    return links;\n};\n\nconst getLinksFromTransferURLData = dataTransfer => {\n    let data = dataTransfer.getData('url');\n    if (typeof data === 'string' && data.length) {\n        return [data];\n    }\n    return [];\n};\n\nconst getLinksFromTransferMetaData = dataTransfer => {\n    let data = dataTransfer.getData('text/html');\n    if (typeof data === 'string' && data.length) {\n        const matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n        if (matches) {\n            return [matches[1]];\n        }\n    }\n    return [];\n};\n\nconst dragNDropObservers = [];\n\nconst eventPosition = e => ({\n    pageLeft: e.pageX,\n    pageTop: e.pageY,\n    scopeLeft: e.offsetX || e.layerX,\n    scopeTop: e.offsetY || e.layerY,\n});\n\nconst createDragNDropClient = (element, scopeToObserve, filterElement) => {\n    const observer = getDragNDropObserver(scopeToObserve);\n\n    const client = {\n        element,\n        filterElement,\n        state: null,\n        ondrop: () => {},\n        onenter: () => {},\n        ondrag: () => {},\n        onexit: () => {},\n        onload: () => {},\n        allowdrop: () => {},\n    };\n\n    client.destroy = observer.addListener(client);\n\n    return client;\n};\n\nconst getDragNDropObserver = element => {\n    // see if already exists, if so, return\n    const observer = dragNDropObservers.find(item => item.element === element);\n    if (observer) {\n        return observer;\n    }\n\n    // create new observer, does not yet exist for this element\n    const newObserver = createDragNDropObserver(element);\n    dragNDropObservers.push(newObserver);\n    return newObserver;\n};\n\nconst createDragNDropObserver = element => {\n    const clients = [];\n\n    const routes = {\n        dragenter,\n        dragover,\n        dragleave,\n        drop,\n    };\n\n    const handlers = {};\n\n    forin(routes, (event, createHandler) => {\n        handlers[event] = createHandler(element, clients);\n        element.addEventListener(event, handlers[event], false);\n    });\n\n    const observer = {\n        element,\n        addListener: client => {\n            // add as client\n            clients.push(client);\n\n            // return removeListener function\n            return () => {\n                // remove client\n                clients.splice(clients.indexOf(client), 1);\n\n                // if no more clients, clean up observer\n                if (clients.length === 0) {\n                    dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n                    forin(routes, event => {\n                        element.removeEventListener(event, handlers[event], false);\n                    });\n                }\n            };\n        },\n    };\n\n    return observer;\n};\n\nconst elementFromPoint = (root, point) => {\n    if (!('elementFromPoint' in root)) {\n        root = document;\n    }\n    return root.elementFromPoint(point.x, point.y);\n};\n\nconst isEventTarget = (e, target) => {\n    // get root\n    const root = getRootNode(target);\n\n    // get element at position\n    // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n    const elementAtPosition = elementFromPoint(root, {\n        x: e.pageX - window.pageXOffset,\n        y: e.pageY - window.pageYOffset,\n    });\n\n    // test if target is the element or if one of its children is\n    return elementAtPosition === target || target.contains(elementAtPosition);\n};\n\nlet initialTarget = null;\n\nconst setDropEffect = (dataTransfer, effect) => {\n    // is in try catch as IE11 will throw error if not\n    try {\n        dataTransfer.dropEffect = effect;\n    } catch (e) {}\n};\n\nconst dragenter = (root, clients) => e => {\n    e.preventDefault();\n\n    initialTarget = e.target;\n\n    clients.forEach(client => {\n        const { element, onenter } = client;\n\n        if (isEventTarget(e, element)) {\n            client.state = 'enter';\n\n            // fire enter event\n            onenter(eventPosition(e));\n        }\n    });\n};\n\nconst dragover = (root, clients) => e => {\n    e.preventDefault();\n\n    const dataTransfer = e.dataTransfer;\n\n    requestDataTransferItems(dataTransfer).then(items => {\n        let overDropTarget = false;\n\n        clients.some(client => {\n            const { filterElement, element, onenter, onexit, ondrag, allowdrop } = client;\n\n            // by default we can drop\n            setDropEffect(dataTransfer, 'copy');\n\n            // allow transfer of these items\n            const allowsTransfer = allowdrop(items);\n\n            // only used when can be dropped on page\n            if (!allowsTransfer) {\n                setDropEffect(dataTransfer, 'none');\n                return;\n            }\n\n            // targetting this client\n            if (isEventTarget(e, element)) {\n                overDropTarget = true;\n\n                // had no previous state, means we are entering this client\n                if (client.state === null) {\n                    client.state = 'enter';\n                    onenter(eventPosition(e));\n                    return;\n                }\n\n                // now over element (no matter if it allows the drop or not)\n                client.state = 'over';\n\n                // needs to allow transfer\n                if (filterElement && !allowsTransfer) {\n                    setDropEffect(dataTransfer, 'none');\n                    return;\n                }\n\n                // dragging\n                ondrag(eventPosition(e));\n            } else {\n                // should be over an element to drop\n                if (filterElement && !overDropTarget) {\n                    setDropEffect(dataTransfer, 'none');\n                }\n\n                // might have just left this client?\n                if (client.state) {\n                    client.state = null;\n                    onexit(eventPosition(e));\n                }\n            }\n        });\n    });\n};\n\nconst drop = (root, clients) => e => {\n    e.preventDefault();\n\n    const dataTransfer = e.dataTransfer;\n\n    requestDataTransferItems(dataTransfer).then(items => {\n        clients.forEach(client => {\n            const { filterElement, element, ondrop, onexit, allowdrop } = client;\n\n            client.state = null;\n\n            // if we're filtering on element we need to be over the element to drop\n            if (filterElement && !isEventTarget(e, element)) return;\n\n            // no transfer for this client\n            if (!allowdrop(items)) return onexit(eventPosition(e));\n\n            // we can drop these items on this client\n            ondrop(eventPosition(e), items);\n        });\n    });\n};\n\nconst dragleave = (root, clients) => e => {\n    if (initialTarget !== e.target) {\n        return;\n    }\n\n    clients.forEach(client => {\n        const { onexit } = client;\n\n        client.state = null;\n\n        onexit(eventPosition(e));\n    });\n};\n\nconst createHopper = (scope, validateItems, options) => {\n    // is now hopper scope\n    scope.classList.add('filepond--hopper');\n\n    // shortcuts\n    const { catchesDropsOnPage, requiresDropOnElement, filterItems = items => items } = options;\n\n    // create a dnd client\n    const client = createDragNDropClient(\n        scope,\n        catchesDropsOnPage ? document.documentElement : scope,\n        requiresDropOnElement\n    );\n\n    // current client state\n    let lastState = '';\n    let currentState = '';\n\n    // determines if a file may be dropped\n    client.allowdrop = items => {\n        // TODO: if we can, throw error to indicate the items cannot by dropped\n\n        return validateItems(filterItems(items));\n    };\n\n    client.ondrop = (position, items) => {\n        const filteredItems = filterItems(items);\n\n        if (!validateItems(filteredItems)) {\n            api.ondragend(position);\n            return;\n        }\n\n        currentState = 'drag-drop';\n\n        api.onload(filteredItems, position);\n    };\n\n    client.ondrag = position => {\n        api.ondrag(position);\n    };\n\n    client.onenter = position => {\n        currentState = 'drag-over';\n\n        api.ondragstart(position);\n    };\n\n    client.onexit = position => {\n        currentState = 'drag-exit';\n\n        api.ondragend(position);\n    };\n\n    const api = {\n        updateHopperState: () => {\n            if (lastState !== currentState) {\n                scope.dataset.hopperState = currentState;\n                lastState = currentState;\n            }\n        },\n        onload: () => {},\n        ondragstart: () => {},\n        ondrag: () => {},\n        ondragend: () => {},\n        destroy: () => {\n            // destroy client\n            client.destroy();\n        },\n    };\n\n    return api;\n};\n\nlet listening = false;\nconst listeners$1 = [];\n\nconst handlePaste = e => {\n    // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n    const activeEl = document.activeElement;\n    if (activeEl && /textarea|input/i.test(activeEl.nodeName)) {\n        // test textarea or input is contained in filepond root\n        let inScope = false;\n        let element = activeEl;\n        while (element !== document.body) {\n            if (element.classList.contains('filepond--root')) {\n                inScope = true;\n                break;\n            }\n            element = element.parentNode;\n        }\n\n        if (!inScope) return;\n    }\n\n    requestDataTransferItems(e.clipboardData).then(files => {\n        // no files received\n        if (!files.length) {\n            return;\n        }\n\n        // notify listeners of received files\n        listeners$1.forEach(listener => listener(files));\n    });\n};\n\nconst listen = cb => {\n    // can't add twice\n    if (listeners$1.includes(cb)) {\n        return;\n    }\n\n    // add initial listener\n    listeners$1.push(cb);\n\n    // setup paste listener for entire page\n    if (listening) {\n        return;\n    }\n\n    listening = true;\n    document.addEventListener('paste', handlePaste);\n};\n\nconst unlisten = listener => {\n    arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n    // clean up\n    if (listeners$1.length === 0) {\n        document.removeEventListener('paste', handlePaste);\n        listening = false;\n    }\n};\n\nconst createPaster = () => {\n    const cb = files => {\n        api.onload(files);\n    };\n\n    const api = {\n        destroy: () => {\n            unlisten(cb);\n        },\n        onload: () => {},\n    };\n\n    listen(cb);\n\n    return api;\n};\n\n/**\n * Creates the file view\n */\nconst create$d = ({ root, props }) => {\n    root.element.id = `filepond--assistant-${props.id}`;\n    attr(root.element, 'role', 'status');\n    attr(root.element, 'aria-live', 'polite');\n    attr(root.element, 'aria-relevant', 'additions');\n};\n\nlet addFilesNotificationTimeout = null;\nlet notificationClearTimeout = null;\n\nconst filenames = [];\n\nconst assist = (root, message) => {\n    root.element.textContent = message;\n};\n\nconst clear$1 = root => {\n    root.element.textContent = '';\n};\n\nconst listModified = (root, filename, label) => {\n    const total = root.query('GET_TOTAL_ITEMS');\n    assist(\n        root,\n        `${label} ${filename}, ${total} ${\n            total === 1\n                ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n                : root.query('GET_LABEL_FILE_COUNT_PLURAL')\n        }`\n    );\n\n    // clear group after set amount of time so the status is not read twice\n    clearTimeout(notificationClearTimeout);\n    notificationClearTimeout = setTimeout(() => {\n        clear$1(root);\n    }, 1500);\n};\n\nconst isUsingFilePond = root => root.element.parentNode.contains(document.activeElement);\n\nconst itemAdded = ({ root, action }) => {\n    if (!isUsingFilePond(root)) {\n        return;\n    }\n\n    root.element.textContent = '';\n    const item = root.query('GET_ITEM', action.id);\n    filenames.push(item.filename);\n\n    clearTimeout(addFilesNotificationTimeout);\n    addFilesNotificationTimeout = setTimeout(() => {\n        listModified(root, filenames.join(', '), root.query('GET_LABEL_FILE_ADDED'));\n        filenames.length = 0;\n    }, 750);\n};\n\nconst itemRemoved = ({ root, action }) => {\n    if (!isUsingFilePond(root)) {\n        return;\n    }\n\n    const item = action.item;\n    listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n};\n\nconst itemProcessed = ({ root, action }) => {\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    const item = root.query('GET_ITEM', action.id);\n    const filename = item.filename;\n    const label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n    assist(root, `${filename} ${label}`);\n};\n\nconst itemProcessedUndo = ({ root, action }) => {\n    const item = root.query('GET_ITEM', action.id);\n    const filename = item.filename;\n    const label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n    assist(root, `${filename} ${label}`);\n};\n\nconst itemError = ({ root, action }) => {\n    const item = root.query('GET_ITEM', action.id);\n    const filename = item.filename;\n\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    assist(root, `${action.status.main} ${filename} ${action.status.sub}`);\n};\n\nconst assistant = createView({\n    create: create$d,\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n        DID_LOAD_ITEM: itemAdded,\n        DID_REMOVE_ITEM: itemRemoved,\n        DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n        DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n        DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n        DID_THROW_ITEM_REMOVE_ERROR: itemError,\n        DID_THROW_ITEM_LOAD_ERROR: itemError,\n        DID_THROW_ITEM_INVALID: itemError,\n        DID_THROW_ITEM_PROCESSING_ERROR: itemError,\n    }),\n    tag: 'span',\n    name: 'assistant',\n});\n\nconst toCamels = (string, separator = '-') =>\n    string.replace(new RegExp(`${separator}.`, 'g'), sub => sub.charAt(1).toUpperCase());\n\nconst debounce = (func, interval = 16, immidiateOnly = true) => {\n    let last = Date.now();\n    let timeout = null;\n\n    return (...args) => {\n        clearTimeout(timeout);\n\n        const dist = Date.now() - last;\n\n        const fn = () => {\n            last = Date.now();\n            func(...args);\n        };\n\n        if (dist < interval) {\n            // we need to delay by the difference between interval and dist\n            // for example: if distance is 10 ms and interval is 16 ms,\n            // we need to wait an additional 6ms before calling the function)\n            if (!immidiateOnly) {\n                timeout = setTimeout(fn, interval - dist);\n            }\n        } else {\n            // go!\n            fn();\n        }\n    };\n};\n\nconst MAX_FILES_LIMIT = 1000000;\n\nconst prevent = e => e.preventDefault();\n\nconst create$e = ({ root, props }) => {\n    // Add id\n    const id = root.query('GET_ID');\n    if (id) {\n        root.element.id = id;\n    }\n\n    // Add className\n    const className = root.query('GET_CLASS_NAME');\n    if (className) {\n        className\n            .split(' ')\n            .filter(name => name.length)\n            .forEach(name => {\n                root.element.classList.add(name);\n            });\n    }\n\n    // Field label\n    root.ref.label = root.appendChildView(\n        root.createChildView(dropLabel, {\n            ...props,\n            translateY: null,\n            caption: root.query('GET_LABEL_IDLE'),\n        })\n    );\n\n    // List of items\n    root.ref.list = root.appendChildView(root.createChildView(listScroller, { translateY: null }));\n\n    // Background panel\n    root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'panel-root' }));\n\n    // Assistant notifies assistive tech when content changes\n    root.ref.assistant = root.appendChildView(root.createChildView(assistant, { ...props }));\n\n    // Data\n    root.ref.data = root.appendChildView(root.createChildView(data, { ...props }));\n\n    // Measure (tests if fixed height was set)\n    // DOCTYPE needs to be set for this to work\n    root.ref.measure = createElement$1('div');\n    root.ref.measure.style.height = '100%';\n    root.element.appendChild(root.ref.measure);\n\n    // information on the root height or fixed height status\n    root.ref.bounds = null;\n\n    // apply initial style properties\n    root.query('GET_STYLES')\n        .filter(style => !isEmpty(style.value))\n        .map(({ name, value }) => {\n            root.element.dataset[name] = value;\n        });\n\n    // determine if width changed\n    root.ref.widthPrevious = null;\n    root.ref.widthUpdated = debounce(() => {\n        root.ref.updateHistory = [];\n        root.dispatch('DID_RESIZE_ROOT');\n    }, 250);\n\n    // history of updates\n    root.ref.previousAspectRatio = null;\n    root.ref.updateHistory = [];\n\n    // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n    const canHover = window.matchMedia('(pointer: fine) and (hover: hover)').matches;\n    const hasPointerEvents = 'PointerEvent' in window;\n    if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n        root.element.addEventListener('touchmove', prevent, { passive: false });\n        root.element.addEventListener('gesturestart', prevent);\n    }\n\n    // add credits\n    const credits = root.query('GET_CREDITS');\n    const hasCredits = credits.length === 2;\n    if (hasCredits) {\n        const frag = document.createElement('a');\n        frag.className = 'filepond--credits';\n        frag.setAttribute('aria-hidden', 'true');\n        frag.href = credits[0];\n        frag.tabindex = -1;\n        frag.target = '_blank';\n        frag.rel = 'noopener noreferrer';\n        frag.textContent = credits[1];\n        root.element.appendChild(frag);\n        root.ref.credits = frag;\n    }\n};\n\nconst write$9 = ({ root, props, actions }) => {\n    // route actions\n    route$5({ root, props, actions });\n\n    // apply style properties\n    actions\n        .filter(action => /^DID_SET_STYLE_/.test(action.type))\n        .filter(action => !isEmpty(action.data.value))\n        .map(({ type, data }) => {\n            const name = toCamels(type.substring(8).toLowerCase(), '_');\n            root.element.dataset[name] = data.value;\n            root.invalidateLayout();\n        });\n\n    if (root.rect.element.hidden) return;\n\n    if (root.rect.element.width !== root.ref.widthPrevious) {\n        root.ref.widthPrevious = root.rect.element.width;\n        root.ref.widthUpdated();\n    }\n\n    // get box bounds, we do this only once\n    let bounds = root.ref.bounds;\n    if (!bounds) {\n        bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n        // destroy measure element\n        root.element.removeChild(root.ref.measure);\n        root.ref.measure = null;\n    }\n\n    // get quick references to various high level parts of the upload tool\n    const { hopper, label, list, panel } = root.ref;\n\n    // sets correct state to hopper scope\n    if (hopper) {\n        hopper.updateHopperState();\n    }\n\n    // bool to indicate if we're full or not\n    const aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n    const isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n    const totalItems = root.query('GET_TOTAL_ITEMS');\n    const maxItems = isMultiItem ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT : 1;\n    const atMaxCapacity = totalItems === maxItems;\n\n    // action used to add item\n    const addAction = actions.find(action => action.type === 'DID_ADD_ITEM');\n\n    // if reached max capacity and we've just reached it\n    if (atMaxCapacity && addAction) {\n        // get interaction type\n        const interactionMethod = addAction.data.interactionMethod;\n\n        // hide label\n        label.opacity = 0;\n\n        if (isMultiItem) {\n            label.translateY = -40;\n        } else {\n            if (interactionMethod === InteractionMethod.API) {\n                label.translateX = 40;\n            } else if (interactionMethod === InteractionMethod.BROWSE) {\n                label.translateY = 40;\n            } else {\n                label.translateY = 30;\n            }\n        }\n    } else if (!atMaxCapacity) {\n        label.opacity = 1;\n        label.translateX = 0;\n        label.translateY = 0;\n    }\n\n    const listItemMargin = calculateListItemMargin(root);\n\n    const listHeight = calculateListHeight(root);\n\n    const labelHeight = label.rect.element.height;\n    const currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n    const listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n    const listMarginBottom = totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n    const visualHeight = currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n    const boundsHeight = currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n    // link list to label bottom position\n    list.translateY =\n        Math.max(0, currentLabelHeight - list.rect.element.marginTop) - listItemMargin.top;\n\n    if (aspectRatio) {\n        // fixed aspect ratio\n\n        // calculate height based on width\n        const width = root.rect.element.width;\n        const height = width * aspectRatio;\n\n        // clear history if aspect ratio has changed\n        if (aspectRatio !== root.ref.previousAspectRatio) {\n            root.ref.previousAspectRatio = aspectRatio;\n            root.ref.updateHistory = [];\n        }\n\n        // remember this width\n        const history = root.ref.updateHistory;\n        history.push(width);\n\n        const MAX_BOUNCES = 2;\n        if (history.length > MAX_BOUNCES * 2) {\n            const l = history.length;\n            const bottom = l - 10;\n            let bounces = 0;\n            for (let i = l; i >= bottom; i--) {\n                if (history[i] === history[i - 2]) {\n                    bounces++;\n                }\n\n                if (bounces >= MAX_BOUNCES) {\n                    // dont adjust height\n                    return;\n                }\n            }\n        }\n\n        // fix height of panel so it adheres to aspect ratio\n        panel.scalable = false;\n        panel.height = height;\n\n        // available height for list\n        const listAvailableHeight =\n            // the height of the panel minus the label height\n            height -\n            currentLabelHeight -\n            // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) -\n            // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n\n        if (listHeight.visual > listAvailableHeight) {\n            list.overflow = listAvailableHeight;\n        } else {\n            list.overflow = null;\n        }\n\n        // set container bounds (so pushes siblings downwards)\n        root.height = height;\n    } else if (bounds.fixedHeight) {\n        // fixed height\n\n        // fix height of panel\n        panel.scalable = false;\n\n        // available height for list\n        const listAvailableHeight =\n            // the height of the panel minus the label height\n            bounds.fixedHeight -\n            currentLabelHeight -\n            // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) -\n            // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n\n        // set list height\n        if (listHeight.visual > listAvailableHeight) {\n            list.overflow = listAvailableHeight;\n        } else {\n            list.overflow = null;\n        }\n\n        // no need to set container bounds as these are handles by CSS fixed height\n    } else if (bounds.cappedHeight) {\n        // max-height\n\n        // not a fixed height panel\n        const isCappedHeight = visualHeight >= bounds.cappedHeight;\n        const panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n        panel.scalable = true;\n        panel.height = isCappedHeight\n            ? panelHeight\n            : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n        // available height for list\n        const listAvailableHeight =\n            // the height of the panel minus the label height\n            panelHeight -\n            currentLabelHeight -\n            // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) -\n            // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n\n        // set list height (if is overflowing)\n        if (visualHeight > bounds.cappedHeight && listHeight.visual > listAvailableHeight) {\n            list.overflow = listAvailableHeight;\n        } else {\n            list.overflow = null;\n        }\n\n        // set container bounds (so pushes siblings downwards)\n        root.height = Math.min(\n            bounds.cappedHeight,\n            boundsHeight - listItemMargin.top - listItemMargin.bottom\n        );\n    } else {\n        // flexible height\n\n        // not a fixed height panel\n        const itemMargin = totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n        panel.scalable = true;\n        panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n        // set container bounds (so pushes siblings downwards)\n        root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n    }\n\n    // move credits to bottom\n    if (root.ref.credits && panel.heightCurrent)\n        root.ref.credits.style.transform = `translateY(${panel.heightCurrent}px)`;\n};\n\nconst calculateListItemMargin = root => {\n    const item = root.ref.list.childViews[0].childViews[0];\n    return item\n        ? {\n              top: item.rect.element.marginTop,\n              bottom: item.rect.element.marginBottom,\n          }\n        : {\n              top: 0,\n              bottom: 0,\n          };\n};\n\nconst calculateListHeight = root => {\n    let visual = 0;\n    let bounds = 0;\n\n    // get file list reference\n    const scrollList = root.ref.list;\n    const itemList = scrollList.childViews[0];\n    const visibleChildren = itemList.childViews.filter(child => child.rect.element.height);\n    const children = root\n        .query('GET_ACTIVE_ITEMS')\n        .map(item => visibleChildren.find(child => child.id === item.id))\n        .filter(item => item);\n\n    // no children, done!\n    if (children.length === 0) return { visual, bounds };\n\n    const horizontalSpace = itemList.rect.element.width;\n    const dragIndex = getItemIndexByPosition(itemList, children, scrollList.dragCoordinates);\n\n    const childRect = children[0].rect.element;\n\n    const itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    const itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n    const itemWidth = childRect.width + itemHorizontalMargin;\n    const itemHeight = childRect.height + itemVerticalMargin;\n\n    const newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n    const removedItem = children.find(child => child.markedForRemoval && child.opacity < 0.45)\n        ? -1\n        : 0;\n    const verticalItemCount = children.length + newItem + removedItem;\n    const itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n        children.forEach(item => {\n            const height = item.rect.element.height + itemVerticalMargin;\n            bounds += height;\n            visual += height * item.opacity;\n        });\n    }\n    // grid\n    else {\n        bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n        visual = bounds;\n    }\n\n    return { visual, bounds };\n};\n\nconst calculateRootBoundingBoxHeight = root => {\n    const height = root.ref.measureHeight || null;\n    const cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n    const fixedHeight = height === 0 ? null : height;\n\n    return {\n        cappedHeight,\n        fixedHeight,\n    };\n};\n\nconst exceedsMaxFiles = (root, items) => {\n    const allowReplace = root.query('GET_ALLOW_REPLACE');\n    const allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n    const totalItems = root.query('GET_TOTAL_ITEMS');\n    let maxItems = root.query('GET_MAX_FILES');\n\n    // total amount of items being dragged\n    const totalBrowseItems = items.length;\n\n    // if does not allow multiple items and dragging more than one item\n    if (!allowMultiple && totalBrowseItems > 1) {\n        root.dispatch('DID_THROW_MAX_FILES', {\n            source: items,\n            error: createResponse('warning', 0, 'Max files'),\n        });\n        return true;\n    }\n\n    // limit max items to one if not allowed to drop multiple items\n    maxItems = allowMultiple ? maxItems : 1;\n\n    if (!allowMultiple && allowReplace) {\n        // There is only one item, so there is room to replace or add an item\n        return false;\n    }\n\n    // no more room?\n    const hasMaxItems = isInt(maxItems);\n    if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n        root.dispatch('DID_THROW_MAX_FILES', {\n            source: items,\n            error: createResponse('warning', 0, 'Max files'),\n        });\n        return true;\n    }\n\n    return false;\n};\n\nconst getDragIndex = (list, children, position) => {\n    const itemList = list.childViews[0];\n    return getItemIndexByPosition(itemList, children, {\n        left: position.scopeLeft - itemList.rect.element.left,\n        top:\n            position.scopeTop -\n            (list.rect.outer.top + list.rect.element.marginTop + list.rect.element.scrollTop),\n    });\n};\n\n/**\n * Enable or disable file drop functionality\n */\nconst toggleDrop = root => {\n    const isAllowed = root.query('GET_ALLOW_DROP');\n    const isDisabled = root.query('GET_DISABLED');\n    const enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.hopper) {\n        const hopper = createHopper(\n            root.element,\n            items => {\n                // allow quick validation of dropped items\n                const beforeDropFile = root.query('GET_BEFORE_DROP_FILE') || (() => true);\n\n                // all items should be validated by all filters as valid\n                const dropValidation = root.query('GET_DROP_VALIDATION');\n                return dropValidation\n                    ? items.every(\n                          item =>\n                              applyFilters('ALLOW_HOPPER_ITEM', item, {\n                                  query: root.query,\n                              }).every(result => result === true) && beforeDropFile(item)\n                      )\n                    : true;\n            },\n            {\n                filterItems: items => {\n                    const ignoredFiles = root.query('GET_IGNORED_FILES');\n                    return items.filter(item => {\n                        if (isFile(item)) {\n                            return !ignoredFiles.includes(item.name.toLowerCase());\n                        }\n                        return true;\n                    });\n                },\n                catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n                requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT'),\n            }\n        );\n\n        hopper.onload = (items, position) => {\n            // get item children elements and sort based on list sort\n            const list = root.ref.list.childViews[0];\n            const visibleChildren = list.childViews.filter(child => child.rect.element.height);\n            const children = root\n                .query('GET_ACTIVE_ITEMS')\n                .map(item => visibleChildren.find(child => child.id === item.id))\n                .filter(item => item);\n\n            applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(queue => {\n                // these files don't fit so stop here\n                if (exceedsMaxFiles(root, queue)) return false;\n\n                // go\n                root.dispatch('ADD_ITEMS', {\n                    items: queue,\n                    index: getDragIndex(root.ref.list, children, position),\n                    interactionMethod: InteractionMethod.DROP,\n                });\n            });\n\n            root.dispatch('DID_DROP', { position });\n\n            root.dispatch('DID_END_DRAG', { position });\n        };\n\n        hopper.ondragstart = position => {\n            root.dispatch('DID_START_DRAG', { position });\n        };\n\n        hopper.ondrag = debounce(position => {\n            root.dispatch('DID_DRAG', { position });\n        });\n\n        hopper.ondragend = position => {\n            root.dispatch('DID_END_DRAG', { position });\n        };\n\n        root.ref.hopper = hopper;\n\n        root.ref.drip = root.appendChildView(root.createChildView(drip));\n    } else if (!enabled && root.ref.hopper) {\n        root.ref.hopper.destroy();\n        root.ref.hopper = null;\n        root.removeChildView(root.ref.drip);\n    }\n};\n\n/**\n * Enable or disable browse functionality\n */\nconst toggleBrowse = (root, props) => {\n    const isAllowed = root.query('GET_ALLOW_BROWSE');\n    const isDisabled = root.query('GET_DISABLED');\n    const enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.browser) {\n        root.ref.browser = root.appendChildView(\n            root.createChildView(browser, {\n                ...props,\n                onload: items => {\n                    applyFilterChain('ADD_ITEMS', items, {\n                        dispatch: root.dispatch,\n                    }).then(queue => {\n                        // these files don't fit so stop here\n                        if (exceedsMaxFiles(root, queue)) return false;\n\n                        // add items!\n                        root.dispatch('ADD_ITEMS', {\n                            items: queue,\n                            index: -1,\n                            interactionMethod: InteractionMethod.BROWSE,\n                        });\n                    });\n                },\n            }),\n            0\n        );\n    } else if (!enabled && root.ref.browser) {\n        root.removeChildView(root.ref.browser);\n        root.ref.browser = null;\n    }\n};\n\n/**\n * Enable or disable paste functionality\n */\nconst togglePaste = root => {\n    const isAllowed = root.query('GET_ALLOW_PASTE');\n    const isDisabled = root.query('GET_DISABLED');\n    const enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.paster) {\n        root.ref.paster = createPaster();\n        root.ref.paster.onload = items => {\n            applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(queue => {\n                // these files don't fit so stop here\n                if (exceedsMaxFiles(root, queue)) return false;\n\n                // add items!\n                root.dispatch('ADD_ITEMS', {\n                    items: queue,\n                    index: -1,\n                    interactionMethod: InteractionMethod.PASTE,\n                });\n            });\n        };\n    } else if (!enabled && root.ref.paster) {\n        root.ref.paster.destroy();\n        root.ref.paster = null;\n    }\n};\n\n/**\n * Route actions\n */\nconst route$5 = createRoute({\n    DID_SET_ALLOW_BROWSE: ({ root, props }) => {\n        toggleBrowse(root, props);\n    },\n    DID_SET_ALLOW_DROP: ({ root }) => {\n        toggleDrop(root);\n    },\n    DID_SET_ALLOW_PASTE: ({ root }) => {\n        togglePaste(root);\n    },\n    DID_SET_DISABLED: ({ root, props }) => {\n        toggleDrop(root);\n        togglePaste(root);\n        toggleBrowse(root, props);\n        const isDisabled = root.query('GET_DISABLED');\n        if (isDisabled) {\n            root.element.dataset.disabled = 'disabled';\n        } else {\n            // delete root.element.dataset.disabled; <= this does not work on iOS 10\n            root.element.removeAttribute('data-disabled');\n        }\n    },\n});\n\nconst root = createView({\n    name: 'root',\n    read: ({ root }) => {\n        if (root.ref.measure) {\n            root.ref.measureHeight = root.ref.measure.offsetHeight;\n        }\n    },\n    create: create$e,\n    write: write$9,\n    destroy: ({ root }) => {\n        if (root.ref.paster) {\n            root.ref.paster.destroy();\n        }\n        if (root.ref.hopper) {\n            root.ref.hopper.destroy();\n        }\n        root.element.removeEventListener('touchmove', prevent);\n        root.element.removeEventListener('gesturestart', prevent);\n    },\n    mixins: {\n        styles: ['height'],\n    },\n});\n\n// creates the app\nconst createApp = (initialOptions = {}) => {\n    // let element\n    let originalElement = null;\n\n    // get default options\n    const defaultOptions = getOptions();\n\n    // create the data store, this will contain all our app info\n    const store = createStore(\n        // initial state (should be serializable)\n        createInitialState(defaultOptions),\n\n        // queries\n        [queries, createOptionQueries(defaultOptions)],\n\n        // action handlers\n        [actions, createOptionActions(defaultOptions)]\n    );\n\n    // set initial options\n    store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n    // kick thread if visibility changes\n    const visibilityHandler = () => {\n        if (document.hidden) return;\n        store.dispatch('KICK');\n    };\n    document.addEventListener('visibilitychange', visibilityHandler);\n\n    // re-render on window resize start and finish\n    let resizeDoneTimer = null;\n    let isResizing = false;\n    let isResizingHorizontally = false;\n    let initialWindowWidth = null;\n    let currentWindowWidth = null;\n    const resizeHandler = () => {\n        if (!isResizing) {\n            isResizing = true;\n        }\n        clearTimeout(resizeDoneTimer);\n        resizeDoneTimer = setTimeout(() => {\n            isResizing = false;\n            initialWindowWidth = null;\n            currentWindowWidth = null;\n            if (isResizingHorizontally) {\n                isResizingHorizontally = false;\n                store.dispatch('DID_STOP_RESIZE');\n            }\n        }, 500);\n    };\n    window.addEventListener('resize', resizeHandler);\n\n    // render initial view\n    const view = root(store, { id: getUniqueId() });\n\n    //\n    // PRIVATE API -------------------------------------------------------------------------------------\n    //\n    let isResting = false;\n    let isHidden = false;\n\n    const readWriteApi = {\n        // necessary for update loop\n\n        /**\n         * Reads from dom (never call manually)\n         * @private\n         */\n        _read: () => {\n            // test if we're resizing horizontally\n            // TODO: see if we can optimize this by measuring root rect\n            if (isResizing) {\n                currentWindowWidth = window.innerWidth;\n                if (!initialWindowWidth) {\n                    initialWindowWidth = currentWindowWidth;\n                }\n\n                if (!isResizingHorizontally && currentWindowWidth !== initialWindowWidth) {\n                    store.dispatch('DID_START_RESIZE');\n                    isResizingHorizontally = true;\n                }\n            }\n\n            if (isHidden && isResting) {\n                // test if is no longer hidden\n                isResting = view.element.offsetParent === null;\n            }\n\n            // if resting, no need to read as numbers will still all be correct\n            if (isResting) return;\n\n            // read view data\n            view._read();\n\n            // if is hidden we need to know so we exit rest mode when revealed\n            isHidden = view.rect.element.hidden;\n        },\n\n        /**\n         * Writes to dom (never call manually)\n         * @private\n         */\n        _write: ts => {\n            // get all actions from store\n            const actions = store\n                .processActionQueue()\n\n                // filter out set actions (these will automatically trigger DID_SET)\n                .filter(action => !/^SET_/.test(action.type));\n\n            // if was idling and no actions stop here\n            if (isResting && !actions.length) return;\n\n            // some actions might trigger events\n            routeActionsToEvents(actions);\n\n            // update the view\n            isResting = view._write(ts, actions, isResizingHorizontally);\n\n            // will clean up all archived items\n            removeReleasedItems(store.query('GET_ITEMS'));\n\n            // now idling\n            if (isResting) {\n                store.processDispatchQueue();\n            }\n        },\n    };\n\n    //\n    // EXPOSE EVENTS -------------------------------------------------------------------------------------\n    //\n    const createEvent = name => data => {\n        // create default event\n        const event = {\n            type: name,\n        };\n\n        // no data to add\n        if (!data) {\n            return event;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('error')) {\n            event.error = data.error ? { ...data.error } : null;\n        }\n\n        if (data.status) {\n            event.status = { ...data.status };\n        }\n\n        if (data.file) {\n            event.output = data.file;\n        }\n\n        // only source is available, else add item if possible\n        if (data.source) {\n            event.file = data.source;\n        } else if (data.item || data.id) {\n            const item = data.item ? data.item : store.query('GET_ITEM', data.id);\n            event.file = item ? createItemAPI(item) : null;\n        }\n\n        // map all items in a possible items array\n        if (data.items) {\n            event.items = data.items.map(createItemAPI);\n        }\n\n        // if this is a progress event add the progress amount\n        if (/progress/.test(name)) {\n            event.progress = data.progress;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('origin') && data.hasOwnProperty('target')) {\n            event.origin = data.origin;\n            event.target = data.target;\n        }\n\n        return event;\n    };\n\n    const eventRoutes = {\n        DID_DESTROY: createEvent('destroy'),\n\n        DID_INIT: createEvent('init'),\n\n        DID_THROW_MAX_FILES: createEvent('warning'),\n\n        DID_INIT_ITEM: createEvent('initfile'),\n        DID_START_ITEM_LOAD: createEvent('addfilestart'),\n        DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n        DID_LOAD_ITEM: createEvent('addfile'),\n\n        DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n        DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n        DID_THROW_ITEM_REMOVE_ERROR: [createEvent('error'), createEvent('removefile')],\n\n        DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n        DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n        DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n        DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n        DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n        DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n        DID_THROW_ITEM_PROCESSING_ERROR: [createEvent('error'), createEvent('processfile')],\n\n        DID_REMOVE_ITEM: createEvent('removefile'),\n\n        DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n        DID_ACTIVATE_ITEM: createEvent('activatefile'),\n\n        DID_REORDER_ITEMS: createEvent('reorderfiles'),\n    };\n\n    const exposeEvent = event => {\n        // create event object to be dispatched\n        const detail = { pond: exports, ...event };\n        delete detail.type;\n        view.element.dispatchEvent(\n            new CustomEvent(`FilePond:${event.type}`, {\n                // event info\n                detail,\n\n                // event behaviour\n                bubbles: true,\n                cancelable: true,\n                composed: true, // triggers listeners outside of shadow root\n            })\n        );\n\n        // event object to params used for `on()` event handlers and callbacks `oninit()`\n        const params = [];\n\n        // if is possible error event, make it the first param\n        if (event.hasOwnProperty('error')) {\n            params.push(event.error);\n        }\n\n        // file is always section\n        if (event.hasOwnProperty('file')) {\n            params.push(event.file);\n        }\n\n        // append other props\n        const filtered = ['type', 'error', 'file'];\n        Object.keys(event)\n            .filter(key => !filtered.includes(key))\n            .forEach(key => params.push(event[key]));\n\n        // on(type, () => { })\n        exports.fire(event.type, ...params);\n\n        // oninit = () => {}\n        const handler = store.query(`GET_ON${event.type.toUpperCase()}`);\n        if (handler) {\n            handler(...params);\n        }\n    };\n\n    const routeActionsToEvents = actions => {\n        if (!actions.length) return;\n        actions\n            .filter(action => eventRoutes[action.type])\n            .forEach(action => {\n                const routes = eventRoutes[action.type];\n                (Array.isArray(routes) ? routes : [routes]).forEach(route => {\n                    // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n                    if (action.type === 'DID_INIT_ITEM') {\n                        exposeEvent(route(action.data));\n                    } else {\n                        setTimeout(() => {\n                            exposeEvent(route(action.data));\n                        }, 0);\n                    }\n                });\n            });\n    };\n\n    //\n    // PUBLIC API -------------------------------------------------------------------------------------\n    //\n    const setOptions = options => store.dispatch('SET_OPTIONS', { options });\n\n    const getFile = query => store.query('GET_ACTIVE_ITEM', query);\n\n    const prepareFile = query =>\n        new Promise((resolve, reject) => {\n            store.dispatch('REQUEST_ITEM_PREPARE', {\n                query,\n                success: item => {\n                    resolve(item);\n                },\n                failure: error => {\n                    reject(error);\n                },\n            });\n        });\n\n    const addFile = (source, options = {}) =>\n        new Promise((resolve, reject) => {\n            addFiles([{ source, options }], { index: options.index })\n                .then(items => resolve(items && items[0]))\n                .catch(reject);\n        });\n\n    const isFilePondFile = obj => obj.file && obj.id;\n\n    const removeFile = (query, options) => {\n        // if only passed options\n        if (typeof query === 'object' && !isFilePondFile(query) && !options) {\n            options = query;\n            query = undefined;\n        }\n\n        // request item removal\n        store.dispatch('REMOVE_ITEM', { ...options, query });\n\n        // see if item has been removed\n        return store.query('GET_ACTIVE_ITEM', query) === null;\n    };\n\n    const addFiles = (...args) =>\n        new Promise((resolve, reject) => {\n            const sources = [];\n            const options = {};\n\n            // user passed a sources array\n            if (isArray(args[0])) {\n                sources.push.apply(sources, args[0]);\n                Object.assign(options, args[1] || {});\n            } else {\n                // user passed sources as arguments, last one might be options object\n                const lastArgument = args[args.length - 1];\n                if (typeof lastArgument === 'object' && !(lastArgument instanceof Blob)) {\n                    Object.assign(options, args.pop());\n                }\n\n                // add rest to sources\n                sources.push(...args);\n            }\n\n            store.dispatch('ADD_ITEMS', {\n                items: sources,\n                index: options.index,\n                interactionMethod: InteractionMethod.API,\n                success: resolve,\n                failure: reject,\n            });\n        });\n\n    const getFiles = () => store.query('GET_ACTIVE_ITEMS');\n\n    const processFile = query =>\n        new Promise((resolve, reject) => {\n            store.dispatch('REQUEST_ITEM_PROCESSING', {\n                query,\n                success: item => {\n                    resolve(item);\n                },\n                failure: error => {\n                    reject(error);\n                },\n            });\n        });\n\n    const prepareFiles = (...args) => {\n        const queries = Array.isArray(args[0]) ? args[0] : args;\n        const items = queries.length ? queries : getFiles();\n        return Promise.all(items.map(prepareFile));\n    };\n\n    const processFiles = (...args) => {\n        const queries = Array.isArray(args[0]) ? args[0] : args;\n        if (!queries.length) {\n            const files = getFiles().filter(\n                item =>\n                    !(item.status === ItemStatus.IDLE && item.origin === FileOrigin.LOCAL) &&\n                    item.status !== ItemStatus.PROCESSING &&\n                    item.status !== ItemStatus.PROCESSING_COMPLETE &&\n                    item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n            );\n            return Promise.all(files.map(processFile));\n        }\n        return Promise.all(queries.map(processFile));\n    };\n\n    const removeFiles = (...args) => {\n        const queries = Array.isArray(args[0]) ? args[0] : args;\n\n        let options;\n        if (typeof queries[queries.length - 1] === 'object') {\n            options = queries.pop();\n        } else if (Array.isArray(args[0])) {\n            options = args[1];\n        }\n\n        const files = getFiles();\n\n        if (!queries.length) return Promise.all(files.map(file => removeFile(file, options)));\n\n        // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n        const mappedQueries = queries\n            .map(query => (isNumber(query) ? (files[query] ? files[query].id : null) : query))\n            .filter(query => query);\n\n        return mappedQueries.map(q => removeFile(q, options));\n    };\n\n    const exports = {\n        // supports events\n        ...on(),\n\n        // inject private api methods\n        ...readWriteApi,\n\n        // inject all getters and setters\n        ...createOptionAPI(store, defaultOptions),\n\n        /**\n         * Override options defined in options object\n         * @param options\n         */\n        setOptions,\n\n        /**\n         * Load the given file\n         * @param source - the source of the file (either a File, base64 data uri or url)\n         * @param options - object, { index: 0 }\n         */\n        addFile,\n\n        /**\n         * Load the given files\n         * @param sources - the sources of the files to load\n         * @param options - object, { index: 0 }\n         */\n        addFiles,\n\n        /**\n         * Returns the file objects matching the given query\n         * @param query { string, number, null }\n         */\n        getFile,\n\n        /**\n         * Upload file with given name\n         * @param query { string, number, null  }\n         */\n        processFile,\n\n        /**\n         * Request prepare output for file with given name\n         * @param query { string, number, null  }\n         */\n        prepareFile,\n\n        /**\n         * Removes a file by its name\n         * @param query { string, number, null  }\n         */\n        removeFile,\n\n        /**\n         * Moves a file to a new location in the files list\n         */\n        moveFile: (query, index) => store.dispatch('MOVE_ITEM', { query, index }),\n\n        /**\n         * Returns all files (wrapped in public api)\n         */\n        getFiles,\n\n        /**\n         * Starts uploading all files\n         */\n        processFiles,\n\n        /**\n         * Clears all files from the files list\n         */\n        removeFiles,\n\n        /**\n         * Starts preparing output of all files\n         */\n        prepareFiles,\n\n        /**\n         * Sort list of files\n         */\n        sort: compare => store.dispatch('SORT', { compare }),\n\n        /**\n         * Browse the file system for a file\n         */\n        browse: () => {\n            // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n            var input = view.element.querySelector('input[type=file]');\n            if (input) {\n                input.click();\n            }\n        },\n\n        /**\n         * Destroys the app\n         */\n        destroy: () => {\n            // request destruction\n            exports.fire('destroy', view.element);\n\n            // stop active processes (file uploads, fetches, stuff like that)\n            // loop over items and depending on states call abort for ongoing processes\n            store.dispatch('ABORT_ALL');\n\n            // destroy view\n            view._destroy();\n\n            // stop listening to resize\n            window.removeEventListener('resize', resizeHandler);\n\n            // stop listening to the visiblitychange event\n            document.removeEventListener('visibilitychange', visibilityHandler);\n\n            // dispatch destroy\n            store.dispatch('DID_DESTROY');\n        },\n\n        /**\n         * Inserts the plugin before the target element\n         */\n        insertBefore: element => insertBefore(view.element, element),\n\n        /**\n         * Inserts the plugin after the target element\n         */\n        insertAfter: element => insertAfter(view.element, element),\n\n        /**\n         * Appends the plugin to the target element\n         */\n        appendTo: element => element.appendChild(view.element),\n\n        /**\n         * Replaces an element with the app\n         */\n        replaceElement: element => {\n            // insert the app before the element\n            insertBefore(view.element, element);\n\n            // remove the original element\n            element.parentNode.removeChild(element);\n\n            // remember original element\n            originalElement = element;\n        },\n\n        /**\n         * Restores the original element\n         */\n        restoreElement: () => {\n            if (!originalElement) {\n                return; // no element to restore\n            }\n\n            // restore original element\n            insertAfter(originalElement, view.element);\n\n            // remove our element\n            view.element.parentNode.removeChild(view.element);\n\n            // remove reference\n            originalElement = null;\n        },\n\n        /**\n         * Returns true if the app root is attached to given element\n         * @param element\n         */\n        isAttachedTo: element => view.element === element || originalElement === element,\n\n        /**\n         * Returns the root element\n         */\n        element: {\n            get: () => view.element,\n        },\n\n        /**\n         * Returns the current pond status\n         */\n        status: {\n            get: () => store.query('GET_STATUS'),\n        },\n    };\n\n    // Done!\n    store.dispatch('DID_INIT');\n\n    // create actual api object\n    return createObject(exports);\n};\n\nconst createAppObject = (customOptions = {}) => {\n    // default options\n    const defaultOptions = {};\n    forin(getOptions(), (key, value) => {\n        defaultOptions[key] = value[0];\n    });\n\n    // set app options\n    const app = createApp({\n        // default options\n        ...defaultOptions,\n\n        // custom options\n        ...customOptions,\n    });\n\n    // return the plugin instance\n    return app;\n};\n\nconst lowerCaseFirstLetter = string => string.charAt(0).toLowerCase() + string.slice(1);\n\nconst attributeNameToPropertyName = attributeName => toCamels(attributeName.replace(/^data-/, ''));\n\nconst mapObject = (object, propertyMap) => {\n    // remove unwanted\n    forin(propertyMap, (selector, mapping) => {\n        forin(object, (property, value) => {\n            // create regexp shortcut\n            const selectorRegExp = new RegExp(selector);\n\n            // tests if\n            const matches = selectorRegExp.test(property);\n\n            // no match, skip\n            if (!matches) {\n                return;\n            }\n\n            // if there's a mapping, the original property is always removed\n            delete object[property];\n\n            // should only remove, we done!\n            if (mapping === false) {\n                return;\n            }\n\n            // move value to new property\n            if (isString(mapping)) {\n                object[mapping] = value;\n                return;\n            }\n\n            // move to group\n            const group = mapping.group;\n            if (isObject(mapping) && !object[group]) {\n                object[group] = {};\n            }\n\n            object[group][lowerCaseFirstLetter(property.replace(selectorRegExp, ''))] = value;\n        });\n\n        // do submapping\n        if (mapping.mapping) {\n            mapObject(object[mapping.group], mapping.mapping);\n        }\n    });\n};\n\nconst getAttributesAsObject = (node, attributeMapping = {}) => {\n    // turn attributes into object\n    const attributes = [];\n    forin(node.attributes, index => {\n        attributes.push(node.attributes[index]);\n    });\n\n    const output = attributes\n        .filter(attribute => attribute.name)\n        .reduce((obj, attribute) => {\n            const value = attr(node, attribute.name);\n\n            obj[attributeNameToPropertyName(attribute.name)] =\n                value === attribute.name ? true : value;\n            return obj;\n        }, {});\n\n    // do mapping of object properties\n    mapObject(output, attributeMapping);\n\n    return output;\n};\n\nconst createAppAtElement = (element, options = {}) => {\n    // how attributes of the input element are mapped to the options for the plugin\n    const attributeMapping = {\n        // translate to other name\n        '^class$': 'className',\n        '^multiple$': 'allowMultiple',\n        '^capture$': 'captureMethod',\n        '^webkitdirectory$': 'allowDirectoriesOnly',\n\n        // group under single property\n        '^server': {\n            group: 'server',\n            mapping: {\n                '^process': {\n                    group: 'process',\n                },\n                '^revert': {\n                    group: 'revert',\n                },\n                '^fetch': {\n                    group: 'fetch',\n                },\n                '^restore': {\n                    group: 'restore',\n                },\n                '^load': {\n                    group: 'load',\n                },\n            },\n        },\n\n        // don't include in object\n        '^type$': false,\n        '^files$': false,\n    };\n\n    // add additional option translators\n    applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n    // create final options object by setting options object and then overriding options supplied on element\n    const mergedOptions = {\n        ...options,\n    };\n\n    const attributeOptions = getAttributesAsObject(\n        element.nodeName === 'FIELDSET' ? element.querySelector('input[type=file]') : element,\n        attributeMapping\n    );\n\n    // merge with options object\n    Object.keys(attributeOptions).forEach(key => {\n        if (isObject(attributeOptions[key])) {\n            if (!isObject(mergedOptions[key])) {\n                mergedOptions[key] = {};\n            }\n            Object.assign(mergedOptions[key], attributeOptions[key]);\n        } else {\n            mergedOptions[key] = attributeOptions[key];\n        }\n    });\n\n    // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n    // these will then be automatically set to the initial files\n    mergedOptions.files = (options.files || []).concat(\n        Array.from(element.querySelectorAll('input:not([type=file])')).map(input => ({\n            source: input.value,\n            options: {\n                type: input.dataset.type,\n            },\n        }))\n    );\n\n    // build plugin\n    const app = createAppObject(mergedOptions);\n\n    // add already selected files\n    if (element.files) {\n        Array.from(element.files).forEach(file => {\n            app.addFile(file);\n        });\n    }\n\n    // replace the target element\n    app.replaceElement(element);\n\n    // expose\n    return app;\n};\n\n// if an element is passed, we create the instance at that element, if not, we just create an up object\nconst createApp$1 = (...args) =>\n    isNode(args[0]) ? createAppAtElement(...args) : createAppObject(...args);\n\nconst PRIVATE_METHODS = ['fire', '_read', '_write'];\n\nconst createAppAPI = app => {\n    const api = {};\n\n    copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n    return api;\n};\n\n/**\n * Replaces placeholders in given string with replacements\n * @param string - \"Foo {bar}\"\"\n * @param replacements - { \"bar\": 10 }\n */\nconst replaceInString = (string, replacements) =>\n    string.replace(/(?:{([a-zA-Z]+)})/g, (match, group) => replacements[group]);\n\nconst createWorker = fn => {\n    const workerBlob = new Blob(['(', fn.toString(), ')()'], {\n        type: 'application/javascript',\n    });\n    const workerURL = URL.createObjectURL(workerBlob);\n    const worker = new Worker(workerURL);\n\n    return {\n        transfer: (message, cb) => {},\n        post: (message, cb, transferList) => {\n            const id = getUniqueId();\n\n            worker.onmessage = e => {\n                if (e.data.id === id) {\n                    cb(e.data.message);\n                }\n            };\n\n            worker.postMessage(\n                {\n                    id,\n                    message,\n                },\n                transferList\n            );\n        },\n        terminate: () => {\n            worker.terminate();\n            URL.revokeObjectURL(workerURL);\n        },\n    };\n};\n\nconst loadImage = url =>\n    new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n            resolve(img);\n        };\n        img.onerror = e => {\n            reject(e);\n        };\n        img.src = url;\n    });\n\nconst renameFile = (file, name) => {\n    const renamedFile = file.slice(0, file.size, file.type);\n    renamedFile.lastModifiedDate = file.lastModifiedDate;\n    renamedFile.name = name;\n    return renamedFile;\n};\n\nconst copyFile = file => renameFile(file, file.name);\n\n// already registered plugins (can't register twice)\nconst registeredPlugins = [];\n\n// pass utils to plugin\nconst createAppPlugin = plugin => {\n    // already registered\n    if (registeredPlugins.includes(plugin)) {\n        return;\n    }\n\n    // remember this plugin\n    registeredPlugins.push(plugin);\n\n    // setup!\n    const pluginOutline = plugin({\n        addFilter,\n        utils: {\n            Type,\n            forin,\n            isString,\n            isFile,\n            toNaturalFileSize,\n            replaceInString,\n            getExtensionFromFilename,\n            getFilenameWithoutExtension,\n            guesstimateMimeType,\n            getFileFromBlob,\n            getFilenameFromURL,\n            createRoute,\n            createWorker,\n            createView,\n            createItemAPI,\n            loadImage,\n            copyFile,\n            renameFile,\n            createBlob,\n            applyFilterChain,\n            text,\n            getNumericAspectRatioFromString,\n        },\n        views: {\n            fileActionButton,\n        },\n    });\n\n    // add plugin options to default options\n    extendDefaultOptions(pluginOutline.options);\n};\n\n// feature detection used by supported() method\nconst isOperaMini = () => Object.prototype.toString.call(window.operamini) === '[object OperaMini]';\nconst hasPromises = () => 'Promise' in window;\nconst hasBlobSlice = () => 'slice' in Blob.prototype;\nconst hasCreateObjectURL = () => 'URL' in window && 'createObjectURL' in window.URL;\nconst hasVisibility = () => 'visibilityState' in document;\nconst hasTiming = () => 'performance' in window; // iOS 8.x\nconst hasCSSSupports = () => 'supports' in (window.CSS || {}); // use to detect Safari 9+\nconst isIE11 = () => /MSIE|Trident/.test(window.navigator.userAgent);\n\nconst supported = (() => {\n    // Runs immediately and then remembers result for subsequent calls\n    const isSupported =\n        // Has to be a browser\n        isBrowser() &&\n        // Can't run on Opera Mini due to lack of everything\n        !isOperaMini() &&\n        // Require these APIs to feature detect a modern browser\n        hasVisibility() &&\n        hasPromises() &&\n        hasBlobSlice() &&\n        hasCreateObjectURL() &&\n        hasTiming() &&\n        // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n        (hasCSSSupports() || isIE11());\n\n    return () => isSupported;\n})();\n\n/**\n * Plugin internal state (over all instances)\n */\nconst state = {\n    // active app instances, used to redraw the apps and to find the later\n    apps: [],\n};\n\n// plugin name\nconst name = 'filepond';\n\n/**\n * Public Plugin methods\n */\nconst fn = () => {};\nlet Status$1 = {};\nlet FileStatus = {};\nlet FileOrigin$1 = {};\nlet OptionTypes = {};\nlet create$f = fn;\nlet destroy = fn;\nlet parse = fn;\nlet find = fn;\nlet registerPlugin = fn;\nlet getOptions$1 = fn;\nlet setOptions$1 = fn;\n\n// if not supported, no API\nif (supported()) {\n    // start painter and fire load event\n    createPainter(\n        () => {\n            state.apps.forEach(app => app._read());\n        },\n        ts => {\n            state.apps.forEach(app => app._write(ts));\n        }\n    );\n\n    // fire loaded event so we know when FilePond is available\n    const dispatch = () => {\n        // let others know we have area ready\n        document.dispatchEvent(\n            new CustomEvent('FilePond:loaded', {\n                detail: {\n                    supported,\n                    create: create$f,\n                    destroy,\n                    parse,\n                    find,\n                    registerPlugin,\n                    setOptions: setOptions$1,\n                },\n            })\n        );\n\n        // clean up event\n        document.removeEventListener('DOMContentLoaded', dispatch);\n    };\n\n    if (document.readyState !== 'loading') {\n        // move to back of execution queue, FilePond should have been exported by then\n        setTimeout(() => dispatch(), 0);\n    } else {\n        document.addEventListener('DOMContentLoaded', dispatch);\n    }\n\n    // updates the OptionTypes object based on the current options\n    const updateOptionTypes = () =>\n        forin(getOptions(), (key, value) => {\n            OptionTypes[key] = value[1];\n        });\n\n    Status$1 = { ...Status };\n    FileOrigin$1 = { ...FileOrigin };\n    FileStatus = { ...ItemStatus };\n\n    OptionTypes = {};\n    updateOptionTypes();\n\n    // create method, creates apps and adds them to the app array\n    create$f = (...args) => {\n        const app = createApp$1(...args);\n        app.on('destroy', destroy);\n        state.apps.push(app);\n        return createAppAPI(app);\n    };\n\n    // destroys apps and removes them from the app array\n    destroy = hook => {\n        // returns true if the app was destroyed successfully\n        const indexToRemove = state.apps.findIndex(app => app.isAttachedTo(hook));\n        if (indexToRemove >= 0) {\n            // remove from apps\n            const app = state.apps.splice(indexToRemove, 1)[0];\n\n            // restore original dom element\n            app.restoreElement();\n\n            return true;\n        }\n\n        return false;\n    };\n\n    // parses the given context for plugins (does not include the context element itself)\n    parse = context => {\n        // get all possible hooks\n        const matchedHooks = Array.from(context.querySelectorAll(`.${name}`));\n\n        // filter out already active hooks\n        const newHooks = matchedHooks.filter(\n            newHook => !state.apps.find(app => app.isAttachedTo(newHook))\n        );\n\n        // create new instance for each hook\n        return newHooks.map(hook => create$f(hook));\n    };\n\n    // returns an app based on the given element hook\n    find = hook => {\n        const app = state.apps.find(app => app.isAttachedTo(hook));\n        if (!app) {\n            return null;\n        }\n        return createAppAPI(app);\n    };\n\n    // adds a plugin extension\n    registerPlugin = (...plugins) => {\n        // register plugins\n        plugins.forEach(createAppPlugin);\n\n        // update OptionTypes, each plugin might have extended the default options\n        updateOptionTypes();\n    };\n\n    getOptions$1 = () => {\n        const opts = {};\n        forin(getOptions(), (key, value) => {\n            opts[key] = value[0];\n        });\n        return opts;\n    };\n\n    setOptions$1 = opts => {\n        if (isObject(opts)) {\n            // update existing plugins\n            state.apps.forEach(app => {\n                app.setOptions(opts);\n            });\n\n            // override defaults\n            setOptions(opts);\n        }\n\n        // return new options\n        return getOptions$1();\n    };\n}\n\nexport {\n    FileOrigin$1 as FileOrigin,\n    FileStatus,\n    OptionTypes,\n    Status$1 as Status,\n    create$f as create,\n    destroy,\n    find,\n    getOptions$1 as getOptions,\n    parse,\n    registerPlugin,\n    setOptions$1 as setOptions,\n    supported,\n};\n","/*!\n * FilePondPluginImagePreview 4.6.12\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n// test if file is of type image and can be viewed in canvas\nconst isPreviewableImage = file => /^image/.test(file.type);\n\nconst vectorMultiply = (v, amount) => createVector(v.x * amount, v.y * amount);\n\nconst vectorAdd = (a, b) => createVector(a.x + b.x, a.y + b.y);\n\nconst vectorNormalize = v => {\n  const l = Math.sqrt(v.x * v.x + v.y * v.y);\n  if (l === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  return createVector(v.x / l, v.y / l);\n};\n\nconst vectorRotate = (v, radians, origin) => {\n  const cos = Math.cos(radians);\n  const sin = Math.sin(radians);\n  const t = createVector(v.x - origin.x, v.y - origin.y);\n  return createVector(\n    origin.x + cos * t.x - sin * t.y,\n    origin.y + sin * t.x + cos * t.y\n  );\n};\n\nconst createVector = (x = 0, y = 0) => ({ x, y });\n\nconst getMarkupValue = (value, size, scalar = 1, axis) => {\n  if (typeof value === 'string') {\n    return parseFloat(value) * scalar;\n  }\n  if (typeof value === 'number') {\n    return value * (axis ? size[axis] : Math.min(size.width, size.height));\n  }\n  return;\n};\n\nconst getMarkupStyles = (markup, size, scale) => {\n  const lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n  const fill = markup.backgroundColor || markup.fontColor || 'transparent';\n  const stroke = markup.borderColor || markup.lineColor || 'transparent';\n  const strokeWidth = getMarkupValue(\n    markup.borderWidth || markup.lineWidth,\n    size,\n    scale\n  );\n  const lineCap = markup.lineCap || 'round';\n  const lineJoin = markup.lineJoin || 'round';\n  const dashes =\n    typeof lineStyle === 'string'\n      ? ''\n      : lineStyle.map(v => getMarkupValue(v, size, scale)).join(',');\n  const opacity = markup.opacity || 1;\n  return {\n    'stroke-linecap': lineCap,\n    'stroke-linejoin': lineJoin,\n    'stroke-width': strokeWidth || 0,\n    'stroke-dasharray': dashes,\n    stroke,\n    fill,\n    opacity\n  };\n};\n\nconst isDefined = value => value != null;\n\nconst getMarkupRect = (rect, size, scalar = 1) => {\n  let left =\n    getMarkupValue(rect.x, size, scalar, 'width') ||\n    getMarkupValue(rect.left, size, scalar, 'width');\n  let top =\n    getMarkupValue(rect.y, size, scalar, 'height') ||\n    getMarkupValue(rect.top, size, scalar, 'height');\n  let width = getMarkupValue(rect.width, size, scalar, 'width');\n  let height = getMarkupValue(rect.height, size, scalar, 'height');\n  let right = getMarkupValue(rect.right, size, scalar, 'width');\n  let bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n  if (!isDefined(top)) {\n    if (isDefined(height) && isDefined(bottom)) {\n      top = size.height - height - bottom;\n    } else {\n      top = bottom;\n    }\n  }\n\n  if (!isDefined(left)) {\n    if (isDefined(width) && isDefined(right)) {\n      left = size.width - width - right;\n    } else {\n      left = right;\n    }\n  }\n\n  if (!isDefined(width)) {\n    if (isDefined(left) && isDefined(right)) {\n      width = size.width - left - right;\n    } else {\n      width = 0;\n    }\n  }\n\n  if (!isDefined(height)) {\n    if (isDefined(top) && isDefined(bottom)) {\n      height = size.height - top - bottom;\n    } else {\n      height = 0;\n    }\n  }\n\n  return {\n    x: left || 0,\n    y: top || 0,\n    width: width || 0,\n    height: height || 0\n  };\n};\n\nconst pointsToPathShape = points =>\n  points\n    .map((point, index) => `${index === 0 ? 'M' : 'L'} ${point.x} ${point.y}`)\n    .join(' ');\n\nconst setAttributes = (element, attr) =>\n  Object.keys(attr).forEach(key => element.setAttribute(key, attr[key]));\n\nconst ns = 'http://www.w3.org/2000/svg';\nconst svg = (tag, attr) => {\n  const element = document.createElementNS(ns, tag);\n  if (attr) {\n    setAttributes(element, attr);\n  }\n  return element;\n};\n\nconst updateRect = element =>\n  setAttributes(element, {\n    ...element.rect,\n    ...element.styles\n  });\n\nconst updateEllipse = element => {\n  const cx = element.rect.x + element.rect.width * 0.5;\n  const cy = element.rect.y + element.rect.height * 0.5;\n  const rx = element.rect.width * 0.5;\n  const ry = element.rect.height * 0.5;\n  return setAttributes(element, {\n    cx,\n    cy,\n    rx,\n    ry,\n    ...element.styles\n  });\n};\n\nconst IMAGE_FIT_STYLE = {\n  contain: 'xMidYMid meet',\n  cover: 'xMidYMid slice'\n};\n\nconst updateImage = (element, markup) => {\n  setAttributes(element, {\n    ...element.rect,\n    ...element.styles,\n    preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none'\n  });\n};\n\nconst TEXT_ANCHOR = {\n  left: 'start',\n  center: 'middle',\n  right: 'end'\n};\n\nconst updateText = (element, markup, size, scale) => {\n  const fontSize = getMarkupValue(markup.fontSize, size, scale);\n  const fontFamily = markup.fontFamily || 'sans-serif';\n  const fontWeight = markup.fontWeight || 'normal';\n  const textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n  setAttributes(element, {\n    ...element.rect,\n    ...element.styles,\n    'stroke-width': 0,\n    'font-weight': fontWeight,\n    'font-size': fontSize,\n    'font-family': fontFamily,\n    'text-anchor': textAlign\n  });\n\n  // update text\n  if (element.text !== markup.text) {\n    element.text = markup.text;\n    element.textContent = markup.text.length ? markup.text : ' ';\n  }\n};\n\nconst updateLine = (element, markup, size, scale) => {\n  setAttributes(element, {\n    ...element.rect,\n    ...element.styles,\n    fill: 'none'\n  });\n\n  const line = element.childNodes[0];\n  const begin = element.childNodes[1];\n  const end = element.childNodes[2];\n\n  const origin = element.rect;\n\n  const target = {\n    x: element.rect.x + element.rect.width,\n    y: element.rect.y + element.rect.height\n  };\n\n  setAttributes(line, {\n    x1: origin.x,\n    y1: origin.y,\n    x2: target.x,\n    y2: target.y\n  });\n\n  if (!markup.lineDecoration) return;\n\n  begin.style.display = 'none';\n  end.style.display = 'none';\n\n  const v = vectorNormalize({\n    x: target.x - origin.x,\n    y: target.y - origin.y\n  });\n\n  const l = getMarkupValue(0.05, size, scale);\n\n  if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n    const arrowBeginRotationPoint = vectorMultiply(v, l);\n    const arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n    const arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n    const arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n    setAttributes(begin, {\n      style: 'display:block;',\n      d: `M${arrowBeginA.x},${arrowBeginA.y} L${origin.x},${origin.y} L${\n        arrowBeginB.x\n      },${arrowBeginB.y}`\n    });\n  }\n\n  if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n    const arrowEndRotationPoint = vectorMultiply(v, -l);\n    const arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n    const arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n    const arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n    setAttributes(end, {\n      style: 'display:block;',\n      d: `M${arrowEndA.x},${arrowEndA.y} L${target.x},${target.y} L${\n        arrowEndB.x\n      },${arrowEndB.y}`\n    });\n  }\n};\n\nconst updatePath = (element, markup, size, scale) => {\n  setAttributes(element, {\n    ...element.styles,\n    fill: 'none',\n    d: pointsToPathShape(\n      markup.points.map(point => ({\n        x: getMarkupValue(point.x, size, scale, 'width'),\n        y: getMarkupValue(point.y, size, scale, 'height')\n      }))\n    )\n  });\n};\n\nconst createShape = node => markup => svg(node, { id: markup.id });\n\nconst createImage = markup => {\n  const shape = svg('image', {\n    id: markup.id,\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    opacity: '0'\n  });\n  shape.onload = () => {\n    shape.setAttribute('opacity', markup.opacity || 1);\n  };\n  shape.setAttributeNS(\n    'http://www.w3.org/1999/xlink',\n    'xlink:href',\n    markup.src\n  );\n  return shape;\n};\n\nconst createLine = markup => {\n  const shape = svg('g', {\n    id: markup.id,\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round'\n  });\n\n  const line = svg('line');\n  shape.appendChild(line);\n\n  const begin = svg('path');\n  shape.appendChild(begin);\n\n  const end = svg('path');\n  shape.appendChild(end);\n\n  return shape;\n};\n\nconst CREATE_TYPE_ROUTES = {\n  image: createImage,\n  rect: createShape('rect'),\n  ellipse: createShape('ellipse'),\n  text: createShape('text'),\n  path: createShape('path'),\n  line: createLine\n};\n\nconst UPDATE_TYPE_ROUTES = {\n  rect: updateRect,\n  ellipse: updateEllipse,\n  image: updateImage,\n  text: updateText,\n  path: updatePath,\n  line: updateLine\n};\n\nconst createMarkupByType = (type, markup) => CREATE_TYPE_ROUTES[type](markup);\n\nconst updateMarkupByType = (element, type, markup, size, scale) => {\n  if (type !== 'path') {\n    element.rect = getMarkupRect(markup, size, scale);\n  }\n  element.styles = getMarkupStyles(markup, size, scale);\n  UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n};\n\nconst MARKUP_RECT = [\n  'x',\n  'y',\n  'left',\n  'top',\n  'right',\n  'bottom',\n  'width',\n  'height'\n];\n\nconst toOptionalFraction = value =>\n  typeof value === 'string' && /%/.test(value)\n    ? parseFloat(value) / 100\n    : value;\n\n// adds default markup properties, clones markup\nconst prepareMarkup = markup => {\n  const [type, props] = markup;\n\n  const rect = props.points\n    ? {}\n    : MARKUP_RECT.reduce((prev, curr) => {\n        prev[curr] = toOptionalFraction(props[curr]);\n        return prev;\n      }, {});\n\n  return [\n    type,\n    {\n      zIndex: 0,\n      ...props,\n      ...rect\n    }\n  ];\n};\n\nconst sortMarkupByZIndex = (a, b) => {\n  if (a[1].zIndex > b[1].zIndex) {\n    return 1;\n  }\n  if (a[1].zIndex < b[1].zIndex) {\n    return -1;\n  }\n  return 0;\n};\n\nconst createMarkupView = _ =>\n  _.utils.createView({\n    name: 'image-preview-markup',\n    tag: 'svg',\n    ignoreRect: true,\n    mixins: {\n      apis: ['width', 'height', 'crop', 'markup', 'resize', 'dirty']\n    },\n    write: ({ root, props }) => {\n      if (!props.dirty) return;\n\n      const { crop, resize, markup } = props;\n\n      const viewWidth = props.width;\n      const viewHeight = props.height;\n\n      let cropWidth = crop.width;\n      let cropHeight = crop.height;\n\n      if (resize) {\n        const { size } = resize;\n\n        let outputWidth = size && size.width;\n        let outputHeight = size && size.height;\n        const outputFit = resize.mode;\n        const outputUpscale = resize.upscale;\n\n        if (outputWidth && !outputHeight) outputHeight = outputWidth;\n        if (outputHeight && !outputWidth) outputWidth = outputHeight;\n\n        const shouldUpscale =\n          cropWidth < outputWidth && cropHeight < outputHeight;\n\n        if (!shouldUpscale || (shouldUpscale && outputUpscale)) {\n          let scalarWidth = outputWidth / cropWidth;\n          let scalarHeight = outputHeight / cropHeight;\n\n          if (outputFit === 'force') {\n            cropWidth = outputWidth;\n            cropHeight = outputHeight;\n          } else {\n            let scalar;\n            if (outputFit === 'cover') {\n              scalar = Math.max(scalarWidth, scalarHeight);\n            } else if (outputFit === 'contain') {\n              scalar = Math.min(scalarWidth, scalarHeight);\n            }\n            cropWidth = cropWidth * scalar;\n            cropHeight = cropHeight * scalar;\n          }\n        }\n      }\n\n      const size = {\n        width: viewWidth,\n        height: viewHeight\n      };\n\n      root.element.setAttribute('width', size.width);\n      root.element.setAttribute('height', size.height);\n\n      const scale = Math.min(viewWidth / cropWidth, viewHeight / cropHeight);\n\n      // clear\n      root.element.innerHTML = '';\n\n      // get filter\n      const markupFilter = root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');\n\n      // draw new\n      markup\n        .filter(markupFilter)\n        .map(prepareMarkup)\n        .sort(sortMarkupByZIndex)\n        .forEach(markup => {\n          const [type, settings] = markup;\n\n          // create\n          const element = createMarkupByType(type, settings);\n\n          // update\n          updateMarkupByType(element, type, settings, size, scale);\n\n          // add\n          root.element.appendChild(element);\n        });\n    }\n  });\n\nconst createVector$1 = (x, y) => ({ x, y });\n\nconst vectorDot = (a, b) => a.x * b.x + a.y * b.y;\n\nconst vectorSubtract = (a, b) => createVector$1(a.x - b.x, a.y - b.y);\n\nconst vectorDistanceSquared = (a, b) =>\n  vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n\nconst vectorDistance = (a, b) => Math.sqrt(vectorDistanceSquared(a, b));\n\nconst getOffsetPointOnEdge = (length, rotation) => {\n  const a = length;\n\n  const A = 1.5707963267948966;\n  const B = rotation;\n  const C = 1.5707963267948966 - rotation;\n\n  const sinA = Math.sin(A);\n  const sinB = Math.sin(B);\n  const sinC = Math.sin(C);\n  const cosC = Math.cos(C);\n  const ratio = a / sinA;\n  const b = ratio * sinB;\n  const c = ratio * sinC;\n\n  return createVector$1(cosC * b, cosC * c);\n};\n\nconst getRotatedRectSize = (rect, rotation) => {\n  const w = rect.width;\n  const h = rect.height;\n\n  const hor = getOffsetPointOnEdge(w, rotation);\n  const ver = getOffsetPointOnEdge(h, rotation);\n\n  const tl = createVector$1(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n  const tr = createVector$1(\n    rect.x + rect.width + Math.abs(ver.y),\n    rect.y + Math.abs(ver.x)\n  );\n\n  const bl = createVector$1(\n    rect.x - Math.abs(ver.y),\n    rect.y + rect.height - Math.abs(ver.x)\n  );\n\n  return {\n    width: vectorDistance(tl, tr),\n    height: vectorDistance(tl, bl)\n  };\n};\n\nconst calculateCanvasSize = (image, canvasAspectRatio, zoom = 1) => {\n  const imageAspectRatio = image.height / image.width;\n\n  // determine actual pixels on x and y axis\n  let canvasWidth = 1;\n  let canvasHeight = canvasAspectRatio;\n  let imgWidth = 1;\n  let imgHeight = imageAspectRatio;\n  if (imgHeight > canvasHeight) {\n    imgHeight = canvasHeight;\n    imgWidth = imgHeight / imageAspectRatio;\n  }\n\n  const scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n  const width = image.width / (zoom * scalar * imgWidth);\n  const height = width * canvasAspectRatio;\n\n  return {\n    width: width,\n    height: height\n  };\n};\n\nconst getImageRectZoomFactor = (imageRect, cropRect, rotation, center) => {\n  // calculate available space round image center position\n  const cx = center.x > 0.5 ? 1 - center.x : center.x;\n  const cy = center.y > 0.5 ? 1 - center.y : center.y;\n  const imageWidth = cx * 2 * imageRect.width;\n  const imageHeight = cy * 2 * imageRect.height;\n\n  // calculate rotated crop rectangle size\n  const rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n  // calculate scalar required to fit image\n  return Math.max(\n    rotatedCropSize.width / imageWidth,\n    rotatedCropSize.height / imageHeight\n  );\n};\n\nconst getCenteredCropRect = (container, aspectRatio) => {\n  let width = container.width;\n  let height = width * aspectRatio;\n  if (height > container.height) {\n    height = container.height;\n    width = height / aspectRatio;\n  }\n  const x = (container.width - width) * 0.5;\n  const y = (container.height - height) * 0.5;\n\n  return {\n    x,\n    y,\n    width,\n    height\n  };\n};\n\nconst getCurrentCropSize = (imageSize, crop = {}) => {\n  let { zoom, rotation, center, aspectRatio } = crop;\n\n  if (!aspectRatio) aspectRatio = imageSize.height / imageSize.width;\n\n  const canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n  const canvasCenter = {\n    x: canvasSize.width * 0.5,\n    y: canvasSize.height * 0.5\n  };\n\n  const stage = {\n    x: 0,\n    y: 0,\n    width: canvasSize.width,\n    height: canvasSize.height,\n    center: canvasCenter\n  };\n\n  const shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n  const stageZoomFactor = getImageRectZoomFactor(\n    imageSize,\n    getCenteredCropRect(stage, aspectRatio),\n    rotation,\n    shouldLimit ? center : { x: 0.5, y: 0.5 }\n  );\n\n  const scale = zoom * stageZoomFactor;\n\n  // start drawing\n  return {\n    widthFloat: canvasSize.width / scale,\n    heightFloat: canvasSize.height / scale,\n    width: Math.round(canvasSize.width / scale),\n    height: Math.round(canvasSize.height / scale)\n  };\n};\n\nconst IMAGE_SCALE_SPRING_PROPS = {\n  type: 'spring',\n  stiffness: 0.5,\n  damping: 0.45,\n  mass: 10\n};\n\n// does horizontal and vertical flipping\nconst createBitmapView = _ =>\n  _.utils.createView({\n    name: 'image-bitmap',\n    ignoreRect: true,\n    mixins: { styles: ['scaleX', 'scaleY'] },\n    create: ({ root, props }) => {\n      root.appendChild(props.image);\n    }\n  });\n\n// shifts and rotates image\nconst createImageCanvasWrapper = _ =>\n  _.utils.createView({\n    name: 'image-canvas-wrapper',\n    tag: 'div',\n    ignoreRect: true,\n    mixins: {\n      apis: ['crop', 'width', 'height'],\n      styles: [\n        'originX',\n        'originY',\n        'translateX',\n        'translateY',\n        'scaleX',\n        'scaleY',\n        'rotateZ'\n      ],\n      animations: {\n        originX: IMAGE_SCALE_SPRING_PROPS,\n        originY: IMAGE_SCALE_SPRING_PROPS,\n        scaleX: IMAGE_SCALE_SPRING_PROPS,\n        scaleY: IMAGE_SCALE_SPRING_PROPS,\n        translateX: IMAGE_SCALE_SPRING_PROPS,\n        translateY: IMAGE_SCALE_SPRING_PROPS,\n        rotateZ: IMAGE_SCALE_SPRING_PROPS\n      }\n    },\n    create: ({ root, props }) => {\n      props.width = props.image.width;\n      props.height = props.image.height;\n      root.ref.bitmap = root.appendChildView(\n        root.createChildView(createBitmapView(_), { image: props.image })\n      );\n    },\n    write: ({ root, props }) => {\n      const { flip } = props.crop;\n      const { bitmap } = root.ref;\n      bitmap.scaleX = flip.horizontal ? -1 : 1;\n      bitmap.scaleY = flip.vertical ? -1 : 1;\n    }\n  });\n\n// clips canvas to correct aspect ratio\nconst createClipView = _ =>\n  _.utils.createView({\n    name: 'image-clip',\n    tag: 'div',\n    ignoreRect: true,\n    mixins: {\n      apis: [\n        'crop',\n        'markup',\n        'resize',\n        'width',\n        'height',\n        'dirty',\n        'background'\n      ],\n      styles: ['width', 'height', 'opacity'],\n      animations: {\n        opacity: { type: 'tween', duration: 250 }\n      }\n    },\n    didWriteView: function({ root, props }) {\n      if (!props.background) return;\n      root.element.style.backgroundColor = props.background;\n    },\n    create: ({ root, props }) => {\n      root.ref.image = root.appendChildView(\n        root.createChildView(\n          createImageCanvasWrapper(_),\n          Object.assign({}, props)\n        )\n      );\n\n      root.ref.createMarkup = () => {\n        if (root.ref.markup) return;\n        root.ref.markup = root.appendChildView(\n          root.createChildView(createMarkupView(_), Object.assign({}, props))\n        );\n      };\n\n      root.ref.destroyMarkup = () => {\n        if (!root.ref.markup) return;\n        root.removeChildView(root.ref.markup);\n        root.ref.markup = null;\n      };\n\n      // set up transparency grid\n      const transparencyIndicator = root.query(\n        'GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR'\n      );\n      if (transparencyIndicator === null) return;\n\n      // grid pattern\n      if (transparencyIndicator === 'grid') {\n        root.element.dataset.transparencyIndicator = transparencyIndicator;\n      }\n      // basic color\n      else {\n        root.element.dataset.transparencyIndicator = 'color';\n      }\n    },\n    write: ({ root, props, shouldOptimize }) => {\n      const { crop, markup, resize, dirty, width, height } = props;\n\n      root.ref.image.crop = crop;\n\n      const stage = {\n        x: 0,\n        y: 0,\n        width,\n        height,\n        center: {\n          x: width * 0.5,\n          y: height * 0.5\n        }\n      };\n\n      const image = {\n        width: root.ref.image.width,\n        height: root.ref.image.height\n      };\n\n      const origin = {\n        x: crop.center.x * image.width,\n        y: crop.center.y * image.height\n      };\n\n      const translation = {\n        x: stage.center.x - image.width * crop.center.x,\n        y: stage.center.y - image.height * crop.center.y\n      };\n\n      const rotation = Math.PI * 2 + (crop.rotation % (Math.PI * 2));\n\n      const cropAspectRatio = crop.aspectRatio || image.height / image.width;\n\n      const shouldLimit =\n        typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n      const stageZoomFactor = getImageRectZoomFactor(\n        image,\n        getCenteredCropRect(stage, cropAspectRatio),\n        rotation,\n        shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n      );\n\n      const scale = crop.zoom * stageZoomFactor;\n\n      // update markup view\n      if (markup && markup.length) {\n        root.ref.createMarkup();\n        root.ref.markup.width = width;\n        root.ref.markup.height = height;\n        root.ref.markup.resize = resize;\n        root.ref.markup.dirty = dirty;\n        root.ref.markup.markup = markup;\n        root.ref.markup.crop = getCurrentCropSize(image, crop);\n      } else if (root.ref.markup) {\n        root.ref.destroyMarkup();\n      }\n\n      // update image view\n      const imageView = root.ref.image;\n\n      // don't update clip layout\n      if (shouldOptimize) {\n        imageView.originX = null;\n        imageView.originY = null;\n        imageView.translateX = null;\n        imageView.translateY = null;\n        imageView.rotateZ = null;\n        imageView.scaleX = null;\n        imageView.scaleY = null;\n        return;\n      }\n\n      imageView.originX = origin.x;\n      imageView.originY = origin.y;\n      imageView.translateX = translation.x;\n      imageView.translateY = translation.y;\n      imageView.rotateZ = rotation;\n      imageView.scaleX = scale;\n      imageView.scaleY = scale;\n    }\n  });\n\nconst createImageView = _ =>\n  _.utils.createView({\n    name: 'image-preview',\n    tag: 'div',\n    ignoreRect: true,\n    mixins: {\n      apis: ['image', 'crop', 'markup', 'resize', 'dirty', 'background'],\n      styles: ['translateY', 'scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: IMAGE_SCALE_SPRING_PROPS,\n        scaleY: IMAGE_SCALE_SPRING_PROPS,\n        translateY: IMAGE_SCALE_SPRING_PROPS,\n        opacity: { type: 'tween', duration: 400 }\n      }\n    },\n    create: ({ root, props }) => {\n      root.ref.clip = root.appendChildView(\n        root.createChildView(createClipView(_), {\n          id: props.id,\n          image: props.image,\n          crop: props.crop,\n          markup: props.markup,\n          resize: props.resize,\n          dirty: props.dirty,\n          background: props.background\n        })\n      );\n    },\n    write: ({ root, props, shouldOptimize }) => {\n      const { clip } = root.ref;\n\n      const { image, crop, markup, resize, dirty } = props;\n\n      clip.crop = crop;\n      clip.markup = markup;\n      clip.resize = resize;\n      clip.dirty = dirty;\n\n      // don't update clip layout\n      clip.opacity = shouldOptimize ? 0 : 1;\n\n      // don't re-render if optimizing or hidden (width will be zero resulting in weird animations)\n      if (shouldOptimize || root.rect.element.hidden) return;\n\n      // calculate scaled preview image size\n      const imageAspectRatio = image.height / image.width;\n      let aspectRatio = crop.aspectRatio || imageAspectRatio;\n\n      // calculate container size\n      const containerWidth = root.rect.inner.width;\n      const containerHeight = root.rect.inner.height;\n\n      let fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n      const minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n      const maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n      const panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n      const allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n\n      if (panelAspectRatio && !allowMultiple) {\n        fixedPreviewHeight = containerWidth * panelAspectRatio;\n        aspectRatio = panelAspectRatio;\n      }\n\n      // determine clip width and height\n      let clipHeight =\n        fixedPreviewHeight !== null\n          ? fixedPreviewHeight\n          : Math.max(\n              minPreviewHeight,\n              Math.min(containerWidth * aspectRatio, maxPreviewHeight)\n            );\n\n      let clipWidth = clipHeight / aspectRatio;\n      if (clipWidth > containerWidth) {\n        clipWidth = containerWidth;\n        clipHeight = clipWidth * aspectRatio;\n      }\n\n      if (clipHeight > containerHeight) {\n        clipHeight = containerHeight;\n        clipWidth = containerHeight / aspectRatio;\n      }\n\n      clip.width = clipWidth;\n      clip.height = clipHeight;\n    }\n  });\n\nlet SVG_MASK = `<svg width=\"500\" height=\"200\" viewBox=\"0 0 500 200\" preserveAspectRatio=\"none\">\n    <defs>\n        <radialGradient id=\"gradient-__UID__\" cx=\".5\" cy=\"1.25\" r=\"1.15\">\n            <stop offset='50%' stop-color='#000000'/>\n            <stop offset='56%' stop-color='#0a0a0a'/>\n            <stop offset='63%' stop-color='#262626'/>\n            <stop offset='69%' stop-color='#4f4f4f'/>\n            <stop offset='75%' stop-color='#808080'/>\n            <stop offset='81%' stop-color='#b1b1b1'/>\n            <stop offset='88%' stop-color='#dadada'/>\n            <stop offset='94%' stop-color='#f6f6f6'/>\n            <stop offset='100%' stop-color='#ffffff'/>\n        </radialGradient>\n        <mask id=\"mask-__UID__\">\n            <rect x=\"0\" y=\"0\" width=\"500\" height=\"200\" fill=\"url(#gradient-__UID__)\"></rect>\n        </mask>\n    </defs>\n    <rect x=\"0\" width=\"500\" height=\"200\" fill=\"currentColor\" mask=\"url(#mask-__UID__)\"></rect>\n</svg>`;\n\nlet SVGMaskUniqueId = 0;\n\nconst createImageOverlayView = fpAPI =>\n  fpAPI.utils.createView({\n    name: 'image-preview-overlay',\n    tag: 'div',\n    ignoreRect: true,\n    create: ({ root, props }) => {\n      let mask = SVG_MASK;\n      if (document.querySelector('base')) {\n        const url = new URL(\n          window.location.href.replace(window.location.hash, '')\n        ).href;\n        mask = mask.replace(/url\\(\\#/g, 'url(' + url + '#');\n      }\n\n      SVGMaskUniqueId++;\n      root.element.classList.add(\n        `filepond--image-preview-overlay-${props.status}`\n      );\n      root.element.innerHTML = mask.replace(/__UID__/g, SVGMaskUniqueId);\n    },\n    mixins: {\n      styles: ['opacity'],\n      animations: {\n        opacity: { type: 'spring', mass: 25 }\n      }\n    }\n  });\n\n/**\n * Bitmap Worker\n */\nconst BitmapWorker = function() {\n  self.onmessage = e => {\n    createImageBitmap(e.data.message.file).then(bitmap => {\n      self.postMessage({ id: e.data.id, message: bitmap }, [bitmap]);\n    });\n  };\n};\n\n/**\n * ColorMatrix Worker\n */\nconst ColorMatrixWorker = function() {\n  self.onmessage = e => {\n    const imageData = e.data.message.imageData;\n    const matrix = e.data.message.colorMatrix;\n\n    const data = imageData.data;\n    const l = data.length;\n\n    const m11 = matrix[0];\n    const m12 = matrix[1];\n    const m13 = matrix[2];\n    const m14 = matrix[3];\n    const m15 = matrix[4];\n\n    const m21 = matrix[5];\n    const m22 = matrix[6];\n    const m23 = matrix[7];\n    const m24 = matrix[8];\n    const m25 = matrix[9];\n\n    const m31 = matrix[10];\n    const m32 = matrix[11];\n    const m33 = matrix[12];\n    const m34 = matrix[13];\n    const m35 = matrix[14];\n\n    const m41 = matrix[15];\n    const m42 = matrix[16];\n    const m43 = matrix[17];\n    const m44 = matrix[18];\n    const m45 = matrix[19];\n\n    let index = 0,\n      r = 0.0,\n      g = 0.0,\n      b = 0.0,\n      a = 0.0;\n\n    for (; index < l; index += 4) {\n      r = data[index] / 255;\n      g = data[index + 1] / 255;\n      b = data[index + 2] / 255;\n      a = data[index + 3] / 255;\n      data[index] = Math.max(\n        0,\n        Math.min((r * m11 + g * m12 + b * m13 + a * m14 + m15) * 255, 255)\n      );\n      data[index + 1] = Math.max(\n        0,\n        Math.min((r * m21 + g * m22 + b * m23 + a * m24 + m25) * 255, 255)\n      );\n      data[index + 2] = Math.max(\n        0,\n        Math.min((r * m31 + g * m32 + b * m33 + a * m34 + m35) * 255, 255)\n      );\n      data[index + 3] = Math.max(\n        0,\n        Math.min((r * m41 + g * m42 + b * m43 + a * m44 + m45) * 255, 255)\n      );\n    }\n\n    self.postMessage({ id: e.data.id, message: imageData }, [\n      imageData.data.buffer\n    ]);\n  };\n};\n\nconst getImageSize = (url, cb) => {\n  let image = new Image();\n  image.onload = () => {\n    const width = image.naturalWidth;\n    const height = image.naturalHeight;\n    image = null;\n    cb(width, height);\n  };\n  image.src = url;\n};\n\nconst transforms = {\n  1: () => [1, 0, 0, 1, 0, 0],\n  2: width => [-1, 0, 0, 1, width, 0],\n  3: (width, height) => [-1, 0, 0, -1, width, height],\n  4: (width, height) => [1, 0, 0, -1, 0, height],\n  5: () => [0, 1, 1, 0, 0, 0],\n  6: (width, height) => [0, 1, -1, 0, height, 0],\n  7: (width, height) => [0, -1, -1, 0, height, width],\n  8: width => [0, -1, 1, 0, 0, width]\n};\n\nconst fixImageOrientation = (ctx, width, height, orientation) => {\n  // no orientation supplied\n  if (orientation === -1) {\n    return;\n  }\n\n  ctx.transform.apply(ctx, transforms[orientation](width, height));\n};\n\n// draws the preview image to canvas\nconst createPreviewImage = (data, width, height, orientation) => {\n  // can't draw on half pixels\n  width = Math.round(width);\n  height = Math.round(height);\n\n  // draw image\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d');\n\n  // if is rotated incorrectly swap width and height\n  if (orientation >= 5 && orientation <= 8) {\n    [width, height] = [height, width];\n  }\n\n  // correct image orientation\n  fixImageOrientation(ctx, width, height, orientation);\n\n  // draw the image\n  ctx.drawImage(data, 0, 0, width, height);\n\n  return canvas;\n};\n\nconst isBitmap = file => /^image/.test(file.type) && !/svg/.test(file.type);\n\nconst MAX_WIDTH = 10;\nconst MAX_HEIGHT = 10;\n\nconst calculateAverageColor = image => {\n  const scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\n\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const width = (canvas.width = Math.ceil(image.width * scalar));\n  const height = (canvas.height = Math.ceil(image.height * scalar));\n  ctx.drawImage(image, 0, 0, width, height);\n  let data = null;\n  try {\n    data = ctx.getImageData(0, 0, width, height).data;\n  } catch (e) {\n    return null;\n  }\n  const l = data.length;\n\n  let r = 0;\n  let g = 0;\n  let b = 0;\n  let i = 0;\n\n  for (; i < l; i += 4) {\n    r += data[i] * data[i];\n    g += data[i + 1] * data[i + 1];\n    b += data[i + 2] * data[i + 2];\n  }\n\n  r = averageColor(r, l);\n  g = averageColor(g, l);\n  b = averageColor(b, l);\n\n  return { r, g, b };\n};\n\nconst averageColor = (c, l) => Math.floor(Math.sqrt(c / (l / 4)));\n\nconst cloneCanvas = (origin, target) => {\n  target = target || document.createElement('canvas');\n  target.width = origin.width;\n  target.height = origin.height;\n  const ctx = target.getContext('2d');\n  ctx.drawImage(origin, 0, 0);\n  return target;\n};\n\nconst cloneImageData = imageData => {\n  let id;\n  try {\n    id = new ImageData(imageData.width, imageData.height);\n  } catch (e) {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    id = ctx.createImageData(imageData.width, imageData.height);\n  }\n  id.data.set(new Uint8ClampedArray(imageData.data));\n  return id;\n};\n\nconst loadImage = url =>\n  new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'Anonymous';\n    img.onload = () => {\n      resolve(img);\n    };\n    img.onerror = e => {\n      reject(e);\n    };\n    img.src = url;\n  });\n\nconst createImageWrapperView = _ => {\n  // create overlay view\n  const OverlayView = createImageOverlayView(_);\n\n  const ImageView = createImageView(_);\n\n  const { createWorker } = _.utils;\n\n  const applyFilter = (root, filter, target) =>\n    new Promise(resolve => {\n      // will store image data for future filter updates\n      if (!root.ref.imageData) {\n        root.ref.imageData = target\n          .getContext('2d')\n          .getImageData(0, 0, target.width, target.height);\n      }\n\n      // get image data reference\n      const imageData = cloneImageData(root.ref.imageData);\n\n      if (!filter || filter.length !== 20) {\n        target.getContext('2d').putImageData(imageData, 0, 0);\n        return resolve();\n      }\n\n      const worker = createWorker(ColorMatrixWorker);\n      worker.post(\n        {\n          imageData,\n          colorMatrix: filter\n        },\n        response => {\n          // apply filtered colors\n          target.getContext('2d').putImageData(response, 0, 0);\n\n          // stop worker\n          worker.terminate();\n\n          // done!\n          resolve();\n        },\n        [imageData.data.buffer]\n      );\n    });\n\n  const removeImageView = (root, imageView) => {\n    root.removeChildView(imageView);\n    imageView.image.width = 1;\n    imageView.image.height = 1;\n    imageView._destroy();\n  };\n\n  // remove an image\n  const shiftImage = ({ root }) => {\n    const imageView = root.ref.images.shift();\n    imageView.opacity = 0;\n    imageView.translateY = -15;\n    root.ref.imageViewBin.push(imageView);\n    return imageView;\n  };\n\n  // add new image\n  const pushImage = ({ root, props, image }) => {\n    const id = props.id;\n    const item = root.query('GET_ITEM', { id });\n    if (!item) return;\n\n    const crop = item.getMetadata('crop') || {\n      center: {\n        x: 0.5,\n        y: 0.5\n      },\n      flip: {\n        horizontal: false,\n        vertical: false\n      },\n      zoom: 1,\n      rotation: 0,\n      aspectRatio: null\n    };\n\n    const background = root.query(\n      'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n    );\n\n    let markup;\n    let resize;\n    let dirty = false;\n    if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n      markup = item.getMetadata('markup') || [];\n      resize = item.getMetadata('resize');\n      dirty = true;\n    }\n\n    // append image presenter\n    const imageView = root.appendChildView(\n      root.createChildView(ImageView, {\n        id,\n        image,\n        crop,\n        resize,\n        markup,\n        dirty,\n        background,\n        opacity: 0,\n        scaleX: 1.15,\n        scaleY: 1.15,\n        translateY: 15\n      }),\n      root.childViews.length\n    );\n    root.ref.images.push(imageView);\n\n    // reveal the preview image\n    imageView.opacity = 1;\n    imageView.scaleX = 1;\n    imageView.scaleY = 1;\n    imageView.translateY = 0;\n\n    // the preview is now ready to be drawn\n    setTimeout(() => {\n      root.dispatch('DID_IMAGE_PREVIEW_SHOW', { id });\n    }, 250);\n  };\n\n  const updateImage = ({ root, props }) => {\n    const item = root.query('GET_ITEM', { id: props.id });\n    if (!item) return;\n    const imageView = root.ref.images[root.ref.images.length - 1];\n    imageView.crop = item.getMetadata('crop');\n    imageView.background = root.query(\n      'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n    );\n    if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n      imageView.dirty = true;\n      imageView.resize = item.getMetadata('resize');\n      imageView.markup = item.getMetadata('markup');\n    }\n  };\n\n  // replace image preview\n  const didUpdateItemMetadata = ({ root, props, action }) => {\n    // only filter and crop trigger redraw\n    if (!/crop|filter|markup|resize/.test(action.change.key)) return;\n\n    // no images to update, exit\n    if (!root.ref.images.length) return;\n\n    // no item found, exit\n    const item = root.query('GET_ITEM', { id: props.id });\n    if (!item) return;\n\n    // for now, update existing image when filtering\n    if (/filter/.test(action.change.key)) {\n      const imageView = root.ref.images[root.ref.images.length - 1];\n      applyFilter(root, action.change.value, imageView.image);\n      return;\n    }\n\n    if (/crop|markup|resize/.test(action.change.key)) {\n      const crop = item.getMetadata('crop');\n      const image = root.ref.images[root.ref.images.length - 1];\n\n      // if aspect ratio has changed, we need to create a new image\n      if (\n        crop &&\n        crop.aspectRatio &&\n        image.crop &&\n        image.crop.aspectRatio &&\n        Math.abs(crop.aspectRatio - image.crop.aspectRatio) > 0.00001\n      ) {\n        const imageView = shiftImage({ root });\n        pushImage({ root, props, image: cloneCanvas(imageView.image) });\n      }\n      // if not, we can update the current image\n      else {\n        updateImage({ root, props });\n      }\n    }\n  };\n\n  const canCreateImageBitmap = file => {\n    // Firefox versions before 58 will freeze when running createImageBitmap\n    // in a Web Worker so we detect those versions and return false for support\n    const userAgent = window.navigator.userAgent;\n    const isFirefox = userAgent.match(/Firefox\\/([0-9]+)\\./);\n    const firefoxVersion = isFirefox ? parseInt(isFirefox[1]) : null;\n    if (firefoxVersion !== null && firefoxVersion <= 58) return false;\n\n    return 'createImageBitmap' in window && isBitmap(file);\n  };\n\n  /**\n   * Write handler for when preview container has been created\n   */\n  const didCreatePreviewContainer = ({ root, props }) => {\n    const { id } = props;\n\n    // we need to get the file data to determine the eventual image size\n    const item = root.query('GET_ITEM', id);\n    if (!item) return;\n\n    // get url to file (we'll revoke it later on when done)\n    const fileURL = URL.createObjectURL(item.file);\n\n    // determine image size of this item\n    getImageSize(fileURL, (width, height) => {\n      // we can now scale the panel to the final size\n      root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE', {\n        id,\n        width,\n        height\n      });\n    });\n  };\n\n  const drawPreview = ({ root, props }) => {\n    const { id } = props;\n\n    // we need to get the file data to determine the eventual image size\n    const item = root.query('GET_ITEM', id);\n    if (!item) return;\n\n    // get url to file (we'll revoke it later on when done)\n    const fileURL = URL.createObjectURL(item.file);\n\n    // fallback\n    const loadPreviewFallback = () => {\n      // let's scale the image in the main thread :(\n      loadImage(fileURL).then(previewImageLoaded);\n    };\n\n    // image is now ready\n    const previewImageLoaded = imageData => {\n      // the file url is no longer needed\n      URL.revokeObjectURL(fileURL);\n\n      // draw the scaled down version here and use that as source so bitmapdata can be closed\n      // orientation info\n      const exif = item.getMetadata('exif') || {};\n      const orientation = exif.orientation || -1;\n\n      // get width and height from action, and swap if orientation is incorrect\n      let { width, height } = imageData;\n\n      // if no width or height, just return early.\n      if (!width || !height) return;\n\n      if (orientation >= 5 && orientation <= 8) {\n        [width, height] = [height, width];\n      }\n\n      // scale canvas based on pixel density\n      // we multiply by .75 as that creates smaller but still clear images on screens with high res displays\n      const pixelDensityFactor = Math.max(1, window.devicePixelRatio * 0.75);\n\n      // we want as much pixels to work with as possible,\n      // this multiplies the minimum image resolution,\n      // so when zooming in it doesn't get too blurry\n      const zoomFactor = root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');\n\n      // imaeg scale factor\n      const scaleFactor = zoomFactor * pixelDensityFactor;\n\n      // calculate scaled preview image size\n      const previewImageRatio = height / width;\n\n      // calculate image preview height and width\n      const previewContainerWidth = root.rect.element.width;\n      const previewContainerHeight = root.rect.element.height;\n\n      let imageWidth = previewContainerWidth;\n      let imageHeight = imageWidth * previewImageRatio;\n\n      if (previewImageRatio > 1) {\n        imageWidth = Math.min(width, previewContainerWidth * scaleFactor);\n        imageHeight = imageWidth * previewImageRatio;\n      } else {\n        imageHeight = Math.min(height, previewContainerHeight * scaleFactor);\n        imageWidth = imageHeight / previewImageRatio;\n      }\n\n      // transfer to image tag so no canvas memory wasted on iOS\n      const previewImage = createPreviewImage(\n        imageData,\n        imageWidth,\n        imageHeight,\n        orientation\n      );\n\n      // done\n      const done = () => {\n        // calculate average image color, disabled for now\n        const averageColor = root.query(\n          'GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR'\n        )\n          ? calculateAverageColor(data)\n          : null;\n        item.setMetadata('color', averageColor, true);\n\n        // data has been transferred to canvas ( if was ImageBitmap )\n        if ('close' in imageData) {\n          imageData.close();\n        }\n\n        // show the overlay\n        root.ref.overlayShadow.opacity = 1;\n\n        // create the first image\n        pushImage({ root, props, image: previewImage });\n      };\n\n      // apply filter\n      const filter = item.getMetadata('filter');\n      if (filter) {\n        applyFilter(root, filter, previewImage).then(done);\n      } else {\n        done();\n      }\n    };\n\n    // if we support scaling using createImageBitmap we use a worker\n    if (canCreateImageBitmap(item.file)) {\n      // let's scale the image in a worker\n      const worker = createWorker(BitmapWorker);\n\n      worker.post(\n        {\n          file: item.file\n        },\n        imageBitmap => {\n          // destroy worker\n          worker.terminate();\n\n          // no bitmap returned, must be something wrong,\n          // try the oldschool way\n          if (!imageBitmap) {\n            loadPreviewFallback();\n            return;\n          }\n\n          // yay we got our bitmap, let's continue showing the preview\n          previewImageLoaded(imageBitmap);\n        }\n      );\n    } else {\n      // create fallback preview\n      loadPreviewFallback();\n    }\n  };\n\n  /**\n   * Write handler for when the preview image is ready to be animated\n   */\n  const didDrawPreview = ({ root }) => {\n    // get last added image\n    const image = root.ref.images[root.ref.images.length - 1];\n    image.translateY = 0;\n    image.scaleX = 1.0;\n    image.scaleY = 1.0;\n    image.opacity = 1;\n  };\n\n  /**\n   * Write handler for when the preview has been loaded\n   */\n  const restoreOverlay = ({ root }) => {\n    root.ref.overlayShadow.opacity = 1;\n    root.ref.overlayError.opacity = 0;\n    root.ref.overlaySuccess.opacity = 0;\n  };\n\n  const didThrowError = ({ root }) => {\n    root.ref.overlayShadow.opacity = 0.25;\n    root.ref.overlayError.opacity = 1;\n  };\n\n  const didCompleteProcessing = ({ root }) => {\n    root.ref.overlayShadow.opacity = 0.25;\n    root.ref.overlaySuccess.opacity = 1;\n  };\n\n  /**\n   * Constructor\n   */\n  const create = ({ root }) => {\n    // image view\n    root.ref.images = [];\n\n    // the preview image data (we need this to filter the image)\n    root.ref.imageData = null;\n\n    // image bin\n    root.ref.imageViewBin = [];\n\n    // image overlays\n    root.ref.overlayShadow = root.appendChildView(\n      root.createChildView(OverlayView, {\n        opacity: 0,\n        status: 'idle'\n      })\n    );\n\n    root.ref.overlaySuccess = root.appendChildView(\n      root.createChildView(OverlayView, {\n        opacity: 0,\n        status: 'success'\n      })\n    );\n\n    root.ref.overlayError = root.appendChildView(\n      root.createChildView(OverlayView, {\n        opacity: 0,\n        status: 'failure'\n      })\n    );\n  };\n\n  return _.utils.createView({\n    name: 'image-preview-wrapper',\n    create,\n    styles: ['height'],\n    apis: ['height'],\n    destroy: ({ root }) => {\n      // we resize the image so memory on iOS 12 is released more quickly (it seems)\n      root.ref.images.forEach(imageView => {\n        imageView.image.width = 1;\n        imageView.image.height = 1;\n      });\n    },\n    didWriteView: ({ root }) => {\n      root.ref.images.forEach(imageView => {\n        imageView.dirty = false;\n      });\n    },\n    write: _.utils.createRoute(\n      {\n        // image preview stated\n        DID_IMAGE_PREVIEW_DRAW: didDrawPreview,\n        DID_IMAGE_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n        DID_FINISH_CALCULATE_PREVIEWSIZE: drawPreview,\n        DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata,\n\n        // file states\n        DID_THROW_ITEM_LOAD_ERROR: didThrowError,\n        DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\n        DID_THROW_ITEM_INVALID: didThrowError,\n        DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\n        DID_START_ITEM_PROCESSING: restoreOverlay,\n        DID_REVERT_ITEM_PROCESSING: restoreOverlay\n      },\n      ({ root }) => {\n        // views on death row\n        const viewsToRemove = root.ref.imageViewBin.filter(\n          imageView => imageView.opacity === 0\n        );\n\n        // views to retain\n        root.ref.imageViewBin = root.ref.imageViewBin.filter(\n          imageView => imageView.opacity > 0\n        );\n\n        // remove these views\n        viewsToRemove.forEach(imageView => removeImageView(root, imageView));\n        viewsToRemove.length = 0;\n      }\n    )\n  });\n};\n\n/**\n * Image Preview Plugin\n */\nconst plugin = fpAPI => {\n  const { addFilter, utils } = fpAPI;\n  const { Type, createRoute, isFile } = utils;\n\n  // imagePreviewView\n  const imagePreviewView = createImageWrapperView(fpAPI);\n\n  // called for each view that is created right after the 'create' method\n  addFilter('CREATE_VIEW', viewAPI => {\n    // get reference to created view\n    const { is, view, query } = viewAPI;\n\n    // only hook up to item view and only if is enabled for this cropper\n    if (!is('file') || !query('GET_ALLOW_IMAGE_PREVIEW')) return;\n\n    // create the image preview plugin, but only do so if the item is an image\n    const didLoadItem = ({ root, props }) => {\n      const { id } = props;\n      const item = query('GET_ITEM', id);\n\n      // item could theoretically have been removed in the mean time\n      if (!item || !isFile(item.file) || item.archived) return;\n\n      // get the file object\n      const file = item.file;\n\n      // exit if this is not an image\n      if (!isPreviewableImage(file)) return;\n\n      // test if is filtered\n      if (!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item)) return;\n\n      // exit if image size is too high and no createImageBitmap support\n      // this would simply bring the browser to its knees and that is not what we want\n      const supportsCreateImageBitmap = 'createImageBitmap' in (window || {});\n      const maxPreviewFileSize = query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');\n      if (\n        !supportsCreateImageBitmap &&\n        (maxPreviewFileSize && file.size > maxPreviewFileSize)\n      )\n        return;\n\n      // set preview view\n      root.ref.imagePreview = view.appendChildView(\n        view.createChildView(imagePreviewView, { id })\n      );\n\n      // update height if is fixed\n      const fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n      if (fixedPreviewHeight) {\n        root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n          id: item.id,\n          height: fixedPreviewHeight\n        });\n      }\n\n      // now ready\n      const queue =\n        !supportsCreateImageBitmap &&\n        file.size > query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');\n      root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE', { id }, queue);\n    };\n\n    const rescaleItem = (root, props) => {\n      if (!root.ref.imagePreview) return;\n\n      let { id } = props;\n\n      // get item\n      const item = root.query('GET_ITEM', { id });\n      if (!item) return;\n\n      // if is fixed height or panel has aspect ratio, exit here, height has already been defined\n      const panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n      const itemPanelAspectRatio = root.query('GET_ITEM_PANEL_ASPECT_RATIO');\n      const fixedHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n      if (panelAspectRatio || itemPanelAspectRatio || fixedHeight) return;\n\n      // no data!\n      let { imageWidth, imageHeight } = root.ref;\n      if (!imageWidth || !imageHeight) return;\n\n      // get height min and max\n      const minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n      const maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n      // orientation info\n      const exif = item.getMetadata('exif') || {};\n      const orientation = exif.orientation || -1;\n\n      // get width and height from action, and swap of orientation is incorrect\n      if (orientation >= 5 && orientation <= 8)\n        [imageWidth, imageHeight] = [imageHeight, imageWidth];\n\n      // scale up width and height when we're dealing with an SVG\n      if (!isBitmap(item.file) || root.query('GET_IMAGE_PREVIEW_UPSCALE')) {\n        const scalar = 2048 / imageWidth;\n        imageWidth *= scalar;\n        imageHeight *= scalar;\n      }\n\n      // image aspect ratio\n      const imageAspectRatio = imageHeight / imageWidth;\n\n      // we need the item to get to the crop size\n      const previewAspectRatio =\n        (item.getMetadata('crop') || {}).aspectRatio || imageAspectRatio;\n\n      // preview height range\n      let previewHeightMax = Math.max(\n        minPreviewHeight,\n        Math.min(imageHeight, maxPreviewHeight)\n      );\n      const itemWidth = root.rect.element.width;\n      const previewHeight = Math.min(\n        itemWidth * previewAspectRatio,\n        previewHeightMax\n      );\n\n      // request update to panel height\n      root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n        id: item.id,\n        height: previewHeight\n      });\n    };\n\n    const didResizeView = ({ root }) => {\n      // actions in next write operation\n      root.ref.shouldRescale = true;\n    };\n\n    const didUpdateItemMetadata = ({ root, action }) => {\n      if (action.change.key !== 'crop') return;\n\n      // actions in next write operation\n      root.ref.shouldRescale = true;\n    };\n\n    const didCalculatePreviewSize = ({ root, action }) => {\n      // remember dimensions\n      root.ref.imageWidth = action.width;\n      root.ref.imageHeight = action.height;\n\n      // actions in next write operation\n      root.ref.shouldRescale = true;\n      root.ref.shouldDrawPreview = true;\n\n      // as image load could take a while and fire when draw loop is resting we need to give it a kick\n      root.dispatch('KICK');\n    };\n\n    // start writing\n    view.registerWriter(\n      createRoute(\n        {\n          DID_RESIZE_ROOT: didResizeView,\n          DID_STOP_RESIZE: didResizeView,\n          DID_LOAD_ITEM: didLoadItem,\n          DID_IMAGE_PREVIEW_CALCULATE_SIZE: didCalculatePreviewSize,\n          DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\n        },\n        ({ root, props }) => {\n          // no preview view attached\n          if (!root.ref.imagePreview) return;\n\n          // don't do anything while hidden\n          if (root.rect.element.hidden) return;\n\n          // resize the item panel\n          if (root.ref.shouldRescale) {\n            rescaleItem(root, props);\n            root.ref.shouldRescale = false;\n          }\n\n          if (root.ref.shouldDrawPreview) {\n            // queue till next frame so we're sure the height has been applied this forces the draw image call inside the wrapper view to use the correct height\n            requestAnimationFrame(() => {\n              // this requestAnimationFrame nesting is horrible but it fixes an issue with 100hz displays on Chrome\n              // https://github.com/pqina/filepond-plugin-image-preview/issues/57\n              requestAnimationFrame(() => {\n                root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE', {\n                  id: props.id\n                });\n              });\n            });\n\n            root.ref.shouldDrawPreview = false;\n          }\n        }\n      )\n    );\n  });\n\n  // expose plugin\n  return {\n    options: {\n      // Enable or disable image preview\n      allowImagePreview: [true, Type.BOOLEAN],\n\n      // filters file items to determine which are shown as preview\n      imagePreviewFilterItem: [() => true, Type.FUNCTION],\n\n      // Fixed preview height\n      imagePreviewHeight: [null, Type.INT],\n\n      // Min image height\n      imagePreviewMinHeight: [44, Type.INT],\n\n      // Max image height\n      imagePreviewMaxHeight: [256, Type.INT],\n\n      // Max size of preview file for when createImageBitmap is not supported\n      imagePreviewMaxFileSize: [null, Type.INT],\n\n      // The amount of extra pixels added to the image preview to allow comfortable zooming\n      imagePreviewZoomFactor: [2, Type.INT],\n\n      // Should we upscale small images to fit the max bounding box of the preview area\n      imagePreviewUpscale: [false, Type.BOOLEAN],\n\n      // Max size of preview file that we allow to try to instant preview if createImageBitmap is not supported, else image is queued for loading\n      imagePreviewMaxInstantPreviewFileSize: [1000000, Type.INT],\n\n      // Style of the transparancy indicator used behind images\n      imagePreviewTransparencyIndicator: [null, Type.STRING],\n\n      // Enables or disables reading average image color\n      imagePreviewCalculateAverageImageColor: [false, Type.BOOLEAN],\n\n      // Enables or disables the previewing of markup\n      imagePreviewMarkupShow: [true, Type.BOOLEAN],\n\n      // Allows filtering of markup to only show certain shapes\n      imagePreviewMarkupFilter: [() => true, Type.FUNCTION]\n    }\n  };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser) {\n  document.dispatchEvent(\n    new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n  );\n}\n\nexport default plugin;\n","/*!\n * FilePondPluginFileValidateSize 2.2.8\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\nconst plugin = ({ addFilter, utils }) => {\n    // get quick reference to Type utils\n    const { Type, replaceInString, toNaturalFileSize } = utils;\n\n    // filtering if an item is allowed in hopper\n    addFilter('ALLOW_HOPPER_ITEM', (file, { query }) => {\n        if (!query('GET_ALLOW_FILE_SIZE_VALIDATION')) {\n            return true;\n        }\n\n        const sizeMax = query('GET_MAX_FILE_SIZE');\n        if (sizeMax !== null && file.size > sizeMax) {\n            return false;\n        }\n\n        const sizeMin = query('GET_MIN_FILE_SIZE');\n        if (sizeMin !== null && file.size < sizeMin) {\n            return false;\n        }\n\n        return true;\n    });\n\n    // called for each file that is loaded\n    // right before it is set to the item state\n    // should return a promise\n    addFilter(\n        'LOAD_FILE',\n        (file, { query }) =>\n            new Promise((resolve, reject) => {\n                // if not allowed, all fine, exit\n                if (!query('GET_ALLOW_FILE_SIZE_VALIDATION')) {\n                    return resolve(file);\n                }\n\n                // check if file should be filtered\n                const fileFilter = query('GET_FILE_VALIDATE_SIZE_FILTER');\n                if (fileFilter && !fileFilter(file)) {\n                    return resolve(file);\n                }\n\n                // reject or resolve based on file size\n                const sizeMax = query('GET_MAX_FILE_SIZE');\n                if (sizeMax !== null && file.size > sizeMax) {\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_MAX_FILE_SIZE_EXCEEDED'),\n                            sub: replaceInString(query('GET_LABEL_MAX_FILE_SIZE'), {\n                                filesize: toNaturalFileSize(\n                                    sizeMax,\n                                    '.',\n                                    query('GET_FILE_SIZE_BASE'),\n                                    query('GET_FILE_SIZE_LABELS', query)\n                                ),\n                            }),\n                        },\n                    });\n                    return;\n                }\n\n                // reject or resolve based on file size\n                const sizeMin = query('GET_MIN_FILE_SIZE');\n                if (sizeMin !== null && file.size < sizeMin) {\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_MIN_FILE_SIZE_EXCEEDED'),\n                            sub: replaceInString(query('GET_LABEL_MIN_FILE_SIZE'), {\n                                filesize: toNaturalFileSize(\n                                    sizeMin,\n                                    '.',\n                                    query('GET_FILE_SIZE_BASE'),\n                                    query('GET_FILE_SIZE_LABELS', query)\n                                ),\n                            }),\n                        },\n                    });\n                    return;\n                }\n\n                // returns the current option value\n                const totalSizeMax = query('GET_MAX_TOTAL_FILE_SIZE');\n                if (totalSizeMax !== null) {\n                    // get the current total file size\n                    const currentTotalSize = query('GET_ACTIVE_ITEMS').reduce((total, item) => {\n                        return total + item.fileSize;\n                    }, 0);\n\n                    // get the size of the new file\n                    if (currentTotalSize > totalSizeMax) {\n                        reject({\n                            status: {\n                                main: query('GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED'),\n                                sub: replaceInString(query('GET_LABEL_MAX_TOTAL_FILE_SIZE'), {\n                                    filesize: toNaturalFileSize(\n                                        totalSizeMax,\n                                        '.',\n                                        query('GET_FILE_SIZE_BASE'),\n                                        query('GET_FILE_SIZE_LABELS', query)\n                                    ),\n                                }),\n                            },\n                        });\n                        return;\n                    }\n                }\n\n                // file is fine, let's pass it back\n                resolve(file);\n            })\n    );\n\n    return {\n        options: {\n            // Enable or disable file type validation\n            allowFileSizeValidation: [true, Type.BOOLEAN],\n\n            // Max individual file size in bytes\n            maxFileSize: [null, Type.INT],\n\n            // Min individual file size in bytes\n            minFileSize: [null, Type.INT],\n\n            // Max total file size in bytes\n            maxTotalFileSize: [null, Type.INT],\n\n            // Filter the files that need to be validated for size\n            fileValidateSizeFilter: [null, Type.FUNCTION],\n\n            // error labels\n            labelMinFileSizeExceeded: ['File is too small', Type.STRING],\n            labelMinFileSize: ['Minimum file size is {filesize}', Type.STRING],\n\n            labelMaxFileSizeExceeded: ['File is too large', Type.STRING],\n            labelMaxFileSize: ['Maximum file size is {filesize}', Type.STRING],\n\n            labelMaxTotalFileSizeExceeded: ['Maximum total size exceeded', Type.STRING],\n            labelMaxTotalFileSize: ['Maximum total file size is {filesize}', Type.STRING],\n        },\n    };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser) {\n    document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n}\n\nexport default plugin;\n","/*!\n * FilePondPluginFileValidateType 1.2.9\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\nconst plugin = ({ addFilter, utils }) => {\n    // get quick reference to Type utils\n    const {\n        Type,\n        isString,\n        replaceInString,\n        guesstimateMimeType,\n        getExtensionFromFilename,\n        getFilenameFromURL,\n    } = utils;\n\n    const mimeTypeMatchesWildCard = (mimeType, wildcard) => {\n        const mimeTypeGroup = (/^[^/]+/.exec(mimeType) || []).pop(); // image/png -> image\n        const wildcardGroup = wildcard.slice(0, -2); // image/* -> image\n        return mimeTypeGroup === wildcardGroup;\n    };\n\n    const isValidMimeType = (acceptedTypes, userInputType) =>\n        acceptedTypes.some(acceptedType => {\n            // accepted is wildcard mime type\n            if (/\\*$/.test(acceptedType)) {\n                return mimeTypeMatchesWildCard(userInputType, acceptedType);\n            }\n\n            // is normal mime type\n            return acceptedType === userInputType;\n        });\n\n    const getItemType = item => {\n        // if the item is a url we guess the mime type by the extension\n        let type = '';\n        if (isString(item)) {\n            const filename = getFilenameFromURL(item);\n            const extension = getExtensionFromFilename(filename);\n            if (extension) {\n                type = guesstimateMimeType(extension);\n            }\n        } else {\n            type = item.type;\n        }\n\n        return type;\n    };\n\n    const validateFile = (item, acceptedFileTypes, typeDetector) => {\n        // no types defined, everything is allowed \\o/\n        if (acceptedFileTypes.length === 0) {\n            return true;\n        }\n\n        // gets the item type\n        const type = getItemType(item);\n\n        // no type detector, test now\n        if (!typeDetector) {\n            return isValidMimeType(acceptedFileTypes, type);\n        }\n\n        // use type detector\n        return new Promise((resolve, reject) => {\n            typeDetector(item, type)\n                .then(detectedType => {\n                    if (isValidMimeType(acceptedFileTypes, detectedType)) {\n                        resolve();\n                    } else {\n                        reject();\n                    }\n                })\n                .catch(reject);\n        });\n    };\n\n    const applyMimeTypeMap = map => acceptedFileType =>\n        map[acceptedFileType] === null ? false : map[acceptedFileType] || acceptedFileType;\n\n    // setup attribute mapping for accept\n    addFilter('SET_ATTRIBUTE_TO_OPTION_MAP', map =>\n        Object.assign(map, {\n            accept: 'acceptedFileTypes',\n        })\n    );\n\n    // filtering if an item is allowed in hopper\n    addFilter('ALLOW_HOPPER_ITEM', (file, { query }) => {\n        // if we are not doing file type validation exit\n        if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n            return true;\n        }\n\n        // we validate the file against the accepted file types\n        return validateFile(file, query('GET_ACCEPTED_FILE_TYPES'));\n    });\n\n    // called for each file that is loaded\n    // right before it is set to the item state\n    // should return a promise\n    addFilter(\n        'LOAD_FILE',\n        (file, { query }) =>\n            new Promise((resolve, reject) => {\n                if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n                    resolve(file);\n                    return;\n                }\n\n                const acceptedFileTypes = query('GET_ACCEPTED_FILE_TYPES');\n\n                // custom type detector method\n                const typeDetector = query('GET_FILE_VALIDATE_TYPE_DETECT_TYPE');\n\n                // if invalid, exit here\n                const validationResult = validateFile(file, acceptedFileTypes, typeDetector);\n\n                const handleRejection = () => {\n                    const acceptedFileTypesMapped = acceptedFileTypes\n                        .map(\n                            applyMimeTypeMap(\n                                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP')\n                            )\n                        )\n                        .filter(label => label !== false);\n\n                    const acceptedFileTypesMappedUnique = acceptedFileTypesMapped.filter(\n                        (item, index) => acceptedFileTypesMapped.indexOf(item) === index\n                    );\n\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_FILE_TYPE_NOT_ALLOWED'),\n                            sub: replaceInString(\n                                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES'),\n                                {\n                                    allTypes: acceptedFileTypesMappedUnique.join(', '),\n                                    allButLastType: acceptedFileTypesMappedUnique\n                                        .slice(0, -1)\n                                        .join(', '),\n                                    lastType:\n                                        acceptedFileTypesMappedUnique[\n                                            acceptedFileTypesMappedUnique.length - 1\n                                        ],\n                                }\n                            ),\n                        },\n                    });\n                };\n\n                // has returned new filename immidiately\n                if (typeof validationResult === 'boolean') {\n                    if (!validationResult) {\n                        return handleRejection();\n                    }\n                    return resolve(file);\n                }\n\n                // is promise\n                validationResult\n                    .then(() => {\n                        resolve(file);\n                    })\n                    .catch(handleRejection);\n            })\n    );\n\n    // expose plugin\n    return {\n        // default options\n        options: {\n            // Enable or disable file type validation\n            allowFileTypeValidation: [true, Type.BOOLEAN],\n\n            // What file types to accept\n            acceptedFileTypes: [[], Type.ARRAY],\n            // - must be comma separated\n            // - mime types: image/png, image/jpeg, image/gif\n            // - extensions: .png, .jpg, .jpeg ( not enabled yet )\n            // - wildcards: image/*\n\n            // label to show when a type is not allowed\n            labelFileTypeNotAllowed: ['File is of invalid type', Type.STRING],\n\n            // nicer label\n            fileValidateTypeLabelExpectedTypes: [\n                'Expects {allButLastType} or {lastType}',\n                Type.STRING,\n            ],\n\n            // map mime types to extensions\n            fileValidateTypeLabelExpectedTypesMap: [{}, Type.OBJECT],\n\n            // Custom function to detect type of file\n            fileValidateTypeDetectType: [null, Type.FUNCTION],\n        },\n    };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser) {\n    document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n}\n\nexport default plugin;\n","/*!\n * FilePondPluginImageCrop 2.0.6\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\nconst isImage = file => /^image/.test(file.type);\n\n/**\n * Image Auto Crop Plugin\n */\nconst plugin = ({ addFilter, utils }) => {\n  const { Type, isFile, getNumericAspectRatioFromString } = utils;\n\n  // tests if crop is allowed on this item\n  const allowCrop = (item, query) =>\n    !(!isImage(item.file) || !query('GET_ALLOW_IMAGE_CROP'));\n\n  const isObject = value => typeof value === 'object';\n\n  const isNumber = value => typeof value === 'number';\n\n  const updateCrop = (item, obj) =>\n    item.setMetadata('crop', Object.assign({}, item.getMetadata('crop'), obj));\n\n  // extend item methods\n  addFilter('DID_CREATE_ITEM', (item, { query }) => {\n    item.extend('setImageCrop', crop => {\n      if (!allowCrop(item, query) || !isObject(center)) return;\n      item.setMetadata('crop', crop);\n      return crop;\n    });\n\n    item.extend('setImageCropCenter', center => {\n      if (!allowCrop(item, query) || !isObject(center)) return;\n      return updateCrop(item, { center });\n    });\n\n    item.extend('setImageCropZoom', zoom => {\n      if (!allowCrop(item, query) || !isNumber(zoom)) return;\n      return updateCrop(item, { zoom: Math.max(1, zoom) });\n    });\n\n    item.extend('setImageCropRotation', rotation => {\n      if (!allowCrop(item, query) || !isNumber(rotation)) return;\n      return updateCrop(item, { rotation });\n    });\n\n    item.extend('setImageCropFlip', flip => {\n      if (!allowCrop(item, query) || !isObject(flip)) return;\n      return updateCrop(item, { flip });\n    });\n\n    item.extend('setImageCropAspectRatio', newAspectRatio => {\n      if (!allowCrop(item, query) || typeof newAspectRatio === 'undefined')\n        return;\n\n      const currentCrop = item.getMetadata('crop');\n\n      const aspectRatio = getNumericAspectRatioFromString(newAspectRatio);\n\n      const newCrop = {\n        center: {\n          x: 0.5,\n          y: 0.5\n        },\n        flip: currentCrop\n          ? Object.assign({}, currentCrop.flip)\n          : {\n              horizontal: false,\n              vertical: false\n            },\n        rotation: 0,\n        zoom: 1,\n        aspectRatio\n      };\n\n      item.setMetadata('crop', newCrop);\n\n      return newCrop;\n    });\n  });\n\n  // subscribe to file transformations\n  addFilter(\n    'DID_LOAD_ITEM',\n    (item, { query }) =>\n      new Promise((resolve, reject) => {\n        // get file reference\n        const file = item.file;\n\n        // if this is not an image we do not have any business cropping it and we'll continue with the unaltered dataset\n        if (!isFile(file) || !isImage(file) || !query('GET_ALLOW_IMAGE_CROP')) {\n          return resolve(item);\n        }\n\n        // already has crop metadata set?\n        const crop = item.getMetadata('crop');\n        if (crop) {\n          return resolve(item);\n        }\n\n        // get the required aspect ratio and exit if it's not set\n        const humanAspectRatio = query('GET_IMAGE_CROP_ASPECT_RATIO');\n\n        // set default crop rectangle\n        item.setMetadata('crop', {\n          center: {\n            x: 0.5,\n            y: 0.5\n          },\n          flip: {\n            horizontal: false,\n            vertical: false\n          },\n          rotation: 0,\n          zoom: 1,\n          aspectRatio: humanAspectRatio\n            ? getNumericAspectRatioFromString(humanAspectRatio)\n            : null\n        });\n\n        // we done!\n        resolve(item);\n      })\n  );\n\n  // Expose plugin options\n  return {\n    options: {\n      // enable or disable image cropping\n      allowImageCrop: [true, Type.BOOLEAN],\n\n      // the aspect ratio of the crop ('1:1', '16:9', etc)\n      imageCropAspectRatio: [null, Type.STRING]\n    }\n  };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser) {\n  document.dispatchEvent(\n    new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n  );\n}\n\nexport default plugin;\n","/*!\n * FilePondPluginImageTransform 3.8.7\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n// test if file is of type image\nconst isImage = file => /^image/.test(file.type);\n\nconst getFilenameWithoutExtension = name => name.substr(0, name.lastIndexOf('.')) || name;\n\n// only handles image/jpg, image/jpeg, image/png, and image/svg+xml for now\nconst ExtensionMap = {\n    jpeg: 'jpg',\n    'svg+xml': 'svg',\n};\n\nconst renameFileToMatchMimeType = (filename, mimeType) => {\n    const name = getFilenameWithoutExtension(filename);\n    const type = mimeType.split('/')[1];\n    const extension = ExtensionMap[type] || type;\n    return `${name}.${extension}`;\n};\n\n// returns all the valid output formats we can encode towards\nconst getValidOutputMimeType = type => (/jpeg|png|svg\\+xml/.test(type) ? type : 'image/jpeg');\n\n// test if file is of type image\nconst isImage$1 = file => /^image/.test(file.type);\n\nconst MATRICES = {\n    1: () => [1, 0, 0, 1, 0, 0],\n    2: width => [-1, 0, 0, 1, width, 0],\n    3: (width, height) => [-1, 0, 0, -1, width, height],\n    4: (width, height) => [1, 0, 0, -1, 0, height],\n    5: () => [0, 1, 1, 0, 0, 0],\n    6: (width, height) => [0, 1, -1, 0, height, 0],\n    7: (width, height) => [0, -1, -1, 0, height, width],\n    8: width => [0, -1, 1, 0, 0, width],\n};\n\nconst getImageOrientationMatrix = (width, height, orientation) => {\n    if (orientation === -1) {\n        orientation = 1;\n    }\n    return MATRICES[orientation](width, height);\n};\n\nconst createVector = (x, y) => ({ x, y });\n\nconst vectorDot = (a, b) => a.x * b.x + a.y * b.y;\n\nconst vectorSubtract = (a, b) => createVector(a.x - b.x, a.y - b.y);\n\nconst vectorDistanceSquared = (a, b) => vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n\nconst vectorDistance = (a, b) => Math.sqrt(vectorDistanceSquared(a, b));\n\nconst getOffsetPointOnEdge = (length, rotation) => {\n    const a = length;\n\n    const A = 1.5707963267948966;\n    const B = rotation;\n    const C = 1.5707963267948966 - rotation;\n\n    const sinA = Math.sin(A);\n    const sinB = Math.sin(B);\n    const sinC = Math.sin(C);\n    const cosC = Math.cos(C);\n    const ratio = a / sinA;\n    const b = ratio * sinB;\n    const c = ratio * sinC;\n\n    return createVector(cosC * b, cosC * c);\n};\n\nconst getRotatedRectSize = (rect, rotation) => {\n    const w = rect.width;\n    const h = rect.height;\n\n    const hor = getOffsetPointOnEdge(w, rotation);\n    const ver = getOffsetPointOnEdge(h, rotation);\n\n    const tl = createVector(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n    const tr = createVector(rect.x + rect.width + Math.abs(ver.y), rect.y + Math.abs(ver.x));\n\n    const bl = createVector(rect.x - Math.abs(ver.y), rect.y + rect.height - Math.abs(ver.x));\n\n    return {\n        width: vectorDistance(tl, tr),\n        height: vectorDistance(tl, bl),\n    };\n};\n\nconst getImageRectZoomFactor = (imageRect, cropRect, rotation = 0, center = { x: 0.5, y: 0.5 }) => {\n    // calculate available space round image center position\n    const cx = center.x > 0.5 ? 1 - center.x : center.x;\n    const cy = center.y > 0.5 ? 1 - center.y : center.y;\n    const imageWidth = cx * 2 * imageRect.width;\n    const imageHeight = cy * 2 * imageRect.height;\n\n    // calculate rotated crop rectangle size\n    const rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n    return Math.max(rotatedCropSize.width / imageWidth, rotatedCropSize.height / imageHeight);\n};\n\nconst getCenteredCropRect = (container, aspectRatio) => {\n    let width = container.width;\n    let height = width * aspectRatio;\n    if (height > container.height) {\n        height = container.height;\n        width = height / aspectRatio;\n    }\n    const x = (container.width - width) * 0.5;\n    const y = (container.height - height) * 0.5;\n\n    return {\n        x,\n        y,\n        width,\n        height,\n    };\n};\n\nconst calculateCanvasSize = (image, canvasAspectRatio, zoom = 1) => {\n    const imageAspectRatio = image.height / image.width;\n\n    // determine actual pixels on x and y axis\n    let canvasWidth = 1;\n    let canvasHeight = canvasAspectRatio;\n    let imgWidth = 1;\n    let imgHeight = imageAspectRatio;\n    if (imgHeight > canvasHeight) {\n        imgHeight = canvasHeight;\n        imgWidth = imgHeight / imageAspectRatio;\n    }\n\n    const scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n    const width = image.width / (zoom * scalar * imgWidth);\n    const height = width * canvasAspectRatio;\n\n    return {\n        width: width,\n        height: height,\n    };\n};\n\nconst canvasRelease = canvas => {\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, 1, 1);\n};\n\nconst isFlipped = flip => flip && (flip.horizontal || flip.vertical);\n\nconst getBitmap = (image, orientation, flip) => {\n    if (orientation <= 1 && !isFlipped(flip)) {\n        image.width = image.naturalWidth;\n        image.height = image.naturalHeight;\n        return image;\n    }\n\n    const canvas = document.createElement('canvas');\n    const width = image.naturalWidth;\n    const height = image.naturalHeight;\n\n    // if is rotated incorrectly swap width and height\n    const swapped = orientation >= 5 && orientation <= 8;\n    if (swapped) {\n        canvas.width = height;\n        canvas.height = width;\n    } else {\n        canvas.width = width;\n        canvas.height = height;\n    }\n\n    // draw the image but first fix orientation and set correct flip\n    const ctx = canvas.getContext('2d');\n\n    // get base transformation matrix\n    if (orientation) {\n        ctx.transform.apply(ctx, getImageOrientationMatrix(width, height, orientation));\n    }\n\n    if (isFlipped(flip)) {\n        // flip horizontal\n        // [-1, 0, 0, 1, width, 0]\n        const matrix = [1, 0, 0, 1, 0, 0];\n        if ((!swapped && flip.horizontal) || swapped & flip.vertical) {\n            matrix[0] = -1;\n            matrix[4] = width;\n        }\n\n        // flip vertical\n        // [1, 0, 0, -1, 0, height]\n        if ((!swapped && flip.vertical) || (swapped && flip.horizontal)) {\n            matrix[3] = -1;\n            matrix[5] = height;\n        }\n\n        ctx.transform(...matrix);\n    }\n\n    ctx.drawImage(image, 0, 0, width, height);\n\n    return canvas;\n};\n\nconst imageToImageData = (imageElement, orientation, crop = {}, options = {}) => {\n    const { canvasMemoryLimit, background = null } = options;\n\n    const zoom = crop.zoom || 1;\n\n    // fixes possible image orientation problems by drawing the image on the correct canvas\n    const bitmap = getBitmap(imageElement, orientation, crop.flip);\n    const imageSize = {\n        width: bitmap.width,\n        height: bitmap.height,\n    };\n\n    const aspectRatio = crop.aspectRatio || imageSize.height / imageSize.width;\n\n    let canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n    if (canvasMemoryLimit) {\n        const requiredMemory = canvasSize.width * canvasSize.height;\n        if (requiredMemory > canvasMemoryLimit) {\n            const scalar = Math.sqrt(canvasMemoryLimit) / Math.sqrt(requiredMemory);\n            imageSize.width = Math.floor(imageSize.width * scalar);\n            imageSize.height = Math.floor(imageSize.height * scalar);\n            canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n        }\n    }\n\n    const canvas = document.createElement('canvas');\n\n    const canvasCenter = {\n        x: canvasSize.width * 0.5,\n        y: canvasSize.height * 0.5,\n    };\n\n    const stage = {\n        x: 0,\n        y: 0,\n        width: canvasSize.width,\n        height: canvasSize.height,\n        center: canvasCenter,\n    };\n\n    const shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n    const scale =\n        zoom *\n        getImageRectZoomFactor(\n            imageSize,\n            getCenteredCropRect(stage, aspectRatio),\n            crop.rotation,\n            shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n        );\n\n    // start drawing\n    canvas.width = Math.round(canvasSize.width / scale);\n    canvas.height = Math.round(canvasSize.height / scale);\n\n    canvasCenter.x /= scale;\n    canvasCenter.y /= scale;\n\n    const imageOffset = {\n        x: canvasCenter.x - imageSize.width * (crop.center ? crop.center.x : 0.5),\n        y: canvasCenter.y - imageSize.height * (crop.center ? crop.center.y : 0.5),\n    };\n\n    const ctx = canvas.getContext('2d');\n    if (background) {\n        ctx.fillStyle = background;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n    }\n\n    // move to draw offset\n    ctx.translate(canvasCenter.x, canvasCenter.y);\n    ctx.rotate(crop.rotation || 0);\n\n    // draw the image\n    ctx.drawImage(\n        bitmap,\n        imageOffset.x - canvasCenter.x,\n        imageOffset.y - canvasCenter.y,\n        imageSize.width,\n        imageSize.height\n    );\n\n    // get data from canvas\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    // release canvas\n    canvasRelease(canvas);\n\n    // return data\n    return imageData;\n};\n\n/**\n * Polyfill toBlob for Edge\n */\nconst IS_BROWSER = (() =>\n    typeof window !== 'undefined' && typeof window.document !== 'undefined')();\nif (IS_BROWSER) {\n    if (!HTMLCanvasElement.prototype.toBlob) {\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n            value: function(callback, type, quality) {\n                var dataURL = this.toDataURL(type, quality).split(',')[1];\n                setTimeout(function() {\n                    var binStr = atob(dataURL);\n                    var len = binStr.length;\n                    var arr = new Uint8Array(len);\n                    for (var i = 0; i < len; i++) {\n                        arr[i] = binStr.charCodeAt(i);\n                    }\n                    callback(new Blob([arr], { type: type || 'image/png' }));\n                });\n            },\n        });\n    }\n}\n\nconst canvasToBlob = (canvas, options, beforeCreateBlob = null) =>\n    new Promise(resolve => {\n        const promisedImage = beforeCreateBlob ? beforeCreateBlob(canvas) : canvas;\n        Promise.resolve(promisedImage).then(canvas => {\n            canvas.toBlob(resolve, options.type, options.quality);\n        });\n    });\n\nconst vectorMultiply = (v, amount) => createVector$1(v.x * amount, v.y * amount);\n\nconst vectorAdd = (a, b) => createVector$1(a.x + b.x, a.y + b.y);\n\nconst vectorNormalize = v => {\n    const l = Math.sqrt(v.x * v.x + v.y * v.y);\n    if (l === 0) {\n        return {\n            x: 0,\n            y: 0,\n        };\n    }\n    return createVector$1(v.x / l, v.y / l);\n};\n\nconst vectorRotate = (v, radians, origin) => {\n    const cos = Math.cos(radians);\n    const sin = Math.sin(radians);\n    const t = createVector$1(v.x - origin.x, v.y - origin.y);\n    return createVector$1(origin.x + cos * t.x - sin * t.y, origin.y + sin * t.x + cos * t.y);\n};\n\nconst createVector$1 = (x = 0, y = 0) => ({ x, y });\n\nconst getMarkupValue = (value, size, scalar = 1, axis) => {\n    if (typeof value === 'string') {\n        return parseFloat(value) * scalar;\n    }\n    if (typeof value === 'number') {\n        return value * (axis ? size[axis] : Math.min(size.width, size.height));\n    }\n    return;\n};\n\nconst getMarkupStyles = (markup, size, scale) => {\n    const lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n    const fill = markup.backgroundColor || markup.fontColor || 'transparent';\n    const stroke = markup.borderColor || markup.lineColor || 'transparent';\n    const strokeWidth = getMarkupValue(markup.borderWidth || markup.lineWidth, size, scale);\n    const lineCap = markup.lineCap || 'round';\n    const lineJoin = markup.lineJoin || 'round';\n    const dashes =\n        typeof lineStyle === 'string'\n            ? ''\n            : lineStyle.map(v => getMarkupValue(v, size, scale)).join(',');\n    const opacity = markup.opacity || 1;\n    return {\n        'stroke-linecap': lineCap,\n        'stroke-linejoin': lineJoin,\n        'stroke-width': strokeWidth || 0,\n        'stroke-dasharray': dashes,\n        stroke,\n        fill,\n        opacity,\n    };\n};\n\nconst isDefined = value => value != null;\n\nconst getMarkupRect = (rect, size, scalar = 1) => {\n    let left =\n        getMarkupValue(rect.x, size, scalar, 'width') ||\n        getMarkupValue(rect.left, size, scalar, 'width');\n    let top =\n        getMarkupValue(rect.y, size, scalar, 'height') ||\n        getMarkupValue(rect.top, size, scalar, 'height');\n    let width = getMarkupValue(rect.width, size, scalar, 'width');\n    let height = getMarkupValue(rect.height, size, scalar, 'height');\n    let right = getMarkupValue(rect.right, size, scalar, 'width');\n    let bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n    if (!isDefined(top)) {\n        if (isDefined(height) && isDefined(bottom)) {\n            top = size.height - height - bottom;\n        } else {\n            top = bottom;\n        }\n    }\n\n    if (!isDefined(left)) {\n        if (isDefined(width) && isDefined(right)) {\n            left = size.width - width - right;\n        } else {\n            left = right;\n        }\n    }\n\n    if (!isDefined(width)) {\n        if (isDefined(left) && isDefined(right)) {\n            width = size.width - left - right;\n        } else {\n            width = 0;\n        }\n    }\n\n    if (!isDefined(height)) {\n        if (isDefined(top) && isDefined(bottom)) {\n            height = size.height - top - bottom;\n        } else {\n            height = 0;\n        }\n    }\n\n    return {\n        x: left || 0,\n        y: top || 0,\n        width: width || 0,\n        height: height || 0,\n    };\n};\n\nconst pointsToPathShape = points =>\n    points.map((point, index) => `${index === 0 ? 'M' : 'L'} ${point.x} ${point.y}`).join(' ');\n\nconst setAttributes = (element, attr) =>\n    Object.keys(attr).forEach(key => element.setAttribute(key, attr[key]));\n\nconst ns = 'http://www.w3.org/2000/svg';\nconst svg = (tag, attr) => {\n    const element = document.createElementNS(ns, tag);\n    if (attr) {\n        setAttributes(element, attr);\n    }\n    return element;\n};\n\nconst updateRect = element =>\n    setAttributes(element, {\n        ...element.rect,\n        ...element.styles,\n    });\n\nconst updateEllipse = element => {\n    const cx = element.rect.x + element.rect.width * 0.5;\n    const cy = element.rect.y + element.rect.height * 0.5;\n    const rx = element.rect.width * 0.5;\n    const ry = element.rect.height * 0.5;\n    return setAttributes(element, {\n        cx,\n        cy,\n        rx,\n        ry,\n        ...element.styles,\n    });\n};\n\nconst IMAGE_FIT_STYLE = {\n    contain: 'xMidYMid meet',\n    cover: 'xMidYMid slice',\n};\n\nconst updateImage = (element, markup) => {\n    setAttributes(element, {\n        ...element.rect,\n        ...element.styles,\n        preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none',\n    });\n};\n\nconst TEXT_ANCHOR = {\n    left: 'start',\n    center: 'middle',\n    right: 'end',\n};\n\nconst updateText = (element, markup, size, scale) => {\n    const fontSize = getMarkupValue(markup.fontSize, size, scale);\n    const fontFamily = markup.fontFamily || 'sans-serif';\n    const fontWeight = markup.fontWeight || 'normal';\n    const textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n    setAttributes(element, {\n        ...element.rect,\n        ...element.styles,\n        'stroke-width': 0,\n        'font-weight': fontWeight,\n        'font-size': fontSize,\n        'font-family': fontFamily,\n        'text-anchor': textAlign,\n    });\n\n    // update text\n    if (element.text !== markup.text) {\n        element.text = markup.text;\n        element.textContent = markup.text.length ? markup.text : ' ';\n    }\n};\n\nconst updateLine = (element, markup, size, scale) => {\n    setAttributes(element, {\n        ...element.rect,\n        ...element.styles,\n        fill: 'none',\n    });\n\n    const line = element.childNodes[0];\n    const begin = element.childNodes[1];\n    const end = element.childNodes[2];\n\n    const origin = element.rect;\n\n    const target = {\n        x: element.rect.x + element.rect.width,\n        y: element.rect.y + element.rect.height,\n    };\n\n    setAttributes(line, {\n        x1: origin.x,\n        y1: origin.y,\n        x2: target.x,\n        y2: target.y,\n    });\n\n    if (!markup.lineDecoration) return;\n\n    begin.style.display = 'none';\n    end.style.display = 'none';\n\n    const v = vectorNormalize({\n        x: target.x - origin.x,\n        y: target.y - origin.y,\n    });\n\n    const l = getMarkupValue(0.05, size, scale);\n\n    if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n        const arrowBeginRotationPoint = vectorMultiply(v, l);\n        const arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n        const arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n        const arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n        setAttributes(begin, {\n            style: 'display:block;',\n            d: `M${arrowBeginA.x},${arrowBeginA.y} L${origin.x},${origin.y} L${arrowBeginB.x},${\n                arrowBeginB.y\n            }`,\n        });\n    }\n\n    if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n        const arrowEndRotationPoint = vectorMultiply(v, -l);\n        const arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n        const arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n        const arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n        setAttributes(end, {\n            style: 'display:block;',\n            d: `M${arrowEndA.x},${arrowEndA.y} L${target.x},${target.y} L${arrowEndB.x},${\n                arrowEndB.y\n            }`,\n        });\n    }\n};\n\nconst updatePath = (element, markup, size, scale) => {\n    setAttributes(element, {\n        ...element.styles,\n        fill: 'none',\n        d: pointsToPathShape(\n            markup.points.map(point => ({\n                x: getMarkupValue(point.x, size, scale, 'width'),\n                y: getMarkupValue(point.y, size, scale, 'height'),\n            }))\n        ),\n    });\n};\n\nconst createShape = node => markup => svg(node, { id: markup.id });\n\nconst createImage = markup => {\n    const shape = svg('image', {\n        id: markup.id,\n        'stroke-linecap': 'round',\n        'stroke-linejoin': 'round',\n        opacity: '0',\n    });\n    shape.onload = () => {\n        shape.setAttribute('opacity', markup.opacity || 1);\n    };\n    shape.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', markup.src);\n    return shape;\n};\n\nconst createLine = markup => {\n    const shape = svg('g', {\n        id: markup.id,\n        'stroke-linecap': 'round',\n        'stroke-linejoin': 'round',\n    });\n\n    const line = svg('line');\n    shape.appendChild(line);\n\n    const begin = svg('path');\n    shape.appendChild(begin);\n\n    const end = svg('path');\n    shape.appendChild(end);\n\n    return shape;\n};\n\nconst CREATE_TYPE_ROUTES = {\n    image: createImage,\n    rect: createShape('rect'),\n    ellipse: createShape('ellipse'),\n    text: createShape('text'),\n    path: createShape('path'),\n    line: createLine,\n};\n\nconst UPDATE_TYPE_ROUTES = {\n    rect: updateRect,\n    ellipse: updateEllipse,\n    image: updateImage,\n    text: updateText,\n    path: updatePath,\n    line: updateLine,\n};\n\nconst createMarkupByType = (type, markup) => CREATE_TYPE_ROUTES[type](markup);\n\nconst updateMarkupByType = (element, type, markup, size, scale) => {\n    if (type !== 'path') {\n        element.rect = getMarkupRect(markup, size, scale);\n    }\n    element.styles = getMarkupStyles(markup, size, scale);\n    UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n};\n\nconst sortMarkupByZIndex = (a, b) => {\n    if (a[1].zIndex > b[1].zIndex) {\n        return 1;\n    }\n    if (a[1].zIndex < b[1].zIndex) {\n        return -1;\n    }\n    return 0;\n};\n\nconst cropSVG = (blob, crop = {}, markup, options) =>\n    new Promise(resolve => {\n        const { background = null } = options;\n\n        // load blob contents and wrap in crop svg\n        const fr = new FileReader();\n        fr.onloadend = () => {\n            // get svg text\n            const text = fr.result;\n\n            // create element with svg and get size\n            const original = document.createElement('div');\n            original.style.cssText = `position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;`;\n            original.innerHTML = text;\n            const originalNode = original.querySelector('svg');\n            document.body.appendChild(original);\n\n            // request bounding box dimensions\n            const bBox = originalNode.getBBox();\n            original.parentNode.removeChild(original);\n\n            // get title\n            const titleNode = original.querySelector('title');\n\n            // calculate new heights and widths\n            const viewBoxAttribute = originalNode.getAttribute('viewBox') || '';\n            const widthAttribute = originalNode.getAttribute('width') || '';\n            const heightAttribute = originalNode.getAttribute('height') || '';\n            let width = parseFloat(widthAttribute) || null;\n            let height = parseFloat(heightAttribute) || null;\n            const widthUnits = (widthAttribute.match(/[a-z]+/) || [])[0] || '';\n            const heightUnits = (heightAttribute.match(/[a-z]+/) || [])[0] || '';\n\n            // create new size\n            const viewBoxList = viewBoxAttribute.split(' ').map(parseFloat);\n            const viewBox = viewBoxList.length\n                ? {\n                      x: viewBoxList[0],\n                      y: viewBoxList[1],\n                      width: viewBoxList[2],\n                      height: viewBoxList[3],\n                  }\n                : bBox;\n\n            let imageWidth = width != null ? width : viewBox.width;\n            let imageHeight = height != null ? height : viewBox.height;\n\n            originalNode.style.overflow = 'visible';\n            originalNode.setAttribute('width', imageWidth);\n            originalNode.setAttribute('height', imageHeight);\n\n            // markup\n            let markupSVG = '';\n            if (markup && markup.length) {\n                const size = {\n                    width: imageWidth,\n                    height: imageHeight,\n                };\n                markupSVG = markup.sort(sortMarkupByZIndex).reduce((prev, shape) => {\n                    const el = createMarkupByType(shape[0], shape[1]);\n                    updateMarkupByType(el, shape[0], shape[1], size);\n                    el.removeAttribute('id');\n                    if (el.getAttribute('opacity') === 1) {\n                        el.removeAttribute('opacity');\n                    }\n                    return prev + '\\n' + el.outerHTML + '\\n';\n                }, '');\n                markupSVG = `\\n\\n<g>${markupSVG.replace(/&nbsp;/g, ' ')}</g>\\n\\n`;\n            }\n\n            const aspectRatio = crop.aspectRatio || imageHeight / imageWidth;\n\n            const canvasWidth = imageWidth;\n            const canvasHeight = canvasWidth * aspectRatio;\n\n            const shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n            const cropCenterX = crop.center ? crop.center.x : 0.5;\n            const cropCenterY = crop.center ? crop.center.y : 0.5;\n\n            const canvasZoomFactor = getImageRectZoomFactor(\n                {\n                    width: imageWidth,\n                    height: imageHeight,\n                },\n                getCenteredCropRect(\n                    {\n                        width: canvasWidth,\n                        height: canvasHeight,\n                    },\n                    aspectRatio\n                ),\n                crop.rotation,\n                shouldLimit\n                    ? { x: cropCenterX, y: cropCenterY }\n                    : {\n                          x: 0.5,\n                          y: 0.5,\n                      }\n            );\n\n            const scale = crop.zoom * canvasZoomFactor;\n\n            const rotation = crop.rotation * (180 / Math.PI);\n\n            const canvasCenter = {\n                x: canvasWidth * 0.5,\n                y: canvasHeight * 0.5,\n            };\n\n            const imageOffset = {\n                x: canvasCenter.x - imageWidth * cropCenterX,\n                y: canvasCenter.y - imageHeight * cropCenterY,\n            };\n\n            const cropTransforms = [\n                // rotate\n                `rotate(${rotation} ${canvasCenter.x} ${canvasCenter.y})`,\n\n                // scale\n                `translate(${canvasCenter.x} ${canvasCenter.y})`,\n                `scale(${scale})`,\n                `translate(${-canvasCenter.x} ${-canvasCenter.y})`,\n\n                // offset\n                `translate(${imageOffset.x} ${imageOffset.y})`,\n            ];\n\n            const cropFlipHorizontal = crop.flip && crop.flip.horizontal;\n            const cropFlipVertical = crop.flip && crop.flip.vertical;\n\n            const flipTransforms = [\n                `scale(${cropFlipHorizontal ? -1 : 1} ${cropFlipVertical ? -1 : 1})`,\n                `translate(${cropFlipHorizontal ? -imageWidth : 0} ${\n                    cropFlipVertical ? -imageHeight : 0\n                })`,\n            ];\n\n            // crop\n            const transformed = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"${canvasWidth}${widthUnits}\" height=\"${canvasHeight}${heightUnits}\" \nviewBox=\"0 0 ${canvasWidth} ${canvasHeight}\" ${\n                background ? 'style=\"background:' + background + '\" ' : ''\n            }\npreserveAspectRatio=\"xMinYMin\"\nxmlns:xlink=\"http://www.w3.org/1999/xlink\"\nxmlns=\"http://www.w3.org/2000/svg\">\n<!-- Generated by PQINA - https://pqina.nl/ -->\n<title>${titleNode ? titleNode.textContent : ''}</title>\n<g transform=\"${cropTransforms.join(' ')}\">\n<g transform=\"${flipTransforms.join(' ')}\">\n${originalNode.outerHTML}${markupSVG}\n</g>\n</g>\n</svg>`;\n\n            // create new svg file\n            resolve(transformed);\n        };\n\n        fr.readAsText(blob);\n    });\n\nconst objectToImageData = obj => {\n    let imageData;\n    try {\n        imageData = new ImageData(obj.width, obj.height);\n    } catch (e) {\n        // IE + Old EDGE (tested on 12)\n        const canvas = document.createElement('canvas');\n        imageData = canvas.getContext('2d').createImageData(obj.width, obj.height);\n    }\n    imageData.data.set(obj.data);\n    return imageData;\n};\n\n/* javascript-obfuscator:disable */\nconst TransformWorker = () => {\n    // maps transform types to transform functions\n    const TRANSFORMS = { resize, filter };\n\n    // applies all image transforms to the image data array\n    const applyTransforms = (transforms, imageData) => {\n        transforms.forEach(transform => {\n            imageData = TRANSFORMS[transform.type](imageData, transform.data);\n        });\n        return imageData;\n    };\n\n    // transform image hub\n    const transform = (data, cb) => {\n        let transforms = data.transforms;\n\n        // if has filter and has resize, move filter to resize operation\n        let filterTransform = null;\n        transforms.forEach(transform => {\n            if (transform.type === 'filter') {\n                filterTransform = transform;\n            }\n        });\n        if (filterTransform) {\n            // find resize\n            let resizeTransform = null;\n            transforms.forEach(transform => {\n                if (transform.type === 'resize') {\n                    resizeTransform = transform;\n                }\n            });\n\n            if (resizeTransform) {\n                // update resize operation\n                resizeTransform.data.matrix = filterTransform.data;\n\n                // remove filter\n                transforms = transforms.filter(transform => transform.type !== 'filter');\n            }\n        }\n\n        cb(applyTransforms(transforms, data.imageData));\n    };\n\n    // eslint-disable-next-line no-restricted-globals\n    self.onmessage = e => {\n        transform(e.data.message, response => {\n            // eslint-disable-next-line no-restricted-globals\n            self.postMessage({ id: e.data.id, message: response }, [response.data.buffer]);\n        });\n    };\n\n    const br = 1.0;\n    const bg = 1.0;\n    const bb = 1.0;\n    function applyFilterMatrix(index, data, m) {\n        const ir = data[index] / 255;\n        const ig = data[index + 1] / 255;\n        const ib = data[index + 2] / 255;\n        const ia = data[index + 3] / 255;\n\n        const mr = ir * m[0] + ig * m[1] + ib * m[2] + ia * m[3] + m[4];\n        const mg = ir * m[5] + ig * m[6] + ib * m[7] + ia * m[8] + m[9];\n        const mb = ir * m[10] + ig * m[11] + ib * m[12] + ia * m[13] + m[14];\n        const ma = ir * m[15] + ig * m[16] + ib * m[17] + ia * m[18] + m[19];\n\n        const or = Math.max(0, mr * ma) + br * (1.0 - ma);\n        const og = Math.max(0, mg * ma) + bg * (1.0 - ma);\n        const ob = Math.max(0, mb * ma) + bb * (1.0 - ma);\n\n        data[index] = Math.max(0.0, Math.min(1.0, or)) * 255;\n        data[index + 1] = Math.max(0.0, Math.min(1.0, og)) * 255;\n        data[index + 2] = Math.max(0.0, Math.min(1.0, ob)) * 255;\n    }\n\n    const identityMatrix = self.JSON.stringify([\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n    ]);\n    function isIdentityMatrix(filter) {\n        return self.JSON.stringify(filter || []) === identityMatrix;\n    }\n\n    function filter(imageData, matrix) {\n        if (!matrix || isIdentityMatrix(matrix)) return imageData;\n\n        const data = imageData.data;\n        const l = data.length;\n\n        const m11 = matrix[0];\n        const m12 = matrix[1];\n        const m13 = matrix[2];\n        const m14 = matrix[3];\n        const m15 = matrix[4];\n\n        const m21 = matrix[5];\n        const m22 = matrix[6];\n        const m23 = matrix[7];\n        const m24 = matrix[8];\n        const m25 = matrix[9];\n\n        const m31 = matrix[10];\n        const m32 = matrix[11];\n        const m33 = matrix[12];\n        const m34 = matrix[13];\n        const m35 = matrix[14];\n\n        const m41 = matrix[15];\n        const m42 = matrix[16];\n        const m43 = matrix[17];\n        const m44 = matrix[18];\n        const m45 = matrix[19];\n\n        let index = 0,\n            r = 0.0,\n            g = 0.0,\n            b = 0.0,\n            a = 0.0,\n            mr = 0.0,\n            mg = 0.0,\n            mb = 0.0,\n            ma = 0.0,\n            or = 0.0,\n            og = 0.0,\n            ob = 0.0;\n\n        for (; index < l; index += 4) {\n            r = data[index] / 255;\n            g = data[index + 1] / 255;\n            b = data[index + 2] / 255;\n            a = data[index + 3] / 255;\n\n            mr = r * m11 + g * m12 + b * m13 + a * m14 + m15;\n            mg = r * m21 + g * m22 + b * m23 + a * m24 + m25;\n            mb = r * m31 + g * m32 + b * m33 + a * m34 + m35;\n            ma = r * m41 + g * m42 + b * m43 + a * m44 + m45;\n\n            or = Math.max(0, mr * ma) + br * (1.0 - ma);\n            og = Math.max(0, mg * ma) + bg * (1.0 - ma);\n            ob = Math.max(0, mb * ma) + bb * (1.0 - ma);\n\n            data[index] = Math.max(0.0, Math.min(1.0, or)) * 255;\n            data[index + 1] = Math.max(0.0, Math.min(1.0, og)) * 255;\n            data[index + 2] = Math.max(0.0, Math.min(1.0, ob)) * 255;\n            // don't update alpha value\n        }\n\n        return imageData;\n    }\n\n    function resize(imageData, data) {\n        let { mode = 'contain', upscale = false, width, height, matrix } = data;\n\n        // test if is identity matrix\n        matrix = !matrix || isIdentityMatrix(matrix) ? null : matrix;\n\n        // need at least a width or a height\n        // also 0 is not a valid width or height\n        if (!width && !height) {\n            return filter(imageData, matrix);\n        }\n\n        // make sure all bounds are set\n        if (width === null) {\n            width = height;\n        } else if (height === null) {\n            height = width;\n        }\n\n        if (mode !== 'force') {\n            let scalarWidth = width / imageData.width;\n            let scalarHeight = height / imageData.height;\n            let scalar = 1;\n\n            if (mode === 'cover') {\n                scalar = Math.max(scalarWidth, scalarHeight);\n            } else if (mode === 'contain') {\n                scalar = Math.min(scalarWidth, scalarHeight);\n            }\n\n            // if image is too small, exit here with original image\n            if (scalar > 1 && upscale === false) {\n                return filter(imageData, matrix);\n            }\n\n            width = imageData.width * scalar;\n            height = imageData.height * scalar;\n        }\n\n        const originWidth = imageData.width;\n        const originHeight = imageData.height;\n        const targetWidth = Math.round(width);\n        const targetHeight = Math.round(height);\n        const inputData = imageData.data;\n        const outputData = new Uint8ClampedArray(targetWidth * targetHeight * 4);\n        const ratioWidth = originWidth / targetWidth;\n        const ratioHeight = originHeight / targetHeight;\n        const ratioWidthHalf = Math.ceil(ratioWidth * 0.5);\n        const ratioHeightHalf = Math.ceil(ratioHeight * 0.5);\n\n        for (let j = 0; j < targetHeight; j++) {\n            for (let i = 0; i < targetWidth; i++) {\n                let x2 = (i + j * targetWidth) * 4;\n                let weight = 0;\n                let weights = 0;\n                let weightsAlpha = 0;\n                let r = 0;\n                let g = 0;\n                let b = 0;\n                let a = 0;\n                let centerY = (j + 0.5) * ratioHeight;\n\n                for (let yy = Math.floor(j * ratioHeight); yy < (j + 1) * ratioHeight; yy++) {\n                    let dy = Math.abs(centerY - (yy + 0.5)) / ratioHeightHalf;\n                    let centerX = (i + 0.5) * ratioWidth;\n                    let w0 = dy * dy;\n\n                    for (let xx = Math.floor(i * ratioWidth); xx < (i + 1) * ratioWidth; xx++) {\n                        let dx = Math.abs(centerX - (xx + 0.5)) / ratioWidthHalf;\n                        let w = Math.sqrt(w0 + dx * dx);\n\n                        if (w >= -1 && w <= 1) {\n                            weight = 2 * w * w * w - 3 * w * w + 1;\n\n                            if (weight > 0) {\n                                dx = 4 * (xx + yy * originWidth);\n\n                                let ref = inputData[dx + 3];\n                                a += weight * ref;\n                                weightsAlpha += weight;\n\n                                if (ref < 255) {\n                                    weight = (weight * ref) / 250;\n                                }\n\n                                r += weight * inputData[dx];\n                                g += weight * inputData[dx + 1];\n                                b += weight * inputData[dx + 2];\n                                weights += weight;\n                            }\n                        }\n                    }\n                }\n\n                outputData[x2] = r / weights;\n                outputData[x2 + 1] = g / weights;\n                outputData[x2 + 2] = b / weights;\n                outputData[x2 + 3] = a / weightsAlpha;\n\n                matrix && applyFilterMatrix(x2, outputData, matrix);\n            }\n        }\n\n        return {\n            data: outputData,\n            width: targetWidth,\n            height: targetHeight,\n        };\n    }\n};\n/* javascript-obfuscator:enable */\n\nconst correctOrientation = (view, offset) => {\n    // Missing 0x45786966 Marker? No Exif Header, stop here\n    if (view.getUint32(offset + 4, false) !== 0x45786966) return;\n\n    // next byte!\n    offset += 4;\n\n    // First 2bytes defines byte align of TIFF data.\n    // If it is 0x4949=\"I I\", it means \"Intel\" type byte align\n    const intelByteAligned = view.getUint16((offset += 6), false) === 0x4949;\n    offset += view.getUint32(offset + 4, intelByteAligned);\n\n    const tags = view.getUint16(offset, intelByteAligned);\n    offset += 2;\n\n    // find Orientation tag\n    for (let i = 0; i < tags; i++) {\n        if (view.getUint16(offset + i * 12, intelByteAligned) === 0x0112) {\n            view.setUint16(offset + i * 12 + 8, 1, intelByteAligned);\n            return true;\n        }\n    }\n    return false;\n};\n\nconst readData = data => {\n    const view = new DataView(data);\n\n    // Every JPEG file starts from binary value '0xFFD8'\n    // If it's not present, exit here\n    if (view.getUint16(0) !== 0xffd8) return null;\n\n    let offset = 2; // Start at 2 as we skipped two bytes (FFD8)\n    let marker;\n    let markerLength;\n    let orientationCorrected = false;\n\n    while (offset < view.byteLength) {\n        marker = view.getUint16(offset, false);\n        markerLength = view.getUint16(offset + 2, false) + 2;\n\n        // Test if is APP and COM markers\n        const isData = (marker >= 0xffe0 && marker <= 0xffef) || marker === 0xfffe;\n        if (!isData) {\n            break;\n        }\n\n        if (!orientationCorrected) {\n            orientationCorrected = correctOrientation(view, offset, markerLength);\n        }\n\n        if (offset + markerLength > view.byteLength) {\n            break;\n        }\n\n        offset += markerLength;\n    }\n    return data.slice(0, offset);\n};\n\nconst getImageHead = file =>\n    new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(readData(reader.result) || null);\n        reader.readAsArrayBuffer(file.slice(0, 256 * 1024));\n    });\n\nconst getBlobBuilder = () => {\n    return (window.BlobBuilder =\n        window.BlobBuilder ||\n        window.WebKitBlobBuilder ||\n        window.MozBlobBuilder ||\n        window.MSBlobBuilder);\n};\n\nconst createBlob = (arrayBuffer, mimeType) => {\n    const BB = getBlobBuilder();\n\n    if (BB) {\n        const bb = new BB();\n        bb.append(arrayBuffer);\n        return bb.getBlob(mimeType);\n    }\n\n    return new Blob([arrayBuffer], {\n        type: mimeType,\n    });\n};\n\nconst getUniqueId = () =>\n    Math.random()\n        .toString(36)\n        .substr(2, 9);\n\nconst createWorker = fn => {\n    const workerBlob = new Blob(['(', fn.toString(), ')()'], { type: 'application/javascript' });\n    const workerURL = URL.createObjectURL(workerBlob);\n    const worker = new Worker(workerURL);\n\n    const trips = [];\n\n    return {\n        transfer: () => {}, // (message, cb) => {}\n        post: (message, cb, transferList) => {\n            const id = getUniqueId();\n            trips[id] = cb;\n\n            worker.onmessage = e => {\n                const cb = trips[e.data.id];\n                if (!cb) return;\n                cb(e.data.message);\n                delete trips[e.data.id];\n            };\n\n            worker.postMessage(\n                {\n                    id,\n                    message,\n                },\n                transferList\n            );\n        },\n        terminate: () => {\n            worker.terminate();\n            URL.revokeObjectURL(workerURL);\n        },\n    };\n};\n\nconst loadImage = url =>\n    new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n            resolve(img);\n        };\n        img.onerror = e => {\n            reject(e);\n        };\n        img.src = url;\n    });\n\nconst chain = funcs =>\n    funcs.reduce(\n        (promise, func) => promise.then(result => func().then(Array.prototype.concat.bind(result))),\n        Promise.resolve([])\n    );\n\nconst canvasApplyMarkup = (canvas, markup) =>\n    new Promise(resolve => {\n        const size = {\n            width: canvas.width,\n            height: canvas.height,\n        };\n\n        const ctx = canvas.getContext('2d');\n\n        const drawers = markup.sort(sortMarkupByZIndex).map(item => () =>\n            new Promise(resolve => {\n                const result = TYPE_DRAW_ROUTES[item[0]](ctx, size, item[1], resolve);\n                if (result) resolve();\n            })\n        );\n\n        chain(drawers).then(() => resolve(canvas));\n    });\n\nconst applyMarkupStyles = (ctx, styles) => {\n    ctx.beginPath();\n    ctx.lineCap = styles['stroke-linecap'];\n    ctx.lineJoin = styles['stroke-linejoin'];\n    ctx.lineWidth = styles['stroke-width'];\n    if (styles['stroke-dasharray'].length) {\n        ctx.setLineDash(styles['stroke-dasharray'].split(','));\n    }\n    ctx.fillStyle = styles['fill'];\n    ctx.strokeStyle = styles['stroke'];\n    ctx.globalAlpha = styles.opacity || 1;\n};\n\nconst drawMarkupStyles = ctx => {\n    ctx.fill();\n    ctx.stroke();\n    ctx.globalAlpha = 1;\n};\n\nconst drawRect = (ctx, size, markup) => {\n    const rect = getMarkupRect(markup, size);\n    const styles = getMarkupStyles(markup, size);\n    applyMarkupStyles(ctx, styles);\n    ctx.rect(rect.x, rect.y, rect.width, rect.height);\n    drawMarkupStyles(ctx, styles);\n    return true;\n};\n\nconst drawEllipse = (ctx, size, markup) => {\n    const rect = getMarkupRect(markup, size);\n    const styles = getMarkupStyles(markup, size);\n    applyMarkupStyles(ctx, styles);\n\n    const x = rect.x,\n        y = rect.y,\n        w = rect.width,\n        h = rect.height,\n        kappa = 0.5522848,\n        ox = (w / 2) * kappa,\n        oy = (h / 2) * kappa,\n        xe = x + w,\n        ye = y + h,\n        xm = x + w / 2,\n        ym = y + h / 2;\n\n    ctx.moveTo(x, ym);\n    ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n    ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n    ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n    ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n\n    drawMarkupStyles(ctx, styles);\n    return true;\n};\n\nconst drawImage = (ctx, size, markup, done) => {\n    const rect = getMarkupRect(markup, size);\n    const styles = getMarkupStyles(markup, size);\n    applyMarkupStyles(ctx, styles);\n\n    const image = new Image();\n\n    // if is cross origin image add cross origin attribute\n    const isCrossOriginImage =\n        new URL(markup.src, window.location.href).origin !== window.location.origin;\n    if (isCrossOriginImage) image.crossOrigin = '';\n\n    image.onload = () => {\n        if (markup.fit === 'cover') {\n            const ar = rect.width / rect.height;\n            const width = ar > 1 ? image.width : image.height * ar;\n            const height = ar > 1 ? image.width / ar : image.height;\n            const x = image.width * 0.5 - width * 0.5;\n            const y = image.height * 0.5 - height * 0.5;\n            ctx.drawImage(image, x, y, width, height, rect.x, rect.y, rect.width, rect.height);\n        } else if (markup.fit === 'contain') {\n            const scalar = Math.min(rect.width / image.width, rect.height / image.height);\n            const width = scalar * image.width;\n            const height = scalar * image.height;\n            const x = rect.x + rect.width * 0.5 - width * 0.5;\n            const y = rect.y + rect.height * 0.5 - height * 0.5;\n            ctx.drawImage(image, 0, 0, image.width, image.height, x, y, width, height);\n        } else {\n            ctx.drawImage(\n                image,\n                0,\n                0,\n                image.width,\n                image.height,\n                rect.x,\n                rect.y,\n                rect.width,\n                rect.height\n            );\n        }\n\n        drawMarkupStyles(ctx, styles);\n        done();\n    };\n    image.src = markup.src;\n};\n\nconst drawText = (ctx, size, markup) => {\n    const rect = getMarkupRect(markup, size);\n    const styles = getMarkupStyles(markup, size);\n    applyMarkupStyles(ctx, styles);\n\n    const fontSize = getMarkupValue(markup.fontSize, size);\n    const fontFamily = markup.fontFamily || 'sans-serif';\n    const fontWeight = markup.fontWeight || 'normal';\n    const textAlign = markup.textAlign || 'left';\n\n    ctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\n    ctx.textAlign = textAlign;\n    ctx.fillText(markup.text, rect.x, rect.y);\n\n    drawMarkupStyles(ctx, styles);\n    return true;\n};\n\nconst drawPath = (ctx, size, markup) => {\n    const styles = getMarkupStyles(markup, size);\n    applyMarkupStyles(ctx, styles);\n    ctx.beginPath();\n\n    const points = markup.points.map(point => ({\n        x: getMarkupValue(point.x, size, 1, 'width'),\n        y: getMarkupValue(point.y, size, 1, 'height'),\n    }));\n\n    ctx.moveTo(points[0].x, points[0].y);\n    const l = points.length;\n    for (let i = 1; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n    }\n\n    drawMarkupStyles(ctx, styles);\n    return true;\n};\n\nconst drawLine = (ctx, size, markup) => {\n    const rect = getMarkupRect(markup, size);\n    const styles = getMarkupStyles(markup, size);\n    applyMarkupStyles(ctx, styles);\n\n    ctx.beginPath();\n\n    const origin = {\n        x: rect.x,\n        y: rect.y,\n    };\n\n    const target = {\n        x: rect.x + rect.width,\n        y: rect.y + rect.height,\n    };\n\n    ctx.moveTo(origin.x, origin.y);\n    ctx.lineTo(target.x, target.y);\n\n    const v = vectorNormalize({\n        x: target.x - origin.x,\n        y: target.y - origin.y,\n    });\n\n    const l = 0.04 * Math.min(size.width, size.height);\n\n    if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n        const arrowBeginRotationPoint = vectorMultiply(v, l);\n        const arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n        const arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n        const arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n        ctx.moveTo(arrowBeginA.x, arrowBeginA.y);\n        ctx.lineTo(origin.x, origin.y);\n        ctx.lineTo(arrowBeginB.x, arrowBeginB.y);\n    }\n    if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n        const arrowEndRotationPoint = vectorMultiply(v, -l);\n        const arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n        const arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n        const arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n        ctx.moveTo(arrowEndA.x, arrowEndA.y);\n        ctx.lineTo(target.x, target.y);\n        ctx.lineTo(arrowEndB.x, arrowEndB.y);\n    }\n\n    drawMarkupStyles(ctx, styles);\n    return true;\n};\n\nconst TYPE_DRAW_ROUTES = {\n    rect: drawRect,\n    ellipse: drawEllipse,\n    image: drawImage,\n    text: drawText,\n    line: drawLine,\n    path: drawPath,\n};\n\nconst imageDataToCanvas = imageData => {\n    const image = document.createElement('canvas');\n    image.width = imageData.width;\n    image.height = imageData.height;\n    const ctx = image.getContext('2d');\n    ctx.putImageData(imageData, 0, 0);\n    return image;\n};\n\nconst transformImage = (file, instructions, options = {}) =>\n    new Promise((resolve, reject) => {\n        // if the file is not an image we do not have any business transforming it\n        if (!file || !isImage$1(file)) return reject({ status: 'not an image file', file });\n\n        // get separate options for easier use\n        const { stripImageHead, beforeCreateBlob, afterCreateBlob, canvasMemoryLimit } = options;\n\n        // get crop\n        const { crop, size, filter, markup, output } = instructions;\n\n        // get exif orientation\n        const orientation =\n            instructions.image && instructions.image.orientation\n                ? Math.max(1, Math.min(8, instructions.image.orientation))\n                : null;\n\n        // compression quality 0 => 100\n        const qualityAsPercentage = output && output.quality;\n        const quality = qualityAsPercentage === null ? null : qualityAsPercentage / 100;\n\n        // output format\n        const type = (output && output.type) || null;\n\n        // background color\n        const background = (output && output.background) || null;\n\n        // get transforms\n        const transforms = [];\n\n        // add resize transforms if set\n        if (size && (typeof size.width === 'number' || typeof size.height === 'number')) {\n            transforms.push({ type: 'resize', data: size });\n        }\n\n        // add filters\n        if (filter && filter.length === 20) {\n            transforms.push({ type: 'filter', data: filter });\n        }\n\n        // resolves with supplied blob\n        const resolveWithBlob = blob => {\n            const promisedBlob = afterCreateBlob ? afterCreateBlob(blob) : blob;\n            Promise.resolve(promisedBlob).then(resolve);\n        };\n\n        // done\n        const toBlob = (imageData, options) => {\n            const canvas = imageDataToCanvas(imageData);\n            const promisedCanvas = markup.length ? canvasApplyMarkup(canvas, markup) : canvas;\n            Promise.resolve(promisedCanvas).then(canvas => {\n                canvasToBlob(canvas, options, beforeCreateBlob)\n                    .then(blob => {\n                        // force release of canvas memory\n                        canvasRelease(canvas);\n\n                        // remove image head (default)\n                        if (stripImageHead) return resolveWithBlob(blob);\n\n                        // try to copy image head from original file to generated blob\n                        getImageHead(file).then(imageHead => {\n                            // re-inject image head in case of JPEG, as the image head is removed by canvas export\n                            if (imageHead !== null) {\n                                blob = new Blob([imageHead, blob.slice(20)], { type: blob.type });\n                            }\n\n                            // done!\n                            resolveWithBlob(blob);\n                        });\n                    })\n                    .catch(reject);\n            });\n        };\n\n        // if this is an svg and we want it to stay an svg\n        if (/svg/.test(file.type) && type === null) {\n            return cropSVG(file, crop, markup, { background }).then(text => {\n                resolve(createBlob(text, 'image/svg+xml'));\n            });\n        }\n\n        // get file url\n        const url = URL.createObjectURL(file);\n\n        // turn the file into an image\n        loadImage(url)\n            .then(image => {\n                // url is no longer needed\n                URL.revokeObjectURL(url);\n\n                // draw to canvas and start transform chain\n                const imageData = imageToImageData(image, orientation, crop, {\n                    canvasMemoryLimit,\n                    background,\n                });\n\n                // determine the format of the blob that we will output\n                const outputFormat = {\n                    quality,\n                    type: type || file.type,\n                };\n\n                // no transforms necessary, we done!\n                if (!transforms.length) {\n                    return toBlob(imageData, outputFormat);\n                }\n\n                // send to the transform worker to transform the blob on a separate thread\n                const worker = createWorker(TransformWorker);\n                worker.post(\n                    {\n                        transforms,\n                        imageData,\n                    },\n                    response => {\n                        // finish up\n                        toBlob(objectToImageData(response), outputFormat);\n\n                        // stop worker\n                        worker.terminate();\n                    },\n                    [imageData.data.buffer]\n                );\n            })\n            .catch(reject);\n    });\n\nconst MARKUP_RECT = ['x', 'y', 'left', 'top', 'right', 'bottom', 'width', 'height'];\n\nconst toOptionalFraction = value =>\n    typeof value === 'string' && /%/.test(value) ? parseFloat(value) / 100 : value;\n\n// adds default markup properties, clones markup\nconst prepareMarkup = markup => {\n    const [type, props] = markup;\n\n    const rect = props.points\n        ? {}\n        : MARKUP_RECT.reduce((prev, curr) => {\n              prev[curr] = toOptionalFraction(props[curr]);\n              return prev;\n          }, {});\n\n    return [\n        type,\n        {\n            zIndex: 0,\n            ...props,\n            ...rect,\n        },\n    ];\n};\n\nconst getImageSize = file =>\n    new Promise((resolve, reject) => {\n        const imageElement = new Image();\n        imageElement.src = URL.createObjectURL(file);\n\n        // start testing size\n        const measure = () => {\n            const width = imageElement.naturalWidth;\n            const height = imageElement.naturalHeight;\n            const hasSize = width && height;\n            if (!hasSize) return;\n\n            URL.revokeObjectURL(imageElement.src);\n            clearInterval(intervalId);\n            resolve({ width, height });\n        };\n\n        imageElement.onerror = err => {\n            URL.revokeObjectURL(imageElement.src);\n            clearInterval(intervalId);\n            reject(err);\n        };\n\n        const intervalId = setInterval(measure, 1);\n\n        measure();\n    });\n\n/**\n * Polyfill Edge and IE when in Browser\n */\nif (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n    if (!HTMLCanvasElement.prototype.toBlob) {\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n            value: function(cb, type, quality) {\n                const canvas = this;\n                setTimeout(() => {\n                    const dataURL = canvas.toDataURL(type, quality).split(',')[1];\n                    const binStr = atob(dataURL);\n                    let index = binStr.length;\n                    const data = new Uint8Array(index);\n                    while (index--) {\n                        data[index] = binStr.charCodeAt(index);\n                    }\n                    cb(new Blob([data], { type: type || 'image/png' }));\n                });\n            },\n        });\n    }\n}\n\nconst isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nconst isIOS = isBrowser && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\n/**\n * Image Transform Plugin\n */\nconst plugin = ({ addFilter, utils }) => {\n    const { Type, forin, getFileFromBlob, isFile } = utils;\n\n    /**\n     * Helper functions\n     */\n\n    // valid transforms (in correct order)\n    const TRANSFORM_LIST = ['crop', 'resize', 'filter', 'markup', 'output'];\n\n    const createVariantCreator = updateMetadata => (transform, file, metadata) =>\n        transform(file, updateMetadata ? updateMetadata(metadata) : metadata);\n\n    const isDefaultCrop = crop =>\n        crop.aspectRatio === null &&\n        crop.rotation === 0 &&\n        crop.zoom === 1 &&\n        crop.center &&\n        crop.center.x === 0.5 &&\n        crop.center.y === 0.5 &&\n        crop.flip &&\n        crop.flip.horizontal === false &&\n        crop.flip.vertical === false;\n\n    /**\n     * Filters\n     */\n    addFilter(\n        'SHOULD_PREPARE_OUTPUT',\n        (shouldPrepareOutput, { query }) =>\n            new Promise(resolve => {\n                // If is not async should prepare now\n                resolve(!query('IS_ASYNC'));\n            })\n    );\n\n    const shouldTransformFile = (query, file, item) =>\n        new Promise(resolve => {\n            if (\n                !query('GET_ALLOW_IMAGE_TRANSFORM') ||\n                item.archived ||\n                !isFile(file) ||\n                !isImage(file)\n            ) {\n                return resolve(false);\n            }\n\n            // if size can't be read this browser doesn't support image\n            getImageSize(file)\n                .then(() => {\n                    const fn = query('GET_IMAGE_TRANSFORM_IMAGE_FILTER');\n                    if (fn) {\n                        const filterResult = fn(file);\n                        if (filterResult == null) {\n                            // undefined or null\n                            return handleRevert(true);\n                        }\n                        if (typeof filterResult === 'boolean') {\n                            return resolve(filterResult);\n                        }\n                        if (typeof filterResult.then === 'function') {\n                            return filterResult.then(resolve);\n                        }\n                    }\n\n                    resolve(true);\n                })\n                .catch(err => {\n                    resolve(false);\n                });\n        });\n\n    addFilter('DID_CREATE_ITEM', (item, { query, dispatch }) => {\n        if (!query('GET_ALLOW_IMAGE_TRANSFORM')) return;\n\n        item.extend(\n            'requestPrepare',\n            () =>\n                new Promise((resolve, reject) => {\n                    dispatch(\n                        'REQUEST_PREPARE_OUTPUT',\n                        {\n                            query: item.id,\n                            item,\n                            success: resolve,\n                            failure: reject,\n                        },\n                        true\n                    );\n                })\n        );\n    });\n\n    // subscribe to file transformations\n    addFilter(\n        'PREPARE_OUTPUT',\n        (file, { query, item }) =>\n            new Promise(resolve => {\n                shouldTransformFile(query, file, item).then(shouldTransform => {\n                    // no need to transform, exit\n                    if (!shouldTransform) return resolve(file);\n\n                    // get variants\n                    const variants = [];\n\n                    // add original file\n                    if (query('GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL')) {\n                        variants.push(\n                            () =>\n                                new Promise(resolve => {\n                                    resolve({\n                                        name: query('GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME'),\n                                        file,\n                                    });\n                                })\n                        );\n                    }\n\n                    // add default output version if output default set to true or if no variants defined\n                    if (query('GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT')) {\n                        variants.push(\n                            (transform, file, metadata) =>\n                                new Promise(resolve => {\n                                    transform(file, metadata).then(file =>\n                                        resolve({\n                                            name: query(\n                                                'GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME'\n                                            ),\n                                            file,\n                                        })\n                                    );\n                                })\n                        );\n                    }\n\n                    // get other variants\n                    const variantsDefinition = query('GET_IMAGE_TRANSFORM_VARIANTS') || {};\n                    forin(variantsDefinition, (key, fn) => {\n                        const createVariant = createVariantCreator(fn);\n                        variants.push(\n                            (transform, file, metadata) =>\n                                new Promise(resolve => {\n                                    createVariant(transform, file, metadata).then(file =>\n                                        resolve({ name: key, file })\n                                    );\n                                })\n                        );\n                    });\n\n                    // output format (quality 0 => 100)\n                    const qualityAsPercentage = query('GET_IMAGE_TRANSFORM_OUTPUT_QUALITY');\n                    const qualityMode = query('GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE');\n                    const quality = qualityAsPercentage === null ? null : qualityAsPercentage / 100;\n                    const type = query('GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE');\n                    const clientTransforms =\n                        query('GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS') || TRANSFORM_LIST;\n\n                    // update transform metadata object\n                    item.setMetadata(\n                        'output',\n                        {\n                            type,\n                            quality,\n                            client: clientTransforms,\n                        },\n                        true\n                    );\n\n                    // the function that is used to apply the file transformations\n                    const transform = (file, metadata) =>\n                        new Promise((resolve, reject) => {\n                            const filteredMetadata = { ...metadata };\n\n                            Object.keys(filteredMetadata)\n                                .filter(instruction => instruction !== 'exif')\n                                .forEach(instruction => {\n                                    // if not in list, remove from object, the instruction will be handled by the server\n                                    if (clientTransforms.indexOf(instruction) === -1) {\n                                        delete filteredMetadata[instruction];\n                                    }\n                                });\n\n                            const { resize, exif, output, crop, filter, markup } = filteredMetadata;\n\n                            const instructions = {\n                                image: {\n                                    orientation: exif ? exif.orientation : null,\n                                },\n                                output:\n                                    output &&\n                                    (output.type ||\n                                        typeof output.quality === 'number' ||\n                                        output.background)\n                                        ? {\n                                              type: output.type,\n                                              quality:\n                                                  typeof output.quality === 'number'\n                                                      ? output.quality * 100\n                                                      : null,\n                                              background:\n                                                  output.background ||\n                                                  query(\n                                                      'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n                                                  ) ||\n                                                  null,\n                                          }\n                                        : undefined,\n                                size:\n                                    resize && (resize.size.width || resize.size.height)\n                                        ? {\n                                              mode: resize.mode,\n                                              upscale: resize.upscale,\n                                              ...resize.size,\n                                          }\n                                        : undefined,\n                                crop:\n                                    crop && !isDefaultCrop(crop)\n                                        ? {\n                                              ...crop,\n                                          }\n                                        : undefined,\n                                markup: markup && markup.length ? markup.map(prepareMarkup) : [],\n                                filter,\n                            };\n\n                            if (instructions.output) {\n                                // determine if file type will change\n                                const willChangeType = output.type\n                                    ? // type set\n                                      output.type !== file.type\n                                    : // type not set\n                                      false;\n\n                                const canChangeQuality = /\\/jpe?g$/.test(file.type);\n                                const willChangeQuality =\n                                    output.quality !== null\n                                        ? // quality set\n                                          canChangeQuality && qualityMode === 'always'\n                                        : // quality not set\n                                          false;\n\n                                // determine if file data will be modified\n                                const willModifyImageData = !!(\n                                    instructions.size ||\n                                    instructions.crop ||\n                                    instructions.filter ||\n                                    willChangeType ||\n                                    willChangeQuality\n                                );\n\n                                // if we're not modifying the image data then we don't have to modify the output\n                                if (!willModifyImageData) return resolve(file);\n                            }\n\n                            const options = {\n                                beforeCreateBlob: query('GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB'),\n                                afterCreateBlob: query('GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB'),\n                                canvasMemoryLimit: query('GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT'),\n                                stripImageHead: query(\n                                    'GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD'\n                                ),\n                            };\n\n                            transformImage(file, instructions, options)\n                                .then(blob => {\n                                    // set file object\n                                    const out = getFileFromBlob(\n                                        blob,\n                                        // rename the original filename to match the mime type of the output image\n                                        renameFileToMatchMimeType(\n                                            file.name,\n                                            getValidOutputMimeType(blob.type)\n                                        )\n                                    );\n\n                                    resolve(out);\n                                })\n                                .catch(reject);\n                        });\n\n                    // start creating variants\n                    const variantPromises = variants.map(create =>\n                        create(transform, file, item.getMetadata())\n                    );\n\n                    // wait for results\n                    Promise.all(variantPromises).then(files => {\n                        // if single file object in array, return the single file object else, return array of\n                        resolve(\n                            files.length === 1 && files[0].name === null\n                                ? // return the File object\n                                  files[0].file\n                                : // return an array of files { name:'name', file:File }\n                                  files\n                        );\n                    });\n                });\n            })\n    );\n\n    // Expose plugin options\n    return {\n        options: {\n            allowImageTransform: [true, Type.BOOLEAN],\n\n            // filter images to transform\n            imageTransformImageFilter: [null, Type.FUNCTION],\n\n            // null, 'image/jpeg', 'image/png'\n            imageTransformOutputMimeType: [null, Type.STRING],\n\n            // null, 0 - 100\n            imageTransformOutputQuality: [null, Type.INT],\n\n            // set to false to copy image exif data to output\n            imageTransformOutputStripImageHead: [true, Type.BOOLEAN],\n\n            // only apply transforms in this list\n            imageTransformClientTransforms: [null, Type.ARRAY],\n\n            // only apply output quality when a transform is required\n            imageTransformOutputQualityMode: ['always', Type.STRING],\n            // 'always'\n            // 'optional'\n            // 'mismatch' (future feature, only applied if quality differs from input)\n\n            // get image transform variants\n            imageTransformVariants: [null, Type.OBJECT],\n\n            // should we post the default transformed file\n            imageTransformVariantsIncludeDefault: [true, Type.BOOLEAN],\n\n            // which name to prefix the default transformed file with\n            imageTransformVariantsDefaultName: [null, Type.STRING],\n\n            // should we post the original file\n            imageTransformVariantsIncludeOriginal: [false, Type.BOOLEAN],\n\n            // which name to prefix the original file with\n            imageTransformVariantsOriginalName: ['original_', Type.STRING],\n\n            // called before creating the blob, receives canvas, expects promise resolve with canvas\n            imageTransformBeforeCreateBlob: [null, Type.FUNCTION],\n\n            // expects promise resolved with blob\n            imageTransformAfterCreateBlob: [null, Type.FUNCTION],\n\n            // canvas memory limit\n            imageTransformCanvasMemoryLimit: [isBrowser && isIOS ? 4096 * 4096 : null, Type.INT],\n\n            // background image of the output canvas\n            imageTransformCanvasBackgroundColor: [null, Type.STRING],\n        },\n    };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nif (isBrowser) {\n    document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n}\n\nexport default plugin;\n","/*!\n * FilePondPluginImageResize 2.0.10\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n// test if file is of type image\nconst isImage = file => /^image/.test(file.type);\n\nconst getImageSize = (url, cb) => {\n    let image = new Image();\n    image.onload = () => {\n        const width = image.naturalWidth;\n        const height = image.naturalHeight;\n        image = null;\n        cb({ width, height });\n    };\n    image.onerror = () => cb(null);\n    image.src = url;\n};\n\n/**\n * Image Auto Resize Plugin\n */\nconst plugin = ({ addFilter, utils }) => {\n    const { Type } = utils;\n\n    // subscribe to file load and append required transformations\n    addFilter(\n        'DID_LOAD_ITEM',\n        (item, { query }) =>\n            new Promise((resolve, reject) => {\n                // get file reference\n                const file = item.file;\n\n                // if this is not an image we do not have any business cropping it\n                if (!isImage(file) || !query('GET_ALLOW_IMAGE_RESIZE')) {\n                    // continue with the unaltered dataset\n                    return resolve(item);\n                }\n\n                const mode = query('GET_IMAGE_RESIZE_MODE');\n                const width = query('GET_IMAGE_RESIZE_TARGET_WIDTH');\n                const height = query('GET_IMAGE_RESIZE_TARGET_HEIGHT');\n                const upscale = query('GET_IMAGE_RESIZE_UPSCALE');\n\n                // no resizing to be done\n                if (width === null && height === null) return resolve(item);\n\n                const targetWidth = width === null ? height : width;\n                const targetHeight = height === null ? targetWidth : height;\n\n                // if should not upscale, we need to determine the size of the file\n                const fileURL = URL.createObjectURL(file);\n                getImageSize(fileURL, size => {\n                    URL.revokeObjectURL(fileURL);\n\n                    // something went wrong\n                    if (!size) return resolve(item);\n\n                    let { width: imageWidth, height: imageHeight } = size;\n\n                    // get exif orientation\n                    const orientation = (item.getMetadata('exif') || {}).orientation || -1;\n\n                    // swap width and height if orientation needs correcting\n                    if (orientation >= 5 && orientation <= 8) {\n                        [imageWidth, imageHeight] = [imageHeight, imageWidth];\n                    }\n\n                    // image is already perfect size, no transformations required\n                    if (imageWidth === targetWidth && imageHeight === targetHeight)\n                        return resolve(item);\n\n                    // already contained?\n                    // can't upscale image, so if already at correct scale, exit\n                    if (!upscale) {\n                        // covering target size\n                        if (mode === 'cover') {\n                            // if one of edges is smaller than target size, exit\n                            if (imageWidth <= targetWidth || imageHeight <= targetHeight)\n                                return resolve(item);\n                        }\n\n                        // not covering target size, if image is contained in target size, exit\n                        else if (imageWidth <= targetWidth && imageHeight <= targetWidth) {\n                            return resolve(item);\n                        }\n                    }\n\n                    // the image needs to be resized\n                    item.setMetadata('resize', {\n                        mode,\n                        upscale,\n                        size: {\n                            width: targetWidth,\n                            height: targetHeight,\n                        },\n                    });\n\n                    resolve(item);\n                });\n            })\n    );\n\n    // Expose plugin options\n    return {\n        options: {\n            // Enable or disable image resizing\n            allowImageResize: [true, Type.BOOLEAN],\n\n            // the method of rescaling\n            // - force => force set size\n            // - cover => pick biggest dimension\n            // - contain => pick smaller dimension\n            imageResizeMode: ['cover', Type.STRING],\n\n            // set to false to disable upscaling of image smaller than the target width / height\n            imageResizeUpscale: [true, Type.BOOLEAN],\n\n            // target width\n            imageResizeTargetWidth: [null, Type.INT],\n\n            // target height\n            imageResizeTargetHeight: [null, Type.INT],\n        },\n    };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser) {\n    document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n}\n\nexport default plugin;\n","import * as FilePond from 'filepond';\n\nimport 'filepond/dist/filepond.css';\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css';\n\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview';\nimport FilePondPluginFileValidateSize from 'filepond-plugin-file-validate-size';\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type';\nimport FilePondPluginImageCrop from 'filepond-plugin-image-crop';\nimport FilePondPluginImageTransform from 'filepond-plugin-image-transform';\nimport FilePondPluginImageResize from 'filepond-plugin-image-resize';\n\nFilePond.registerPlugin(FilePondPluginImagePreview);\nFilePond.registerPlugin(FilePondPluginFileValidateSize);\nFilePond.registerPlugin(FilePondPluginFileValidateType);\nFilePond.registerPlugin(FilePondPluginImageCrop);\nFilePond.registerPlugin(FilePondPluginImageResize);\nFilePond.registerPlugin(FilePondPluginImageTransform);\n\nconst URLtoFile = async function (path) {\n    let url = `${path}`;\n    let name = url.split('/').pop();\n    const response = await fetch(url);\n    const data = await response.blob();\n    const metadata = {\n        name: name,\n        path: path,\n        size: data.size,\n        type: data.type\n    };\n    let file = new File([data], path, metadata);\n\n    return {\n        source: file,\n        options: {\n            type: 'local',\n            metadata,\n        }\n    }\n}\n\nwindow.LivewireFilePond = FilePond;\nwindow.URLtoFile = URLtoFile;\n"],"names":["isNode","value","createStore","initialState","queries","actions","state","actionQueue","dispatchQueue","getState","processActionQueue","queue","processDispatchQueue","type","data","dispatch","isBlocking","actionHandlers","query","str","args","queryHandles","api","action","defineProperty","obj","property","definition","forin","cb","key","createObject","attr","node","name","ns","svgElements","isSVGElement","tag","createElement","className","attributes","element","appendChild","parent","child","index","appendChildView","childViews","view","removeChildView","IS_BROWSER","isBrowser","testElement","getChildCount","el","getViewRect","elementRect","offset","scale","left","top","right","bottom","rect","childView","childViewRect","expandRect","calculateRectSize","isNumber","thereYet","position","destination","velocity","errorMargin","spring","stiffness","damping","mass","target","resting","ts","skipToEndState","easeInOutQuad","t","tween","duration","easing","delay","start","p","reverse","animator","createAnimator","category","def","props","addGetSet","keys","overwrite","o","getter","setter","animations","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","initialProps","animation","addEvent","fn","removeEvent","listeners","viewState","events","add","remove","event","apis","isDefined","defaults","styles","currentProps","getOffset","getScale","getRect","propsHaveChanged","applyStyles","newProps","prop","opacity","perspective","translateX","translateY","scaleX","scaleY","rotateX","rotateY","rotateZ","originX","originY","width","height","transforms","elementCurrentStyle","Mixins","updateRect","style","createView","read","write","create","destroy","filterFrameActionsForChild","didCreateView","didWriteView","ignoreRect","ignoreRectUpdate","mixins","store","frameRect","isResting","activeMixins","ref","writers","readers","destroyers","getElement","getChildViews","getReference","createChildView","getStyle","_read","internalAPI","reader","_write","frameActions","shouldOptimize","writer","mixin","_destroy","destroyer","sharedAPIDefinition","internalAPIDefinition","needle","externalAPIDefinition","mixinAPIDefinition","a","b","mixinAPI","childCount","createPainter","fps","painter","interval","last","id","requestTick","cancelTick","setTimerType","tick","delta","createRoute","routes","root","timestamp","insertBefore","newNode","referenceNode","insertAfter","isArray","isEmpty","trim","toString","toArray","splitter","isBoolean","toBoolean","isString","toNumber","toInt","toFloat","isInt","toBytes","base","naturalFileSize","isFunction","toFunctionReference","string","levels","level","methods","createServerAPI","outline","createAction","method","timeout","headers","parts","toServerAPI","isNull","isObject","isAPI","getType","replaceSingleQuotes","conversionTable","convertTo","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","createOption","currentValue","createOptions","options","optionDefinition","createInitialState","fromCamels","separator","part","createOptionAPI","createOptionActions","createOptionQueries","InteractionMethod","getUniqueId","arrayRemove","arr","run","sync","on","off","listener","fire","copyObjectPropertiesToObject","src","excluded","PRIVATE","createItemAPI","item","removeReleasedItems","items","ItemStatus","FileOrigin","getNonNumeric","getDecimalSeparator","getThousandsSeparator","decimalSeparator","thousandsStringWithSeparator","Type","filters","applyFilterChain","utils","resolve","reject","matchingFilters","f","initialFilter","current","next","error","applyFilters","addFilter","extendDefaultOptions","additionalOptions","defaultOptions","getOptions","setOptions","opts","getItemByQuery","getNumericAspectRatioFromString","aspectRatio","getActiveItems","Status","res","canUpdateFileInput","dataTransfer","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","isItemInBusyState","isItemInReadyState","isAsync","EMPTY","ERROR","BUSY","IDLE","READY","option","status","hasRoomForItem","count","maxFileCount","limit","min","max","arrayInsert","insertItem","isBase64DataURI","getFilenameFromURL","url","getExtensionFromFilename","guesstimateExtension","subtype","leftPad","padding","getDateString","date","getFileFromBlob","blob","filename","extension","file","getBlobBuilder","createBlob","arrayBuffer","mimeType","BB","bb","getBlobFromByteStringWithMimeType","byteString","ab","ia","i","getMimeTypeFromBase64DataURI","dataURI","getBase64DataFromBase64DataURI","getByteStringFromBase64DataURI","getBlobFromBase64DataURI","getFileFromBase64DataURI","getFileNameFromHeader","header","matches","getFileSizeFromHeader","size","getTranfserIdFromHeader","getFileInfoFromHeaders","info","rows","source","createFileLoader","fetchFn","getProgress","abort","load","loadURL","response","computable","total","fileinfo","isGet","sendRequest","aborted","xhr","headersReceived","process","e","createResponse","code","body","createTimeoutResponse","hasQS","buildURL","createFetchFunction","apiUrl","onload","onerror","progress","request","ChunkStatus","processFileChunked","metadata","transfer","chunks","chunkTransferId","chunkServer","chunkSize","chunkRetryDelays","ondata","fd","requestTransferId","formData","requestParams","requestTransferOffset","requestUrl","lastChunkIndex","completeProcessingChunks","canProcessChunk","chunk","processChunk","processChunks","lengthComputable","loaded","updateTotalProgress","retryProcessChunk","totalBytesTransfered","totalSize","abortChunks","serverId","createFileProcessorFunction","canChunkUpload","shouldChunkUpload","willChunkUpload","createProcessorFunction","params","createRevertFunction","uniqueFileId","getRandomNumber","createPerceivedPerformanceUpdater","tickMin","tickMax","runtime","createFileProcessor","processFn","allowMinimumUploadDuration","progressFn","completeFn","transferId","reset","getDuration","getFilenameWithoutExtension","createFileStub","isFile","deepCloneObject","v","createItem","origin","serverFileReference","abortProcessingRequestComplete","setStatus","getFileExtension","getFileType","getFileSize","getFile","loader","meta","success","result","retryLoad","abortLoad","processor","onprocess","requestProcessing","abortProcessing","revert","revertFileUpload","forceRevert","serverTransferId","setMetadata","silent","handler","itemAPI","getItemIndexByQuery","getItemById","itemId","fetchBlob","getDomainFromURL","isExternalURL","dynamicLabel","label","isMockItem","listUpdated","optionalPromise","sortItems","compare","getItemByQueryFromState","itemHandler","failure","files","activeItems","change","shouldPrepareOutput","beforePrepareFile","upload","doUpload","currentIndex","interactionMethod","insertLocation","totalItems","ignoredFiles","isValidFile","promises","itemInsertLocation","mainStatus","handleAdd","shouldAdd","loadComplete","restore","fetch","err","processNow","maxParallelUploads","processNext","queueEntry","itemReference","server","noop","shouldRemove","removeFromView","handleRevert","shouldRevert","requestRemoveResult","optionKeys","prioritizedOptionKeys","PrioritizedOptions","formatFilename","createElement$1","tagName","text","textNode","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","describeArc","x","y","startAngle","endAngle","arcSweep","end","percentageArc","from","to","svg","ringStrokeWidth","ringFrom","ringTo","coordinates","progressIndicator","create$1","write$1","isDisabled","shouldDisable","fileActionButton","toNaturalFileSize","bytes","labelBytes","labelKilobytes","labelMegabytes","labelGigabytes","KB","MB","GB","removeDecimalsWhenZero","decimalCount","create$2","fileName","fileSize","updateFile","updateFileSizeOnError","fileInfo","toPercentage","create$3","main","sub","didSetItemLoadProgress","title","didSetItemProcessProgress","didRequestItemProcessing","didAbortItemProcessing","didCompleteItemProcessing","clear","fileStatus","Buttons","ButtonKeys","calculateFileInfoOffset","getRemoveIndicatorAligment","buttonRect","calculateButtonWidth","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","getLoadIndicatorAlignment","getProcessIndicatorAlignment","DefaultStyle","IdleStyle","ProcessingStyle","StyleMap","processingCompleteIndicatorView","create$4","LocalButtons","prev","curr","allowRevert","allowRemove","allowProcess","instantUpload","alignRemoveItemButton","buttonFilter","enabledButtons","map","buttonView","loadIndicatorView","progressIndicatorView","write$2","route","stylesToApply","defaultStyles","control","create$5","didLoadItem","fileWrapper","PANEL_SPRING_PROPS","create$6","section","createSection","viewConstructor","write$3","topRect","bottomRect","panel","createDragHelper","itemIds","prevIndex","ITEM_TRANSLATE_SPRING","ITEM_SCALE_SPRING","StateMap","create$7","grab","removedActivateListener","dragState","drag","drop","cancel","route$1","write$4","getItemsPerRow","horizontalSpace","itemWidth","getItemIndexByPosition","children","positionInView","l","itemRect","itemHorizontalMargin","itemsPerRow","childMid","itemVerticalMargin","itemHeight","indexX","indexY","offsetX","offsetY","itemTop","itemRight","itemBottom","dropAreaDimensions","val","create$8","addItemView","now","spawnDate","cooldown","dist","moveItem","vx","vy","introItemView","removeItemView","getItemHeight","getItemWidth","dragItem","numItems","oldIndex","dragPosition","dragHeight","dragWidth","cols","location","visibleChildren","idx","childHeight","childBottom","childTop","route$2","write$5","dragCoordinates","dragIndex","addIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","dragOffset","visualHeight","prevX","prevY","visualIndex","vectorX","vectorY","filterSetItemActions","list","create$9","storeDragCoordinates","clearDragCoordinates","route$3","write$6","newHeight","listScroller","attrToggle","enabledValue","resetFileInput","input","form","parentNode","create$a","setAcceptedFileTypes","toggleAllowMultiple","toggleDirectoryFilter","toggleDisabled","toggleRequired","setCaptureMethod","doesAllowBrowse","disableField","updateRequiredStatus","updateFieldValidityStatus","browser","Key","create$b","updateLabelValue","clickable","dropLabel","addBlob","moveBlob","hideBlob","explodeBlob","write$7","route$4","drip","setInputFiles","create$c","getField","syncFieldPositionsWithItems","didReorderItems","didAddItem","shouldUseFileInput","dataContainer","didLoadItem$1","field","fileItem","didPrepareOutput","didSetDisabled","didRemoveItem","didDefineValue","write$8","getRootNode","images","text$1","guesstimateMimeType","requestDataTransferItems","links","getLinks","hasFiles","getFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","entry","getAsEntry","isDirectoryEntry","getFilesInDirectory","dirCounter","fileCounter","resolveIfDone","readEntries","dirEntry","directoryReader","readBatch","entries","correctedFile","correctMissingFileType","getLinksFromTransferMetaData","getLinksFromTransferURLData","dragNDropObservers","eventPosition","createDragNDropClient","scopeToObserve","filterElement","observer","getDragNDropObserver","client","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","handlers","createHandler","elementFromPoint","point","isEventTarget","elementAtPosition","initialTarget","setDropEffect","effect","onenter","overDropTarget","onexit","ondrag","allowdrop","allowsTransfer","ondrop","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","filterItems","lastState","currentState","filteredItems","listening","listeners$1","handlePaste","activeEl","inScope","listen","unlisten","createPaster","create$d","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","message","clear$1","listModified","isUsingFilePond","itemAdded","itemRemoved","itemProcessed","itemProcessedUndo","itemError","assistant","toCamels","debounce","func","immidiateOnly","MAX_FILES_LIMIT","prevent","create$e","canHover","hasPointerEvents","credits","frag","write$9","route$5","bounds","calculateRootBoundingBoxHeight","hopper","isMultiItem","maxItems","atMaxCapacity","addAction","listItemMargin","calculateListItemMargin","listHeight","calculateListHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","isCappedHeight","panelHeight","itemMargin","visual","scrollList","itemList","newItem","removedItem","verticalItemCount","exceedsMaxFiles","allowReplace","allowMultiple","totalBrowseItems","getDragIndex","toggleDrop","isAllowed","enabled","beforeDropFile","toggleBrowse","togglePaste","createApp","initialOptions","originalElement","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","readWriteApi","routeActionsToEvents","createEvent","eventRoutes","exposeEvent","detail","exports","filtered","prepareFile","addFile","addFiles","isFilePondFile","removeFile","sources","lastArgument","processFile","prepareFiles","processFiles","removeFiles","q","createAppObject","customOptions","lowerCaseFirstLetter","attributeNameToPropertyName","attributeName","mapObject","object","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","output","attribute","createAppAtElement","mergedOptions","attributeOptions","app","createApp$1","PRIVATE_METHODS","createAppAPI","replaceInString","replacements","match","createWorker","workerBlob","workerURL","worker","transferList","loadImage","img","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","plugin","pluginOutline","isOperaMini","hasPromises","hasBlobSlice","hasCreateObjectURL","hasVisibility","hasTiming","hasCSSSupports","isIE11","supported","isSupported","Status$1","FileStatus","FileOrigin$1","OptionTypes","create$f","parse","find","registerPlugin","getOptions$1","setOptions$1","updateOptionTypes","hook","indexToRemove","context","newHook","plugins","isPreviewableImage","vectorMultiply","amount","createVector","vectorAdd","vectorNormalize","vectorRotate","radians","cos","sin","getMarkupValue","scalar","axis","getMarkupStyles","markup","lineStyle","fill","stroke","strokeWidth","lineCap","lineJoin","dashes","getMarkupRect","pointsToPathShape","points","setAttributes","updateEllipse","cx","cy","rx","ry","IMAGE_FIT_STYLE","updateImage","TEXT_ANCHOR","updateText","fontSize","fontFamily","fontWeight","textAlign","updateLine","line","begin","arrowBeginRotationPoint","arrowBeginCenter","arrowBeginA","arrowBeginB","arrowEndRotationPoint","arrowEndCenter","arrowEndA","arrowEndB","updatePath","createShape","createImage","shape","createLine","CREATE_TYPE_ROUTES","UPDATE_TYPE_ROUTES","createMarkupByType","updateMarkupByType","MARKUP_RECT","toOptionalFraction","prepareMarkup","sortMarkupByZIndex","createMarkupView","_","crop","resize","viewWidth","viewHeight","cropWidth","cropHeight","outputWidth","outputHeight","outputFit","outputUpscale","shouldUpscale","scalarWidth","scalarHeight","markupFilter","settings","createVector$1","vectorDot","vectorSubtract","vectorDistanceSquared","vectorDistance","getOffsetPointOnEdge","length","rotation","A","B","C","sinA","sinB","sinC","cosC","ratio","c","getRotatedRectSize","w","h","hor","ver","tl","tr","bl","calculateCanvasSize","image","canvasAspectRatio","zoom","imageAspectRatio","canvasWidth","canvasHeight","imgWidth","imgHeight","getImageRectZoomFactor","imageRect","cropRect","center","imageWidth","imageHeight","rotatedCropSize","getCenteredCropRect","container","getCurrentCropSize","imageSize","canvasSize","canvasCenter","stage","shouldLimit","stageZoomFactor","IMAGE_SCALE_SPRING_PROPS","createBitmapView","createImageCanvasWrapper","flip","bitmap","createClipView","transparencyIndicator","dirty","translation","cropAspectRatio","imageView","createImageView","clip","containerWidth","containerHeight","fixedPreviewHeight","minPreviewHeight","maxPreviewHeight","panelAspectRatio","clipHeight","clipWidth","SVG_MASK","SVGMaskUniqueId","createImageOverlayView","fpAPI","mask","BitmapWorker","ColorMatrixWorker","imageData","matrix","m11","m12","m13","m14","m15","m21","m22","m23","m24","m25","m31","m32","m33","m34","m35","m41","m42","m43","m44","m45","r","g","getImageSize","fixImageOrientation","ctx","orientation","createPreviewImage","canvas","isBitmap","MAX_WIDTH","MAX_HEIGHT","calculateAverageColor","averageColor","cloneCanvas","cloneImageData","createImageWrapperView","OverlayView","ImageView","applyFilter","filter","removeImageView","shiftImage","pushImage","background","didUpdateItemMetadata","canCreateImageBitmap","isFirefox","firefoxVersion","didCreatePreviewContainer","fileURL","drawPreview","loadPreviewFallback","previewImageLoaded","pixelDensityFactor","scaleFactor","previewImageRatio","previewContainerWidth","previewContainerHeight","previewImage","done","imageBitmap","didDrawPreview","restoreOverlay","didThrowError","didCompleteProcessing","viewsToRemove","imagePreviewView","viewAPI","is","supportsCreateImageBitmap","maxPreviewFileSize","rescaleItem","itemPanelAspectRatio","fixedHeight","previewAspectRatio","previewHeightMax","previewHeight","didResizeView","didCalculatePreviewSize","sizeMax","sizeMin","fileFilter","totalSizeMax","mimeTypeMatchesWildCard","wildcard","mimeTypeGroup","wildcardGroup","isValidMimeType","acceptedTypes","userInputType","acceptedType","getItemType","validateFile","acceptedFileTypes","typeDetector","detectedType","applyMimeTypeMap","acceptedFileType","validationResult","handleRejection","acceptedFileTypesMapped","acceptedFileTypesMappedUnique","isImage","allowCrop","updateCrop","newAspectRatio","currentCrop","newCrop","humanAspectRatio","ExtensionMap","renameFileToMatchMimeType","getValidOutputMimeType","isImage$1","MATRICES","getImageOrientationMatrix","canvasRelease","isFlipped","getBitmap","swapped","imageToImageData","imageElement","canvasMemoryLimit","requiredMemory","imageOffset","callback","quality","dataURL","binStr","len","canvasToBlob","beforeCreateBlob","promisedImage","cropSVG","fr","original","originalNode","bBox","titleNode","viewBoxAttribute","widthAttribute","heightAttribute","widthUnits","heightUnits","viewBoxList","viewBox","markupSVG","cropCenterX","cropCenterY","canvasZoomFactor","cropTransforms","cropFlipHorizontal","cropFlipVertical","flipTransforms","transformed","objectToImageData","TransformWorker","TRANSFORMS","applyTransforms","transform","filterTransform","resizeTransform","br","bg","applyFilterMatrix","m","ir","ig","ib","mr","mg","mb","ma","or","og","ob","identityMatrix","isIdentityMatrix","mode","upscale","originWidth","originHeight","targetWidth","targetHeight","inputData","outputData","ratioWidth","ratioHeight","ratioWidthHalf","ratioHeightHalf","j","x2","weight","weights","weightsAlpha","yy","dy","w0","xx","dx","correctOrientation","intelByteAligned","tags","readData","marker","markerLength","orientationCorrected","getImageHead","trips","chain","funcs","promise","canvasApplyMarkup","drawers","TYPE_DRAW_ROUTES","applyMarkupStyles","drawMarkupStyles","drawRect","drawEllipse","kappa","ox","oy","xe","ye","xm","ym","drawImage","ar","drawText","drawPath","drawLine","imageDataToCanvas","transformImage","instructions","stripImageHead","afterCreateBlob","qualityAsPercentage","resolveWithBlob","promisedBlob","toBlob","promisedCanvas","imageHead","outputFormat","measure","intervalId","isIOS","TRANSFORM_LIST","createVariantCreator","updateMetadata","isDefaultCrop","shouldTransformFile","filterResult","shouldTransform","variants","variantsDefinition","createVariant","qualityMode","clientTransforms","filteredMetadata","instruction","exif","willChangeType","canChangeQuality","willChangeQuality","out","variantPromises","FilePond.registerPlugin","FilePondPluginImagePreview","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginImageCrop","FilePondPluginImageResize","FilePondPluginImageTransform","URLtoFile","path","FilePond"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}